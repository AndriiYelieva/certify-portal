/*! For license information please see main.341757d5.js.LICENSE.txt */
(()=>{var e={628:(e,t)=>{"use strict";t.A=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),s=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?s===t.replace(/\/.*$/,""):a===t}))}return!0}},497:(e,t,n)=>{"use strict";var r=n(218);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,s,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},275:(e,t)=>{"use strict";class n{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=n.toUint8Array(e),a=n.toUint8Array(t);if(r.length!==a.byteLength)return!1;for(let n=0;n<r.length;n++)if(r[n]!==a[n])return!1;return!0}static concat(){let e;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=!Array.isArray(n[0])||n[1]instanceof Function?Array.isArray(n[0])&&n[1]instanceof Function?n[0]:n[n.length-1]instanceof Function?n.slice(0,n.length-1):n:n[0];let a=0;for(const o of e)a+=o.byteLength;const s=new Uint8Array(a);let i=0;for(const o of e){const e=this.toUint8Array(o);s.set(e,i),i+=e.length}return n[n.length-1]instanceof Function?this.toView(s,n[n.length-1]):s.buffer}}const r="string",a=/^[0-9a-f]+$/i,s=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,i=/^[a-zA-Z0-9-_]+$/;class o{static fromString(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}static toString(e){const t=n.toUint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return decodeURIComponent(escape(r))}}class l{static toString(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=n.toArrayBuffer(e),a=new DataView(r);let s="";for(let n=0;n<r.byteLength;n+=2){const e=a.getUint16(n,t);s+=String.fromCharCode(e)}return s}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new ArrayBuffer(2*e.length),r=new DataView(n);for(let a=0;a<e.length;a++)r.setUint16(2*a,e.charCodeAt(a),t);return n}}class u{static isHex(e){return typeof e===r&&a.test(e)}static isBase64(e){return typeof e===r&&s.test(e)}static isBase64Url(e){return typeof e===r&&i.test(e)}static ToString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=n.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return l.toString(r,!0);case"utf16":case"utf16be":return l.toString(r);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static FromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return l.fromString(e,!0);case"utf16":case"utf16be":return l.fromString(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static ToBase64(e){const t=n.toUint8Array(e);if("undefined"!==typeof btoa){const e=this.ToString(t,"binary");return btoa(e)}return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!u.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!==typeof atob?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!u.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.DEFAULT_UTF8_ENCODING;switch(t){case"ascii":return this.FromBinary(e);case"utf8":return o.fromString(e);case"utf16":case"utf16be":return l.fromString(e);case"utf16le":case"usc2":return l.fromString(e,!0);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static ToUtf8String(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.DEFAULT_UTF8_ENCODING;switch(t){case"ascii":return this.ToBinary(e);case"utf8":return o.toString(e);case"utf16":case"utf16be":return l.toString(e);case"utf16le":case"usc2":return l.toString(e,!0);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static FromBinary(e){const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}static ToBinary(e){const t=n.toUint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return r}static ToHex(e){const t=n.toUint8Array(e);let r="";const a=t.length;for(let n=0;n<a;n++){const e=t[n];e<16&&(r+="0"),r+=e.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!u.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t="0".concat(t));const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const e=t.slice(r,r+2);n[r/2]=parseInt(e,16)}return n.buffer}static ToUtf16String(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.toString(e,t)}static FromUtf16String(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return(null===e||void 0===e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}u.DEFAULT_UTF8_ENCODING="utf8",t._H=n,t.U$=u},730:(e,t,n)=>{"use strict";var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},d={};function g(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){p[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];p[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){p[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){p[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){p[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){p[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){p[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){p[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){p[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var a=p.hasOwnProperty(t)?p[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!h.call(d,e)||!h.call(m,e)&&(f.test(e)?d[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);p[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);p[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);p[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){p[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),p.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){p[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),k=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),B=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var U=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}var L,T=Object.assign;function R(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var H=!1;function M(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?R(e):""}function j(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case k:return"Portal";case C:return"Profiler";case N:return"StrictMode";case V:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function J(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return T({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return T({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function se(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(me).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var ve=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ae=null,Ne=null;function Ce(e){if(e=wa(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=Sa(t),ke(e.stateNode,e.type,t))}}function Ee(e){Ae?Ne?Ne.push(e):Ne=[e]:Ae=e}function Be(){if(Ae){var e=Ae,t=Ne;if(Ne=Ae=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function xe(e,t){return e(t)}function Ve(){}var Ie=!1;function De(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return xe(e,t,n)}finally{Ie=!1,(null!==Ae||null!==Ne)&&(Ve(),Be())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Sa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(c)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(ce){Oe=!1}function _e(e,t,n,r,a,s,i,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,Te=null,Re=!1,He=null,Me={onError:function(e){Le=!0,Te=e}};function je(e,t,n,r,a,s,i,o,l){Le=!1,Te=null,_e.apply(Me,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Fe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ke(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var ze=a.unstable_scheduleCallback,$e=a.unstable_cancelCallback,Qe=a.unstable_shouldYield,Ge=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=ht(o):0!==(s&=i)&&(r=ht(s))}else 0!==(i=n&~a)?r=ht(i):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,kt,At,Nt,Ct,Et=!1,Bt=[],xt=null,Vt=null,It=null,Dt=new Map,Pt=new Map,Ot=[],Ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _t(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=wa(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Tt(e){var t=ya(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Fe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wa(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ht(e,t,n){Rt(e)&&n.delete(t)}function Mt(){Et=!1,null!==xt&&Rt(xt)&&(xt=null),null!==Vt&&Rt(Vt)&&(Vt=null),null!==It&&Rt(It)&&(It=null),Dt.forEach(Ht),Pt.forEach(Ht)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Mt)))}function Kt(e){function t(t){return jt(t,e)}if(0<Bt.length){jt(Bt[0],e);for(var n=1;n<Bt.length;n++){var r=Bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&jt(xt,e),null!==Vt&&jt(Vt,e),null!==It&&jt(It,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Tt(n),null===n.blockedOn&&Ot.shift()}var Ft=b.ReactCurrentBatchConfig,Jt=!0;function Wt(e,t,n,r){var a=wt,s=Ft.transition;Ft.transition=null;try{wt=1,zt(e,t,n,r)}finally{wt=a,Ft.transition=s}}function qt(e,t,n,r){var a=wt,s=Ft.transition;Ft.transition=null;try{wt=4,zt(e,t,n,r)}finally{wt=a,Ft.transition=s}}function zt(e,t,n,r){if(Jt){var a=Qt(e,t,n,r);if(null===a)Jr(e,t,r,$t,n),_t(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return xt=Lt(xt,e,t,n,r,a),!0;case"dragenter":return Vt=Lt(Vt,e,t,n,r,a),!0;case"mouseover":return It=Lt(It,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(_t(e,r),4&t&&-1<Ut.indexOf(e)){for(;null!==a;){var s=wa(a);if(null!==s&&St(s),null===(s=Qt(e,t,n,r))&&Jr(e,t,r,$t,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Jr(e,t,r,null,n)}}var $t=null;function Qt(e,t,n,r){if($t=null,null!==(e=ya(e=Se(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Fe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=T({},un,{view:0,detail:0}),fn=an(hn),mn=T({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),dn=an(mn),gn=an(T({},mn,{dataTransfer:0})),pn=an(T({},hn,{relatedTarget:0})),vn=an(T({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=T({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=an(yn),bn=an(T({},un,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function Cn(){return Nn}var En=T({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Bn=an(En),xn=an(T({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Vn=an(T({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=an(T({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=T({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Dn),On=[9,13,27,32],Un=c&&"CompositionEvent"in window,_n=null;c&&"documentMode"in document&&(_n=document.documentMode);var Ln=c&&"TextEvent"in window&&!_n,Tn=c&&(!Un||_n&&8<_n&&11>=_n),Rn=String.fromCharCode(32),Hn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,zn=null;function $n(e){Rr(e,0)}function Qn(e){if(z(ba(e)))return e}function Gn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),zn=qn=null)}function nr(e){if("value"===e.propertyName&&Qn(zn)){var t=[];Wn(t,zn,e,Se(e)),De($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),zn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(zn)}function sr(e,t){if("click"===e)return Qn(t)}function ir(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!h.call(t,a)||!or(e[a],t[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function dr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=cr(n,s);var i=cr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==pr||pr!==$(r)||("selectionStart"in(r=pr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Ar={},Nr={};function Cr(e){if(Ar[e])return Ar[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Ar[e]=n[t];return e}c&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Cr("animationend"),Br=Cr("animationiteration"),xr=Cr("animationstart"),Vr=Cr("transitionend"),Ir=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ir.set(e,t),l(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Ur=Dr[Or];Pr(Ur.toLowerCase(),"on"+(Ur[0].toUpperCase()+Ur.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Br,"onAnimationIteration"),Pr(xr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Vr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,u){if(je.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=Te;Le=!1,Te=null,Re||(Re=!0,He=c)}}(r,t,void 0,e),e.currentTarget=null}function Rr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Tr(a,o,u),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,u=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Tr(a,o,u),s=l}}}if(Re)throw e=He,Re=!1,He=null,e}function Hr(e,t){var n=t[ga];void 0===n&&(n=t[ga]=new Set);var r=e+"__bubble";n.has(r)||(Fr(t,e,2,!1),n.add(r))}function Mr(e,t,n){var r=0;t&&(r|=4),Fr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[jr]){e[jr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Mr(t,!1,e),Mr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Mr("selectionchange",!1,t))}}function Fr(e,t,n,r){switch(Gt(t)){case 1:var a=Wt;break;case 4:a=qt;break;default:a=zt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Jr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}De((function(){var r=s,a=Se(n),i=[];e:{var o=Ir.get(e);if(void 0!==o){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Bn;break;case"focusin":u="focus",l=pn;break;case"focusout":u="blur",l=pn;break;case"beforeblur":case"afterblur":l=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Vn;break;case Er:case Br:case xr:l=vn;break;case Vr:l=In;break;case"scroll":l=fn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==o?o+"Capture":null:o;c=[];for(var m,d=r;null!==d;){var g=(m=d).stateNode;if(5===m.tag&&null!==g&&(m=g,null!==f&&(null!=(g=Pe(d,f))&&c.push(Wr(d,g,m)))),h)break;d=d.return}0<c.length&&(o=new l(o,u,null,n,a),i.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!ya(u)&&!u[da])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ya(u):null)&&(u!==(h=Ke(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=dn,g="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(c=xn,g="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==l?o:ba(l),m=null==u?o:ba(u),(o=new c(g,d+"leave",l,n,a)).target=h,o.relatedTarget=m,g=null,ya(a)===r&&((c=new c(f,d+"enter",u,n,a)).target=m,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(f=u,d=0,m=c=l;m;m=zr(m))d++;for(m=0,g=f;g;g=zr(g))m++;for(;0<d-m;)c=zr(c),d--;for(;0<m-d;)f=zr(f),m--;for(;d--;){if(c===f||null!==f&&c===f.alternate)break e;c=zr(c),f=zr(f)}c=null}else c=null;null!==l&&$r(i,o,l,c,!1),null!==u&&null!==h&&$r(i,h,u,c,!0)}if("select"===(l=(o=r?ba(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var p=Gn;else if(Jn(o))if(Yn)p=ir;else{p=ar;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(p=sr);switch(p&&(p=p(e,r))?Wn(i,p,n,a):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?ba(r):window,e){case"focusin":(Jn(v)||"true"===v.contentEditable)&&(pr=v,vr=r,yr=null);break;case"focusout":yr=vr=pr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(i,n,a);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(i,n,a)}var y;if(Un)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Kn?Mn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Kn&&(y=en()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Kn=!0)),0<(v=qr(r,w)).length&&(w=new bn(w,e,null,n,a),i.push({event:w,listeners:v}),y?w.data=y:null!==(y=jn(n))&&(w.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Rn);case"textInput":return(e=t.data)===Rn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Un&&Mn(e,t)?(e=en(),Zt=Xt=Yt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Rr(i,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,a)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,a))),e=e.return}return r}function zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,a?null!=(l=Pe(n,s))&&i.unshift(Wr(n,l,o)):a||null!=(l=Pe(n,s))&&i.push(Wr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Gr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Kt(t)}function ua(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ha=Math.random().toString(36).slice(2),fa="__reactFiber$"+ha,ma="__reactProps$"+ha,da="__reactContainer$"+ha,ga="__reactEvents$"+ha,pa="__reactListeners$"+ha,va="__reactHandles$"+ha;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[da]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[fa])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function wa(e){return!(e=e[fa]||e[da])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Sa(e){return e[ma]||null}var ka=[],Aa=-1;function Na(e){return{current:e}}function Ca(e){0>Aa||(e.current=ka[Aa],ka[Aa]=null,Aa--)}function Ea(e,t){Aa++,ka[Aa]=e.current,e.current=t}var Ba={},xa=Na(Ba),Va=Na(!1),Ia=Ba;function Da(e,t){var n=e.type.contextTypes;if(!n)return Ba;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ca(Va),Ca(xa)}function Ua(e,t,n){if(xa.current!==Ba)throw Error(s(168));Ea(xa,t),Ea(Va,n)}function _a(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,F(e)||"Unknown",a));return T({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ba,Ia=xa.current,Ea(xa,e),Ea(Va,Va.current),!0}function Ta(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=_a(e,t,Ia),r.__reactInternalMemoizedMergedChildContext=e,Ca(Va),Ca(xa),Ea(xa,e)):Ca(Va),Ea(Va,n)}var Ra=null,Ha=!1,Ma=!1;function ja(e){null===Ra?Ra=[e]:Ra.push(e)}function Ka(){if(!Ma&&null!==Ra){Ma=!0;var e=0,t=wt;try{var n=Ra;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ra=null,Ha=!1}catch(a){throw null!==Ra&&(Ra=Ra.slice(e+1)),ze(Ze,Ka),a}finally{wt=t,Ma=!1}}return null}var Fa=[],Ja=0,Wa=null,qa=0,za=[],$a=0,Qa=null,Ga=1,Ya="";function Xa(e,t){Fa[Ja++]=qa,Fa[Ja++]=Wa,Wa=e,qa=t}function Za(e,t,n){za[$a++]=Ga,za[$a++]=Ya,za[$a++]=Qa,Qa=e;var r=Ga;e=Ya;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ga=1<<32-it(t)+a|n<<a|r,Ya=s+e}else Ga=1<<s|n<<a|r,Ya=e}function es(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ts(e){for(;e===Wa;)Wa=Fa[--Ja],Fa[Ja]=null,qa=Fa[--Ja],Fa[Ja]=null;for(;e===Qa;)Qa=za[--$a],za[$a]=null,Ya=za[--$a],za[$a]=null,Ga=za[--$a],za[$a]=null}var ns=null,rs=null,as=!1,ss=null;function is(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ua(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qa?{id:Ga,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(as){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ua(n.nextSibling);var r=ns;t&&os(e,t)?is(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!as)return cs(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw fs(),Error(s(418));for(;t;)is(e,t),t=ua(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ua(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ua(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=rs;e;)e=ua(e.nextSibling)}function ms(){rs=ns=null,as=!1}function ds(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ps(e,t){if(e&&e.defaultProps){for(var n in t=T({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Na(null),ys=null,ws=null,bs=null;function Ss(){bs=ws=ys=null}function ks(e){var t=vs.current;Ca(vs),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Es=null;function Bs(e){null===Es?Es=[e]:Es.push(e)}function xs(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Bs(t)):(n.next=a.next,a.next=n),t.interleaved=n,Vs(e,r)}function Vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Is=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Vl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Vs(e,n)}return null===(a=r.interleaved)?(t.next=t,Bs(r)):(t.next=a.next,a.next=t),r.interleaved=t,Vs(e,n)}function _s(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ts(e,t,n,r){var a=e.updateQueue;Is=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,u=l.next;l.next=null,null===i?s=u:i.next=u,i=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=a.baseState;for(i=0,c=u=l=null,o=s;;){var f=o.lane,m=o.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,g=o;switch(f=t,m=n,g.tag){case 1:if("function"===typeof(d=g.payload)){h=d.call(m,h,f);break e}h=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(f="function"===typeof(d=g.payload)?d.call(m,h,f):d)||void 0===f)break e;h=T({},h,f);break e;case 2:Is=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=m,l=h):c=c.next=m,i|=f;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(f=o).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===c&&(l=h),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Tl|=i,e.lanes=i,e.memoizedState=h}}function Rs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Hs=(new r.Component).refs;function Ms(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:T({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var js={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),a=nu(e),s=Os(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(ru(t,e,a,r),_s(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),a=nu(e),s=Os(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(ru(t,e,a,r),_s(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),a=Os(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Us(e,a,r))&&(ru(t,e,r,n),_s(t,e,r))}};function Ks(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function Fs(e,t,n){var r=!1,a=Ba,s=t.contextType;return"object"===typeof s&&null!==s?s=Cs(s):(a=Pa(t)?Ia:xa.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):Ba),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=js,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function Js(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&js.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Hs,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Cs(s):(s=Pa(t)?Ia:xa.current,a.context=Da(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Ms(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&js.enqueueReplaceState(a,a.state,null),Ts(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function qs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;t===Hs&&(t=a.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function zs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $s(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ru(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===A?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&$s(s)===t.type)?((r=a(t,n.props)).ref=qs(e,t,n),r.return=e,r):((r=_u(n.type,n.key,n.props,null,e.mode,r)).ref=qs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ru(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=_u(t.type,t.key,t.props,null,e.mode,n)).ref=qs(e,null,t),n.return=e,n;case k:return(t=Hu(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||_(t))return(t=Lu(t,e.mode,n,null)).return=e,t;zs(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===a?u(e,t,n,r):null;case k:return n.key===a?c(e,t,n,r):null;case P:return m(e,t,(a=n._init)(n._payload),r)}if(te(n)||_(n))return null!==a?null:h(e,t,n,r,null);zs(e,n)}return null}function d(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return d(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||_(r))return h(t,e=e.get(n)||null,r,a,null);zs(t,r)}return null}function g(a,s,o,l){for(var u=null,c=null,h=s,g=s=0,p=null;null!==h&&g<o.length;g++){h.index>g?(p=h,h=null):p=h.sibling;var v=m(a,h,o[g],l);if(null===v){null===h&&(h=p);break}e&&h&&null===v.alternate&&t(a,h),s=i(v,s,g),null===c?u=v:c.sibling=v,c=v,h=p}if(g===o.length)return n(a,h),as&&Xa(a,g),u;if(null===h){for(;g<o.length;g++)null!==(h=f(a,o[g],l))&&(s=i(h,s,g),null===c?u=h:c.sibling=h,c=h);return as&&Xa(a,g),u}for(h=r(a,h);g<o.length;g++)null!==(p=d(h,a,g,o[g],l))&&(e&&null!==p.alternate&&h.delete(null===p.key?g:p.key),s=i(p,s,g),null===c?u=p:c.sibling=p,c=p);return e&&h.forEach((function(e){return t(a,e)})),as&&Xa(a,g),u}function p(a,o,l,u){var c=_(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=o,p=o=0,v=null,y=l.next();null!==g&&!y.done;p++,y=l.next()){g.index>p?(v=g,g=null):v=g.sibling;var w=m(a,g,y.value,u);if(null===w){null===g&&(g=v);break}e&&g&&null===w.alternate&&t(a,g),o=i(w,o,p),null===h?c=w:h.sibling=w,h=w,g=v}if(y.done)return n(a,g),as&&Xa(a,p),c;if(null===g){for(;!y.done;p++,y=l.next())null!==(y=f(a,y.value,u))&&(o=i(y,o,p),null===h?c=y:h.sibling=y,h=y);return as&&Xa(a,p),c}for(g=r(a,g);!y.done;p++,y=l.next())null!==(y=d(g,a,p,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?p:y.key),o=i(y,o,p),null===h?c=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(a,e)})),as&&Xa(a,p),c}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===A&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case S:e:{for(var u=i.key,c=s;null!==c;){if(c.key===u){if((u=i.type)===A){if(7===c.tag){n(r,c.sibling),(s=a(c,i.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&$s(u)===c.type){n(r,c.sibling),(s=a(c,i.props)).ref=qs(r,c,i),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}i.type===A?((s=Lu(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=_u(i.type,i.key,i.props,null,r.mode,l)).ref=qs(r,s,i),l.return=r,r=l)}return o(r);case k:e:{for(c=i.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Hu(i,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(c=i._init)(i._payload),l)}if(te(i))return g(r,s,i,l);if(_(i))return p(r,s,i,l);zs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Ru(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Gs=Qs(!0),Ys=Qs(!1),Xs={},Zs=Na(Xs),ei=Na(Xs),ti=Na(Xs);function ni(e){if(e===Xs)throw Error(s(174));return e}function ri(e,t){switch(Ea(ti,t),Ea(ei,e),Ea(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Zs),Ea(Zs,t)}function ai(){Ca(Zs),Ca(ei),Ca(ti)}function si(e){ni(ti.current);var t=ni(Zs.current),n=le(t,e.type);t!==n&&(Ea(ei,e),Ea(Zs,n))}function ii(e){ei.current===e&&(Ca(Zs),Ca(ei))}var oi=Na(0);function li(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ui=[];function ci(){for(var e=0;e<ui.length;e++)ui[e]._workInProgressVersionPrimary=null;ui.length=0}var hi=b.ReactCurrentDispatcher,fi=b.ReactCurrentBatchConfig,mi=0,di=null,gi=null,pi=null,vi=!1,yi=!1,wi=0,bi=0;function Si(){throw Error(s(321))}function ki(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function Ai(e,t,n,r,a,i){if(mi=i,di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hi.current=null===e||null===e.memoizedState?io:oo,e=n(r,a),yi){i=0;do{if(yi=!1,wi=0,25<=i)throw Error(s(301));i+=1,pi=gi=null,t.updateQueue=null,hi.current=lo,e=n(r,a)}while(yi)}if(hi.current=so,t=null!==gi&&null!==gi.next,mi=0,pi=gi=di=null,vi=!1,t)throw Error(s(300));return e}function Ni(){var e=0!==wi;return wi=0,e}function Ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===pi?di.memoizedState=pi=e:pi=pi.next=e,pi}function Ei(){if(null===gi){var e=di.alternate;e=null!==e?e.memoizedState:null}else e=gi.next;var t=null===pi?di.memoizedState:pi.next;if(null!==t)pi=t,gi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(gi=e).memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},null===pi?di.memoizedState=pi=e:pi=pi.next=e}return pi}function Bi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=Ei(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=gi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,u=null,c=i;do{var h=c.lane;if((mi&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,o=r):u=u.next=f,di.lanes|=h,Tl|=h}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,di.lanes|=i,Tl|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vi(e){var t=Ei(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);or(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ii(){}function Di(e,t){var n=di,r=Ei(),a=t(),i=!or(r.memoizedState,a);if(i&&(r.memoizedState=a,bo=!0),r=r.queue,Fi(Ui.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==pi&&1&pi.memoizedState.tag){if(n.flags|=2048,Ri(9,Oi.bind(null,n,r,a,t),void 0,null),null===Il)throw Error(s(349));0!==(30&mi)||Pi(n,t,a)}return a}function Pi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=di.updateQueue)?(t={lastEffect:null,stores:null},di.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oi(e,t,n,r){t.value=n,t.getSnapshot=r,_i(t)&&Li(e)}function Ui(e,t,n){return n((function(){_i(t)&&Li(e)}))}function _i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Li(e){var t=Vs(e,1);null!==t&&ru(t,e,1,-1)}function Ti(e){var t=Ci();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,di,e),[t.memoizedState,e]}function Ri(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=di.updateQueue)?(t={lastEffect:null,stores:null},di.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Hi(){return Ei().memoizedState}function Mi(e,t,n,r){var a=Ci();di.flags|=e,a.memoizedState=Ri(1|t,n,void 0,void 0===r?null:r)}function ji(e,t,n,r){var a=Ei();r=void 0===r?null:r;var s=void 0;if(null!==gi){var i=gi.memoizedState;if(s=i.destroy,null!==r&&ki(r,i.deps))return void(a.memoizedState=Ri(t,n,s,r))}di.flags|=e,a.memoizedState=Ri(1|t,n,s,r)}function Ki(e,t){return Mi(8390656,8,e,t)}function Fi(e,t){return ji(2048,8,e,t)}function Ji(e,t){return ji(4,2,e,t)}function Wi(e,t){return ji(4,4,e,t)}function qi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ji(4,4,qi.bind(null,t,e),n)}function $i(){}function Qi(e,t){var n=Ei();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ki(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gi(e,t){var n=Ei();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ki(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yi(e,t,n){return 0===(21&mi)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=gt(),di.lanes|=n,Tl|=n,e.baseState=!0),t)}function Xi(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fi.transition;fi.transition={};try{e(!1),t()}finally{wt=n,fi.transition=r}}function Zi(){return Ei().memoizedState}function eo(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=xs(e,t,n,r))){ru(n,e,r,tu()),ao(n,t,r)}}function to(e,t,n){var r=nu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(a.next=a,Bs(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(u){}null!==(n=xs(e,t,a,r))&&(ru(n,e,r,a=tu()),ao(n,t,r))}}function no(e){var t=e.alternate;return e===di||null!==t&&t===di}function ro(e,t){yi=vi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ao(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var so={readContext:Cs,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},io={readContext:Cs,useCallback:function(e,t){return Ci().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:Ki,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mi(4194308,4,qi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mi(4,2,e,t)},useMemo:function(e,t){var n=Ci();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ci();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,di,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ci().memoizedState=e},useState:Ti,useDebugValue:$i,useDeferredValue:function(e){return Ci().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Xi.bind(null,e[1]),Ci().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=di,a=Ci();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&mi)||Pi(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ki(Ui.bind(null,r,i,e),[e]),r.flags|=2048,Ri(9,Oi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Ci(),t=Il.identifierPrefix;if(as){var n=Ya;t=":"+t+"R"+(n=(Ga&~(1<<32-it(Ga)-1)).toString(32)+n),0<(n=wi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Cs,useCallback:Qi,useContext:Cs,useEffect:Fi,useImperativeHandle:zi,useInsertionEffect:Ji,useLayoutEffect:Wi,useMemo:Gi,useReducer:xi,useRef:Hi,useState:function(){return xi(Bi)},useDebugValue:$i,useDeferredValue:function(e){return Yi(Ei(),gi.memoizedState,e)},useTransition:function(){return[xi(Bi)[0],Ei().memoizedState]},useMutableSource:Ii,useSyncExternalStore:Di,useId:Zi,unstable_isNewReconciler:!1},lo={readContext:Cs,useCallback:Qi,useContext:Cs,useEffect:Fi,useImperativeHandle:zi,useInsertionEffect:Ji,useLayoutEffect:Wi,useMemo:Gi,useReducer:Vi,useRef:Hi,useState:function(){return Vi(Bi)},useDebugValue:$i,useDeferredValue:function(e){var t=Ei();return null===gi?t.memoizedState=e:Yi(t,gi.memoizedState,e)},useTransition:function(){return[Vi(Bi)[0],Ei().memoizedState]},useMutableSource:Ii,useSyncExternalStore:Di,useId:Zi,unstable_isNewReconciler:!1};function uo(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),ho(0,t)},n}function go(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===zl?zl=new Set([this]):zl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var wo=b.ReactCurrentOwner,bo=!1;function So(e,t,n,r){t.child=null===e?Ys(t,null,n,r):Gs(t,e.child,n,r)}function ko(e,t,n,r,a){n=n.render;var s=t.ref;return Ns(t,a),r=Ai(e,t,n,r,s,a),n=Ni(),null===e||bo?(as&&n&&es(t),t.flags|=1,So(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function Ao(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_u(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Uu(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return Bo(e,t,n,r,a)}function Co(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Ul,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Ul,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ea(Ul,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ea(Ul,Ol),Ol|=r;return So(e,t,a,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bo(e,t,n,r,a){var s=Pa(n)?Ia:xa.current;return s=Da(t,s),Ns(t,a),n=Ai(e,t,n,r,s,a),r=Ni(),null===e||bo?(as&&r&&es(t),t.flags|=1,So(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function xo(e,t,n,r,a){if(Pa(n)){var s=!0;La(t)}else s=!1;if(Ns(t,a),null===t.stateNode)Jo(e,t),Fs(t,n,r),Ws(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,u=n.contextType;"object"===typeof u&&null!==u?u=Cs(u):u=Da(t,u=Pa(n)?Ia:xa.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;h||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==u)&&Js(t,i,r,u),Is=!1;var f=t.memoizedState;i.state=f,Ts(t,r,i,a),l=t.memoizedState,o!==r||f!==l||Va.current||Is?("function"===typeof c&&(Ms(t,n,c,r),l=t.memoizedState),(o=Is||Ks(t,n,o,r,f,l,u))?(h||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=u,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ps(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:ps(t.type,o),i.props=u,h=t.pendingProps,f=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Cs(l):l=Da(t,l=Pa(n)?Ia:xa.current);var m=n.getDerivedStateFromProps;(c="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==h||f!==l)&&Js(t,i,r,l),Is=!1,f=t.memoizedState,i.state=f,Ts(t,r,i,a);var d=t.memoizedState;o!==h||f!==d||Va.current||Is?("function"===typeof m&&(Ms(t,n,m,r),d=t.memoizedState),(u=Is||Ks(t,n,u,r,f,d,l)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,d,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=d),i.props=r,i.state=d,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Vo(e,t,n,r,s,a)}function Vo(e,t,n,r,a,s){Eo(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ta(t,n,!1),Wo(e,t,s);r=t.stateNode,wo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Gs(t,e.child,null,s),t.child=Gs(t,null,o,s)):So(e,t,o,s),t.memoizedState=r.state,a&&Ta(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Ua(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ua(0,t.context,!1),ri(e,t.containerInfo)}function Do(e,t,n,r,a){return ms(),ds(a),t.flags|=256,So(e,t,n,r),t.child}var Po,Oo,Uo,_o,Lo={dehydrated:null,treeContext:null,retryLane:0};function To(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ro(e,t,n){var r,a=t.pendingProps,i=oi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ea(oi,1&i),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Tu(l,a,0,null),e=Lu(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=To(n),t.memoizedState=Lo,e):Ho(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,Mo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Tu({mode:"visible",children:r.children},a,0,null),(i=Lu(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&Gs(t,e.child,null,o),t.child.memoizedState=To(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Mo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Mo(e,t,o,r=co(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Il)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Vs(e,a),ru(r,e,a,-1))}return pu(),Mo(e,t,o,r=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=xu.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rs=ua(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(za[$a++]=Ga,za[$a++]=Ya,za[$a++]=Qa,Ga=e.id,Ya=e.overflow,Qa=t),t=Ho(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var u={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=u,t.deletions=null):(a=Uu(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Uu(r,o):(o=Lu(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?To(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,a}return e=(o=e.child).sibling,a=Uu(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ho(e,t){return(t=Tu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Mo(e,t,n,r){return null!==r&&ds(r),Gs(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function Ko(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Fo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(So(e,t,r.children,n),0!==(2&(r=oi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jo(e,n,t);else if(19===e.tag)jo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(oi,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===li(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ko(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===li(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ko(t,!0,n,null,s);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $o(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zo(t),null;case 1:case 17:return Pa(t.type)&&Oa(),zo(t),null;case 3:return r=t.stateNode,ai(),Ca(Va),Ca(xa),ci(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Oo(e,t),zo(t),null;case 5:ii(t);var a=ni(ti.current);if(n=t.type,null!==e&&null!=t.stateNode)Uo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return zo(t),null}if(e=ni(Zs.current),hs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fa]=t,r[ma]=i,e=0!==(1&t.mode),n){case"dialog":Hr("cancel",r),Hr("close",r);break;case"iframe":case"object":case"embed":Hr("load",r);break;case"video":case"audio":for(a=0;a<_r.length;a++)Hr(_r[a],r);break;case"source":Hr("error",r);break;case"img":case"image":case"link":Hr("error",r),Hr("load",r);break;case"details":Hr("toggle",r);break;case"input":G(r,i),Hr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Hr("invalid",r);break;case"textarea":ae(r,i),Hr("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var u=i[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,u,e),a=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,u,e),a=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Hr("scroll",r)}switch(n){case"input":q(r),Z(r,i,!0);break;case"textarea":q(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fa]=t,e[ma]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Hr("cancel",e),Hr("close",e),a=r;break;case"iframe":case"object":case"embed":Hr("load",e),a=r;break;case"video":case"audio":for(a=0;a<_r.length;a++)Hr(_r[a],e);a=r;break;case"source":Hr("error",e),a=r;break;case"img":case"image":case"link":Hr("error",e),Hr("load",e),a=r;break;case"details":Hr("toggle",e),a=r;break;case"input":G(e,r),a=Q(e,r),Hr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=T({},r,{value:void 0}),Hr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Hr("invalid",e)}for(i in ye(n,a),u=a)if(u.hasOwnProperty(i)){var c=u[i];"style"===i?pe(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===i?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Hr("scroll",e):null!=c&&w(e,i,c,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return zo(t),null;case 6:if(e&&null!=t.stateNode)_o(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=ni(ti.current),ni(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(i=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return zo(t),null;case 13:if(Ca(oi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ms(),t.flags|=98560,i=!1;else if(i=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[fa]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;zo(t),i=!1}else null!==ss&&(ou(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oi.current)?0===_l&&(_l=3):pu())),null!==t.updateQueue&&(t.flags|=4),zo(t),null);case 4:return ai(),Oo(e,t),null===e&&Kr(t.stateNode.containerInfo),zo(t),null;case 10:return ks(t.type._context),zo(t),null;case 19:if(Ca(oi),null===(i=t.memoizedState))return zo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)qo(i,!1);else{if(0!==_l||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=li(e))){for(t.flags|=128,qo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(oi,1&oi.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>Fl&&(t.flags|=128,r=!0,qo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=li(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return zo(t),null}else 2*Ye()-i.renderingStartTime>Fl&&1073741824!==n&&(t.flags|=128,r=!0,qo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=oi.current,Ea(oi,r?1&n|2:1&n),t):(zo(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(zo(t),6&t.subtreeFlags&&(t.flags|=8192)):zo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Pa(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ai(),Ca(Va),Ca(xa),ci(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ii(t),null;case 13:if(Ca(oi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(oi),null;case 4:return ai(),null;case 10:return ks(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Uo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ni(Zs.current);var s,i=null;switch(n){case"input":a=Q(e,a),r=Q(e,r),i=[];break;case"select":a=T({},a,{value:void 0}),r=T({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(i=i||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Hr("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},_o=function(e,t,n,r){n!==r&&(t.flags|=4)};var Go=!1,Yo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&tl(t,n,s)}a=a.next}while(a!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[ma],delete t[ga],delete t[pa],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,fl=!1;function ml(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Yo||el(n,t);case 6:var r=hl,a=fl;hl=null,ml(e,t,n),fl=a,null!==(hl=r)&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Kt(e)):la(hl,n.stateNode));break;case 4:r=hl,a=fl,hl=n.stateNode.containerInfo,fl=!0,ml(e,t,n),hl=r,fl=a;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&tl(n,t,i),a=a.next}while(a!==r)}ml(e,t,n);break;case 1:if(!Yo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Cu(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,ml(e,t,n),Yo=r):ml(e,t,n);break;default:ml(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Vu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));dl(i,o,a),hl=null,fl=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(c){Cu(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),yl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(p){Cu(e,e.return,p)}try{rl(5,e,e.return)}catch(p){Cu(e,e.return,p)}}break;case 1:pl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(pl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(p){Cu(e,e.return,p)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),we(l,o);var c=we(l,i);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];"style"===h?pe(a,f):"dangerouslySetInnerHTML"===h?he(a,f):"children"===h?fe(a,f):w(a,h,f,c)}switch(l){case"input":X(a,i);break;case"textarea":se(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var d=i.value;null!=d?ne(a,!!i.multiple,d,!1):m!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ma]=i}catch(p){Cu(e,e.return,p)}}break;case 6:if(pl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){Cu(e,e.return,p)}}break;case 3:if(pl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(p){Cu(e,e.return,p)}break;case 4:default:pl(t,e),yl(e);break;case 13:pl(t,e),yl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Kl=Ye())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(c=Yo)||h,pl(t,e),Yo=c):pl(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zo=e,h=e.child;null!==h;){for(f=Zo=h;null!==Zo;){switch(d=(m=Zo).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:el(m,m.return);var g=m.stateNode;if("function"===typeof g.componentWillUnmount){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Cu(r,n,p)}}break;case 5:el(m,m.return);break;case 22:if(null!==m.memoizedState){kl(f);continue}}null!==d?(d.return=m,Zo=d):kl(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{a=f.stateNode,c?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=f.stateNode,o=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",o))}catch(p){Cu(e,e.return,p)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(p){Cu(e,e.return,p)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pl(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),cl(e,ll(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ul(e,ll(e),i);break;default:throw Error(s(161))}}catch(o){Cu(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Zo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var a=Zo,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Go;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Go;var u=Yo;if(Go=i,(Yo=l)&&!u)for(Zo=a;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?Al(a):null!==l?(l.return=i,Zo=l):Al(a);for(;null!==s;)Zo=s,bl(s,t,n),s=s.sibling;Zo=a,Go=o,Yo=u}Sl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Zo=s):Sl(e)}}function Sl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ps(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Rs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Rs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Kt(f)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&sl(t)}catch(m){Cu(t,t.return,m)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Al(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Cu(t,a,l)}}var s=t.return;try{sl(t)}catch(l){Cu(t,s,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){Cu(t,i,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Nl,Cl=Math.ceil,El=b.ReactCurrentDispatcher,Bl=b.ReactCurrentOwner,xl=b.ReactCurrentBatchConfig,Vl=0,Il=null,Dl=null,Pl=0,Ol=0,Ul=Na(0),_l=0,Ll=null,Tl=0,Rl=0,Hl=0,Ml=null,jl=null,Kl=0,Fl=1/0,Jl=null,Wl=!1,ql=null,zl=null,$l=!1,Ql=null,Gl=0,Yl=0,Xl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Vl)?Ye():-1!==Zl?Zl:Zl=Ye()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Vl)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===eu&&(eu=gt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function ru(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Vl)&&e===Il||(e===Il&&(0===(2&Vl)&&(Rl|=n),4===_l&&lu(e,Pl)),au(e,r),1===n&&0===Vl&&0===(1&t.mode)&&(Fl=Ye()+500,Ha&&Ka()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ft(e,e===Il?Pl:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){Ha=!0,ja(e)}(uu.bind(null,e)):ja(uu.bind(null,e)),ia((function(){0===(6&Vl)&&Ka()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Vl))throw Error(s(327));var n=e.callbackNode;if(Au()&&e.callbackNode!==n)return null;var r=ft(e,e===Il?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var a=Vl;Vl|=2;var i=gu();for(Il===e&&Pl===t||(Jl=null,Fl=Ye()+500,mu(e,t));;)try{wu();break}catch(l){du(e,l)}Ss(),El.current=i,Vl=a,null!==Dl?t=0:(Il=null,Pl=0,t=_l)}if(0!==t){if(2===t&&(0!==(a=dt(e))&&(r=a,t=iu(e,a))),1===t)throw n=Ll,mu(e,0),lu(e,r),au(e,Ye()),n;if(6===t)lu(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!or(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vu(e,r))&&(0!==(i=dt(e))&&(r=i,t=iu(e,i))),1===t))throw n=Ll,mu(e,0),lu(e,r),au(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:ku(e,jl,Jl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Kl+500-Ye())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(ku.bind(null,e,jl,Jl),t);break}ku(e,jl,Jl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ra(ku.bind(null,e,jl,Jl),r);break}ku(e,jl,Jl);break;default:throw Error(s(329))}}}return au(e,Ye()),e.callbackNode===n?su.bind(null,e):null}function iu(e,t){var n=Ml;return e.current.memoizedState.isDehydrated&&(mu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=jl,jl=n,null!==t&&ou(t)),e}function ou(e){null===jl?jl=e:jl.push.apply(jl,e)}function lu(e,t){for(t&=~Hl,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Vl))throw Error(s(327));Au();var t=ft(e,0);if(0===(1&t))return au(e,Ye()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=dt(e);0!==r&&(t=r,n=iu(e,r))}if(1===n)throw n=Ll,mu(e,0),lu(e,t),au(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e,jl,Jl),au(e,Ye()),null}function cu(e,t){var n=Vl;Vl|=1;try{return e(t)}finally{0===(Vl=n)&&(Fl=Ye()+500,Ha&&Ka())}}function hu(e){null!==Ql&&0===Ql.tag&&0===(6&Vl)&&Au();var t=Vl;Vl|=1;var n=xl.transition,r=wt;try{if(xl.transition=null,wt=1,e)return e()}finally{wt=r,xl.transition=n,0===(6&(Vl=t))&&Ka()}}function fu(){Ol=Ul.current,Ca(Ul)}function mu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:ai(),Ca(Va),Ca(xa),ci();break;case 5:ii(r);break;case 4:ai();break;case 13:case 19:Ca(oi);break;case 10:ks(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Il=e,Dl=e=Uu(e.current,null),Pl=Ol=t,_l=0,Ll=null,Hl=Rl=Tl=0,jl=Ml=null,null!==Es){for(t=0;t<Es.length;t++)if(null!==(r=(n=Es[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}Es=null}return e}function du(e,t){for(;;){var n=Dl;try{if(Ss(),hi.current=so,vi){for(var r=di.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}vi=!1}if(mi=0,pi=gi=di=null,yi=!1,wi=0,Bl.current=null,null===n||null===n.return){_l=1,Ll=t,Dl=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=vo(o);if(null!==d){d.flags&=-257,yo(d,o,l,0,t),1&d.mode&&po(i,c,t),u=c;var g=(t=d).updateQueue;if(null===g){var p=new Set;p.add(u),t.updateQueue=p}else g.add(u);break e}if(0===(1&t)){po(i,c,t),pu();break e}u=Error(s(426))}else if(as&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),yo(v,o,l,0,t),ds(uo(u,l));break e}}i=u=uo(u,l),4!==_l&&(_l=2),null===Ml?Ml=[i]:Ml.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ls(i,mo(0,u,t));break e;case 1:l=u;var y=i.type,w=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===zl||!zl.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t,Ls(i,go(i,l,t));break e}}i=i.return}while(null!==i)}Su(n)}catch(b){t=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function gu(){var e=El.current;return El.current=so,null===e?so:e}function pu(){0!==_l&&3!==_l&&2!==_l||(_l=4),null===Il||0===(268435455&Tl)&&0===(268435455&Rl)||lu(Il,Pl)}function vu(e,t){var n=Vl;Vl|=2;var r=gu();for(Il===e&&Pl===t||(Jl=null,mu(e,t));;)try{yu();break}catch(a){du(e,a)}if(Ss(),Vl=n,El.current=r,null!==Dl)throw Error(s(261));return Il=null,Pl=0,_l}function yu(){for(;null!==Dl;)bu(Dl)}function wu(){for(;null!==Dl&&!Qe();)bu(Dl)}function bu(e){var t=Nl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Su(e):Dl=t,Bl.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$o(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return _l=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===_l&&(_l=5)}function ku(e,t,n){var r=wt,a=xl.transition;try{xl.transition=null,wt=1,function(e,t,n,r){do{Au()}while(null!==Ql);if(0!==(6&Vl))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Il&&(Dl=Il=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,Iu(tt,(function(){return Au(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=xl.transition,xl.transition=null;var o=wt;wt=1;var l=Vl;Vl|=4,Bl.current=null,function(e,t){if(ea=Jt,mr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(S){n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,f=e,m=null;t:for(;;){for(var d;f!==n||0!==a&&3!==f.nodeType||(l=o+a),f!==i||0!==r&&3!==f.nodeType||(u=o+r),3===f.nodeType&&(o+=f.nodeValue.length),null!==(d=f.firstChild);)m=f,f=d;for(;;){if(f===e)break t;if(m===n&&++c===a&&(l=o),m===i&&++h===r&&(u=o),null!==(d=f.nextSibling))break;m=(f=m).parentNode}f=d}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Jt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var p=g.memoizedProps,v=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:ps(t.type,p),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(S){Cu(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}g=nl,nl=!1}(e,n),vl(n,e),dr(ta),Jt=!!ea,ta=ea=null,e.current=n,wl(n,e,a),Ge(),Vl=l,wt=o,xl.transition=i}else e.current=n;if($l&&($l=!1,Ql=e,Gl=a),i=e.pendingLanes,0===i&&(zl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Gl)&&0!==e.tag&&Au(),i=e.pendingLanes,0!==(1&i)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,Ka()}(e,t,n,r)}finally{xl.transition=a,wt=r}return null}function Au(){if(null!==Ql){var e=bt(Gl),t=xl.transition,n=wt;try{if(xl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Gl=0,0!==(6&Vl))throw Error(s(331));var a=Vl;for(Vl|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zo=c;null!==Zo;){var h=Zo;switch(h.tag){case 0:case 11:case 15:rl(8,h,i)}var f=h.child;if(null!==f)f.return=h,Zo=f;else for(;null!==Zo;){var m=(h=Zo).sibling,d=h.return;if(il(h),h===c){Zo=null;break}if(null!==m){m.return=d,Zo=m;break}Zo=d}}}var g=i.alternate;if(null!==g){var p=g.child;if(null!==p){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(null!==p)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Zo=y;break e}Zo=i.return}}var w=e.current;for(Zo=w;null!==Zo;){var b=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Zo=b;else e:for(o=w;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(k){Cu(l,l.return,k)}if(l===o){Zo=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Zo=S;break e}Zo=l.return}}if(Vl=a,Ka(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{wt=n,xl.transition=t}}return!1}function Nu(e,t,n){e=Us(e,t=mo(0,t=uo(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),au(e,t))}function Cu(e,t,n){if(3===e.tag)Nu(e,e,n);else for(;null!==t;){if(3===t.tag){Nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zl||!zl.has(r))){t=Us(t,e=go(t,e=uo(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),au(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Pl&n)===n&&(4===_l||3===_l&&(130023424&Pl)===Pl&&500>Ye()-Kl?mu(e,0):Hl|=n),au(e,t)}function Bu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Vs(e,t))&&(vt(e,t,n),au(e,n))}function xu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Bu(e,n)}function Vu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Bu(e,n)}function Iu(e,t){return ze(e,t)}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Du(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _u(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Ou(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case A:return Lu(n.children,a,i,t);case N:o=8,a|=8;break;case C:return(e=Pu(12,n,t,2|a)).elementType=C,e.lanes=i,e;case V:return(e=Pu(13,n,t,a)).elementType=V,e.lanes=i,e;case I:return(e=Pu(19,n,t,a)).elementType=I,e.lanes=i,e;case O:return Tu(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case B:o=9;break e;case x:o=11;break e;case D:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Lu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Tu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ru(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Hu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mu(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,a,s,i,o,l){return e=new Mu(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Ku(e){if(!e)return Ba;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pa(n))return _a(e,n,t)}return t}function Fu(e,t,n,r,a,s,i,o,l){return(e=ju(n,r,!0,e,0,s,0,o,l)).context=Ku(null),n=e.current,(s=Os(r=tu(),a=nu(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,a),e.current.lanes=a,vt(e,a,r),au(e,r),e}function Ju(e,t,n,r){var a=t.current,s=tu(),i=nu(a);return n=Ku(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(a,t,i))&&(ru(e,a,i,s),_s(e,a,i)),i}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function zu(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Va.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),ms();break;case 5:si(t);break;case 1:Pa(t.type)&&La(t);break;case 4:ri(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(vs,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(oi,1&oi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ro(e,t,n):(Ea(oi,1&oi.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ea(oi,1&oi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Fo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(oi,oi.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,as&&0!==(1048576&t.flags)&&Za(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jo(e,t),e=t.pendingProps;var a=Da(t,xa.current);Ns(t,n),a=Ai(null,t,r,e,a,n);var i=Ni();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ds(t),a.updater=js,t.stateNode=a,a._reactInternals=t,Ws(t,r,e,n),t=Vo(null,t,r,!0,i,n)):(t.tag=0,as&&i&&es(t),So(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Jo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===D)return 14}return 2}(r),e=ps(r,e),a){case 0:t=Bo(null,t,r,e,n);break e;case 1:t=xo(null,t,r,e,n);break e;case 11:t=ko(null,t,r,e,n);break e;case 14:t=Ao(null,t,r,ps(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Bo(e,t,r,a=t.elementType===r?a:ps(r,a),n);case 1:return r=t.type,a=t.pendingProps,xo(e,t,r,a=t.elementType===r?a:ps(r,a),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ps(e,t),Ts(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Do(e,t,r,n,a=uo(Error(s(423)),t));break e}if(r!==a){t=Do(e,t,r,n,a=uo(Error(s(424)),t));break e}for(rs=ua(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=Ys(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===a){t=Wo(e,t,n);break e}So(e,t,r,n)}t=t.child}return t;case 5:return si(t),null===e&&us(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==i&&na(r,i)&&(t.flags|=32),Eo(e,t),So(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Ro(e,t,n);case 4:return ri(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Gs(t,null,r,n):So(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ko(e,t,r,a=t.elementType===r?a:ps(r,a),n);case 7:return So(e,t,t.pendingProps,n),t.child;case 8:case 12:return So(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ea(vs,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===a.children&&!Va.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===i.tag){(u=Os(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,null!==(u=i.alternate)&&(u.lanes|=n),As(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}So(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ns(t,n),r=r(a=Cs(a)),t.flags|=1,So(e,t,r,n),t.child;case 14:return a=ps(r=t.type,t.pendingProps),Ao(e,t,r,a=ps(r.type,a),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ps(r,a),Jo(e,t),t.tag=1,Pa(r)?(e=!0,La(t)):e=!1,Ns(t,n),Fs(t,r,a),Ws(t,r,a,n),Vo(null,t,r,!0,e,n);case 19:return Fo(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var $u="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Gu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Wu(i);o.call(e)}}Ju(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Wu(i);s.call(e)}}var i=Fu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=i,e[da]=i.current,Kr(8===e.nodeType?e.parentNode:e),hu(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Wu(l);o.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[da]=l.current,Kr(8===e.nodeType?e.parentNode:e),hu((function(){Ju(t,l,n,r)})),l}(n,t,e,a,r);return Wu(i)}Gu.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Ju(e,t,null,null)},Gu.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Ju(null,e,null,null)})),t[da]=null}},Gu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Tt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),au(t,Ye()),0===(6&Vl)&&(Fl=Ye()+500,Ka()))}break;case 13:hu((function(){var t=Vs(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),zu(e,1)}},kt=function(e){if(13===e.tag){var t=Vs(e,134217728);if(null!==t)ru(t,e,134217728,tu());zu(e,134217728)}},At=function(e){if(13===e.tag){var t=nu(e),n=Vs(e,t);if(null!==n)ru(n,e,t,tu());zu(e,t)}},Nt=function(){return wt},Ct=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Sa(r);if(!a)throw Error(s(90));z(r),X(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cu,Ve=hu;var tc={usingClientEntryPoint:!1,Events:[wa,ba,Sa,Ee,Be,cu]},nc={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(rc),st=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(s(299));var n=!1,r="",a=$u;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,a),e[da]=t.current,Kr(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=$u;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Fu(t,null,e,1,null!=n?n:null,a,0,i,o),e[da]=t.current,Kr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Gu(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[da]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:c,props:s,_owner:o.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,p={};function v(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||d}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||d}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,g(b,v.prototype),b.isPureReactComponent=!0;var S=Array.isArray,k=Object.prototype.hasOwnProperty,A={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,a)&&!N.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:A.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var B=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function V(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+x(l,0):s,S(i)?(a="",null!=e&&(a=e.replace(B,"$&/")+"/"),V(i,t,a,"",(function(e){return e}))):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(B,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",S(e))for(var u=0;u<e.length;u++){var c=s+x(o=e[u],u);l+=V(o,t,a,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=V(o=o.value,t,a,c=s+x(o,u++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],a=0;return V(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},U={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:A};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=g({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=A.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!N.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<a&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<a&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,m=3,d=!1,g=!1,p=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(p=!1,b(e),!g)if(null!==r(u))g=!0,O(k);else{var t=r(c);null!==t&&U(S,t.startTime-e)}}function k(e,n){g=!1,p&&(p=!1,y(E),E=-1),d=!0;var s=m;try{for(b(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!V());){var i=f.callback;if("function"===typeof i){f.callback=null,m=f.priorityLevel;var o=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?f.callback=o:f===r(u)&&a(u),b(n)}else a(u);f=r(u)}if(null!==f)var l=!0;else{var h=r(c);null!==h&&U(S,h.startTime-n),l=!1}return l}finally{f=null,m=s,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,N=!1,C=null,E=-1,B=5,x=-1;function V(){return!(t.unstable_now()-x<B)}function I(){if(null!==C){var e=t.unstable_now();x=e;var n=!0;try{n=C(!0,e)}finally{n?A():(N=!1,C=null)}}else N=!1}if("function"===typeof w)A=function(){w(I)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=I,A=function(){P.postMessage(null)}}else A=function(){v(I,0)};function O(e){C=e,N||(N=!0,A())}function U(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(p?(y(E),E=-1):p=!0,U(S,s-i))):(e.sortIndex=o,n(u,e),g||d||(g=!0,O(k))),e},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(s,i),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".9b52479f.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="certify-portal:";n.l=(r,a,s,i)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[a];var f=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),t)return t(n)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/AndriiYelieva/certify-portal/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var s=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=s);var i=n.p+n.u(t),o=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,s,i=r[0],o=r[1],l=r[2],u=0;if(i.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);u<i.length;u++)s=i[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkcertify_portal=self.webpackChunkcertify_portal||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(43),r=n.t(t,2),a=n(391),s=n(950),i=n.t(s,2);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,c=s.history,d=e.Pop,g=null,p=v();function v(){return(c.state||{idx:null}).idx}function y(){d=e.Pop;let t=v(),n=null==t?null:t-p;p=t,g&&g({action:d,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,c.replaceState(o({},c.state,{idx:p}),""));let b={get action(){return d},get location(){return t(s,c)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),g=e,()=>{s.removeEventListener(l,y),g=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){d=e.Push;let a=f(b.location,t,n);r&&r(a,t),p=v()+1;let o=h(a,p),l=b.createHref(a);try{c.pushState(o,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(l)}i&&g&&g({action:d,location:b.location,delta:1})},replace:function(t,n){d=e.Replace;let a=f(b.location,t,n);r&&r(a,t),p=v();let s=h(a,p),o=b.createHref(a);c.replaceState(s,"",o),i&&g&&g({action:d,location:b.location,delta:0})},go:e=>c.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?d(t):t).pathname||"/",n);if(null==r)return null;let a=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let i=0;null==s&&i<a.length;++i){let e=I(r);s=x(a[i],e)}return s}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(u(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=L([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),y(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:B(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))a(e,t,r);else a(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=w(r.join("/")),o=[];return o.push(...i.map((e=>""===e?s:[s,e].join("/")))),a&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,S=3,k=2,A=1,N=10,C=-2,E=e=>"*"===e;function B(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=C),t&&(r+=k),n.filter((e=>!E(e))).reduce(((e,t)=>e+(b.test(t)?S:""===t?A:N)),r)}function x(e,t){let{routesMeta:n}=e,r={},a="/",s=[];for(let i=0;i<n.length;++i){let e=n[i],o=i===n.length-1,l="/"===a?t:t.slice(a.length)||"/",u=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;s.push({params:r,pathname:L([a,u.pathname]),pathnameBase:T(L([a,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(a=L([a,u.pathnameBase]))}return s}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:i,pattern:e}}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function _(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=d(e):(a=o({},e),u(!a.pathname||!a.pathname.includes("?"),P("?","pathname","search",a)),u(!a.pathname||!a.pathname.includes("#"),P("#","pathname","hash",a)),u(!a.search||!a.search.includes("#"),P("#","search","hash",a)));let s,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?d(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:R(r),hash:H(a)}}(a,s),h=l&&"/"!==l&&l.endsWith("/"),f=(i||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!f||(c.pathname+="/"),c}const L=e=>e.join("/").replace(/\/\/+/g,"/"),T=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function M(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const j=["post","put","patch","delete"],K=(new Set(j),["get",...j]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}const J=t.createContext(null);const W=t.createContext(null);const q=t.createContext(null);const z=t.createContext(null);const $=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=t.createContext(null);function G(){return null!=t.useContext(z)}function Y(){return G()||u(!1),t.useContext(z).location}function X(e){t.useContext(q).static||t.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=t.useContext($);return e?function(){let{router:e}=ue(oe.UseNavigateStable),n=he(le.UseNavigateStable),r=t.useRef(!1);return X((()=>{r.current=!0})),t.useCallback((function(t,a){void 0===a&&(a={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,F({fromRouteId:n},a)))}),[e,n])}():function(){G()||u(!1);let e=t.useContext(J),{basename:n,future:r,navigator:a}=t.useContext(q),{matches:s}=t.useContext($),{pathname:i}=Y(),o=JSON.stringify(U(s,r.v7_relativeSplatPath)),l=t.useRef(!1);return X((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void a.go(t);let s=_(t,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:L([n,s.pathname])),(r.replace?a.replace:a.push)(s,r.state,r)}),[n,a,o,i,e])}()}function ee(e,n){let{relative:r}=void 0===n?{}:n,{future:a}=t.useContext(q),{matches:s}=t.useContext($),{pathname:i}=Y(),o=JSON.stringify(U(s,a.v7_relativeSplatPath));return t.useMemo((()=>_(e,JSON.parse(o),i,"path"===r)),[e,o,i,r])}function te(n,r,a,s){G()||u(!1);let{navigator:i}=t.useContext(q),{matches:o}=t.useContext($),l=o[o.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let f,m=Y();if(r){var g;let e="string"===typeof r?d(r):r;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||u(!1),f=e}else f=m;let p=f.pathname||"/",y=p;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=v(n,{pathname:y});let b=ie(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:L([h,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:L([h,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,a,s);return r&&b?t.createElement(z.Provider,{value:{location:F({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},b):b}function ne(){let e=function(){var e;let n=t.useContext(Q),r=ce(le.UseRouteError),a=he(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[a]}(),n=M(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const re=t.createElement(ne,null);class ae extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement($.Provider,{value:this.props.routeContext},t.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:n,match:r,children:a}=e,s=t.useContext(J);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement($.Provider,{value:n},a)}function ie(e,n,r,a){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===a&&(a=null),null==e){var i;if(null==(i=r)||!i.errors)return null;e=r.matches}let o=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,h=-1;if(r&&a&&a.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){c=!0,o=h>=0?o.slice(0,h+1):[o[0]];break}}}return o.reduceRight(((e,a,s)=>{let i,u=!1,f=null,m=null;var d;r&&(i=l&&a.route.id?l[a.route.id]:void 0,f=a.route.errorElement||re,c&&(h<0&&0===s?(d="route-fallback",!1||fe[d]||(fe[d]=!0),u=!0,m=null):h===s&&(u=!0,m=a.route.hydrateFallbackElement||null)));let g=n.concat(o.slice(0,s+1)),p=()=>{let n;return n=i?f:u?m:a.route.Component?t.createElement(a.route.Component,null):a.route.element?a.route.element:e,t.createElement(se,{match:a,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?t.createElement(ae,{location:r.location,revalidation:r.revalidation,component:f,error:i,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()}),null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ue(e){let n=t.useContext(J);return n||u(!1),n}function ce(e){let n=t.useContext(W);return n||u(!1),n}function he(e){let n=function(e){let n=t.useContext($);return n||u(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||u(!1),r.route.id}const fe={};r.startTransition;function me(e){u(!1)}function de(n){let{basename:r="/",children:a=null,location:s,navigationType:i=e.Pop,navigator:o,static:l=!1,future:c}=n;G()&&u(!1);let h=r.replace(/^\/*/,"/"),f=t.useMemo((()=>({basename:h,navigator:o,static:l,future:F({v7_relativeSplatPath:!1},c)})),[h,c,o,l]);"string"===typeof s&&(s=d(s));let{pathname:m="/",search:g="",hash:p="",state:v=null,key:y="default"}=s,w=t.useMemo((()=>{let e=D(m,h);return null==e?null:{location:{pathname:e,search:g,hash:p,state:v,key:y},navigationType:i}}),[h,m,g,p,v,y,i]);return null==w?null:t.createElement(q.Provider,{value:f},t.createElement(z.Provider,{children:a,value:w}))}function ge(e){let{children:t,location:n}=e;return te(pe(t),n)}new Promise((()=>{}));t.Component;function pe(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,a)=>{if(!t.isValidElement(e))return;let s=[...n,a];if(e.type===t.Fragment)return void r.push.apply(r,pe(e.props.children,s));e.type!==me&&u(!1),e.props.index&&e.props.children&&u(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=pe(e.props.children,s)),r.push(i)})),r}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const we=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],be=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Cw){}const Se=t.createContext({isTransitioning:!1});new Map;const ke=r.startTransition;i.flushSync,r.useId;function Ae(e){let{basename:n,children:r,future:a,window:s}=e,i=t.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),g((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return f("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,o)));let l=i.current,[u,c]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=a||{},d=t.useCallback((e=>{h&&ke?ke((()=>c(e))):c(e)}),[c,h]);return t.useLayoutEffect((()=>l.listen(d)),[l,d]),t.createElement(de,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:l,future:a})}const Ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=t.forwardRef((function(e,n){let r,{onClick:a,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:h,preventScrollReset:f,unstable_viewTransition:d}=e,g=ye(e,we),{basename:p}=t.useContext(q),v=!1;if("string"===typeof h&&Ce.test(h)&&(r=h,Ne))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=D(t.pathname,p);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Cw){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;G()||u(!1);let{basename:a,navigator:s}=t.useContext(q),{hash:i,pathname:o,search:l}=ee(e,{relative:r}),c=o;return"/"!==a&&(c="/"===o?a:L([a,o])),s.createHref({pathname:c,search:l,hash:i})}(h,{relative:s}),w=function(e,n){let{target:r,replace:a,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:l}=void 0===n?{}:n,u=Z(),c=Y(),h=ee(e,{relative:o});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==a?a:m(c)===m(h);u(e,{replace:n,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:l})}}),[c,u,h,a,s,r,e,i,o,l])}(h,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,unstable_viewTransition:d});return t.createElement("a",ve({},g,{href:r||y,onClick:v||i?a:function(e){a&&a(e),e.defaultPrevented||w(e)},ref:n,target:c}))}));const Be=t.forwardRef((function(e,n){let{"aria-current":r="page",caseSensitive:a=!1,className:s="",end:i=!1,style:o,to:l,unstable_viewTransition:c,children:h}=e,f=ye(e,be),m=ee(l,{relative:f.relative}),d=Y(),g=t.useContext(W),{navigator:p,basename:v}=t.useContext(q),y=null!=g&&function(e,n){void 0===n&&(n={});let r=t.useContext(Se);null==r&&u(!1);let{basename:a}=Ie(xe.useViewTransitionState),s=ee(e,{relative:n.relative});if(!r.isTransitioning)return!1;let i=D(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=D(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=V(s.pathname,o)||null!=V(s.pathname,i)}(m)&&!0===c,w=p.encodeLocation?p.encodeLocation(m).pathname:m.pathname,b=d.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(b=b.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&v&&(S=D(S,v)||S);const k="/"!==w&&w.endsWith("/")?w.length-1:w.length;let A,N=b===w||!i&&b.startsWith(w)&&"/"===b.charAt(k),C=null!=S&&(S===w||!i&&S.startsWith(w)&&"/"===S.charAt(w.length)),E={isActive:N,isPending:C,isTransitioning:y},B=N?r:void 0;A="function"===typeof s?s(E):[s,N?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let x="function"===typeof o?o(E):o;return t.createElement(Ee,ve({},f,{"aria-current":B,className:A,ref:n,style:x,to:l,unstable_viewTransition:c}),"function"===typeof h?h(E):h)}));var xe,Ve;function Ie(e){let n=t.useContext(J);return n||u(!1),n}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xe||(xe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ve||(Ve={}));var De=n(579);const Pe=()=>(0,De.jsx)("main",{className:"main",children:(0,De.jsx)(Ee,{to:"/certify-portal",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044c \u043d\u0430 \u0433\u043e\u043b\u043e\u0432\u043d\u0443"})});var Oe=n(173),Ue=n.n(Oe);function _e(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(Cw){s(Cw)}}function o(e){try{l(r.throw(e))}catch(Cw){s(Cw)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))}function Le(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(Cw){o=[6,Cw],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}Object.create;function Te(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return i}function Re(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var He=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Me(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=He.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var je=[".DS_Store","Thumbs.db"];function Ke(e){return"object"===typeof e&&null!==e}function Fe(e){return ze(e.target.files).map((function(e){return Me(e)}))}function Je(e){return _e(this,void 0,void 0,(function(){return Le(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return Me(e)}))]}}))}))}function We(e,t){return _e(this,void 0,void 0,(function(){var n;return Le(this,(function(r){switch(r.label){case 0:return e.items?(n=ze(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map($e))]):[3,2];case 1:return[2,qe(Qe(r.sent()))];case 2:return[2,qe(ze(e.files).map((function(e){return Me(e)})))]}}))}))}function qe(e){return e.filter((function(e){return-1===je.indexOf(e.name)}))}function ze(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function $e(e){if("function"!==typeof e.webkitGetAsEntry)return Ge(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Xe(t):Ge(e)}function Qe(e){return e.reduce((function(e,t){return Re(Re([],Te(e),!1),Te(Array.isArray(t)?Qe(t):[t]),!1)}),[])}function Ge(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=Me(t);return Promise.resolve(n)}function Ye(e){return _e(this,void 0,void 0,(function(){return Le(this,(function(t){return[2,e.isDirectory?Xe(e):Ze(e)]}))}))}function Xe(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function a(){var s=this;t.readEntries((function(t){return _e(s,void 0,void 0,(function(){var s,i,o;return Le(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return s=l.sent(),e(s),[3,4];case 3:return i=l.sent(),n(i),[3,4];case 4:return[3,6];case 5:o=Promise.all(t.map(Ye)),r.push(o),a(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function Ze(e){return _e(this,void 0,void 0,(function(){return Le(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=Me(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var et=n(628);function tt(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||it(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,s=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(l){o=!0,a=l}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return s}(e,t)||it(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){if(e){if("string"===typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt="file-invalid-type",ut="file-too-large",ct="file-too-small",ht="too-many-files",ft=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:lt,message:"File type must be ".concat(t)}},mt=function(e){return{code:ut,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},dt=function(e){return{code:ct,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},gt={code:ht,message:"Too many files"};function pt(e,t){var n="application/x-moz-file"===e.type||(0,et.A)(e,t);return[n,n?null:ft(t)]}function vt(e,t,n){if(yt(e.size))if(yt(t)&&yt(n)){if(e.size>n)return[!1,mt(n)];if(e.size<t)return[!1,dt(t)]}else{if(yt(t)&&e.size<t)return[!1,dt(t)];if(yt(n)&&e.size>n)return[!1,mt(n)]}return[!0,null]}function yt(e){return void 0!==e&&null!==e}function wt(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function bt(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function St(e){e.preventDefault()}function kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return!wt(e)&&t&&t.apply(void 0,[e].concat(r)),wt(e)}))}}function At(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Nt(e){return/^.*\.[\w]+$/.test(e)}var Ct=["children"],Et=["open"],Bt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],xt=["refKey","onChange","onClick"];function Vt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Dt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,s=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(l){o=!0,a=l}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return s}(e,t)||Dt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){if(e){if("string"===typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Tt=(0,t.forwardRef)((function(e,n){var r=e.children,a=Mt(Lt(e,Ct)),s=a.open,i=Lt(a,Et);return(0,t.useImperativeHandle)(n,(function(){return{open:s}}),[s]),t.createElement(t.Fragment,null,r(Ut(Ut({},i),{},{open:s})))}));Tt.displayName="Dropzone";var Rt={disabled:!1,getFilesFromEvent:function(e){return _e(this,void 0,void 0,(function(){return Le(this,(function(t){return Ke(e)&&Ke(e.dataTransfer)?[2,We(e.dataTransfer,e.type)]:function(e){return Ke(e)&&Ke(e.target)}(e)?[2,Fe(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,Je(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Tt.defaultProps=Rt,Tt.propTypes={children:Ue().func,accept:Ue().objectOf(Ue().arrayOf(Ue().string)),multiple:Ue().bool,preventDropOnDocument:Ue().bool,noClick:Ue().bool,noKeyboard:Ue().bool,noDrag:Ue().bool,noDragEventsBubbling:Ue().bool,minSize:Ue().number,maxSize:Ue().number,maxFiles:Ue().number,disabled:Ue().bool,getFilesFromEvent:Ue().func,onFileDialogCancel:Ue().func,onFileDialogOpen:Ue().func,useFsAccessApi:Ue().bool,autoFocus:Ue().bool,onDragEnter:Ue().func,onDragLeave:Ue().func,onDragOver:Ue().func,onDrop:Ue().func,onDropAccepted:Ue().func,onDropRejected:Ue().func,onError:Ue().func,validator:Ue().func};var Ht={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Ut(Ut({},Rt),e),r=n.accept,a=n.disabled,s=n.getFilesFromEvent,i=n.maxSize,o=n.minSize,l=n.multiple,u=n.maxFiles,c=n.onDragEnter,h=n.onDragLeave,f=n.onDragOver,m=n.onDrop,d=n.onDropAccepted,g=n.onDropRejected,p=n.onFileDialogCancel,v=n.onFileDialogOpen,y=n.useFsAccessApi,w=n.autoFocus,b=n.preventDropOnDocument,S=n.noClick,k=n.noKeyboard,A=n.noDrag,N=n.noDragEventsBubbling,C=n.onError,E=n.validator,B=(0,t.useMemo)((function(){return function(e){if(yt(e))return Object.entries(e).reduce((function(e,t){var n=st(t,2),r=n[0],a=n[1];return[].concat(tt(e),[r],tt(a))}),[]).filter((function(e){return At(e)||Nt(e)})).join(",")}(r)}),[r]),x=(0,t.useMemo)((function(){return function(e){return yt(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var t=st(e,2),n=t[0],r=t[1],a=!0;return At(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(r)&&r.every(Nt)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),a=!1),a})).reduce((function(e,t){var n=st(t,2),r=n[0],a=n[1];return rt(rt({},e),{},at({},r,a))}),{})}]:e}(r)}),[r]),V=(0,t.useMemo)((function(){return"function"===typeof v?v:Kt}),[v]),I=(0,t.useMemo)((function(){return"function"===typeof p?p:Kt}),[p]),D=(0,t.useRef)(null),P=(0,t.useRef)(null),O=It((0,t.useReducer)(jt,Ht),2),U=O[0],_=O[1],L=U.isFocused,T=U.isFileDialogActive,R=(0,t.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&"showOpenFilePicker"in window),H=function(){!R.current&&T&&setTimeout((function(){P.current&&(P.current.files.length||(_({type:"closeDialog"}),I()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",H,!1),function(){window.removeEventListener("focus",H,!1)}}),[P,T,I,R]);var M=(0,t.useRef)([]),j=function(e){D.current&&D.current.contains(e.target)||(e.preventDefault(),M.current=[])};(0,t.useEffect)((function(){return b&&(document.addEventListener("dragover",St,!1),document.addEventListener("drop",j,!1)),function(){b&&(document.removeEventListener("dragover",St),document.removeEventListener("drop",j))}}),[D,b]),(0,t.useEffect)((function(){return!a&&w&&D.current&&D.current.focus(),function(){}}),[D,w,a]);var K=(0,t.useCallback)((function(e){C?C(e):console.error(e)}),[C]),F=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),M.current=[].concat(Vt(M.current),[e.target]),bt(e)&&Promise.resolve(s(e)).then((function(t){if(!wt(e)||N){var n=t.length,r=n>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize,s=e.multiple,i=e.maxFiles,o=e.validator;return!(!s&&t.length>1||s&&i>=1&&t.length>i)&&t.every((function(e){var t=st(pt(e,n),1)[0],s=st(vt(e,r,a),1)[0],i=o?o(e):null;return t&&s&&!i}))}({files:t,accept:B,minSize:o,maxSize:i,multiple:l,maxFiles:u,validator:E});_({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}})).catch((function(e){return K(e)}))}),[s,c,K,N,B,o,i,l,u,E]),J=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=bt(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&f&&f(e),!1}),[f,N]),W=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=M.current.filter((function(e){return D.current&&D.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),M.current=t,t.length>0||(_({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),bt(e)&&h&&h(e))}),[D,h,N]),q=(0,t.useCallback)((function(e,t){var n=[],r=[];e.forEach((function(e){var t=It(pt(e,B),2),a=t[0],s=t[1],l=It(vt(e,o,i),2),u=l[0],c=l[1],h=E?E(e):null;if(a&&u&&!h)n.push(e);else{var f=[s,c];h&&(f=f.concat(h)),r.push({file:e,errors:f.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&u>=1&&n.length>u)&&(n.forEach((function(e){r.push({file:e,errors:[gt]})})),n.splice(0)),_({acceptedFiles:n,fileRejections:r,type:"setFiles"}),m&&m(n,r,t),r.length>0&&g&&g(r,t),n.length>0&&d&&d(n,t)}),[_,l,B,o,i,u,m,d,g,E]),z=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),M.current=[],bt(e)&&Promise.resolve(s(e)).then((function(t){wt(e)&&!N||q(t,e)})).catch((function(e){return K(e)})),_({type:"reset"})}),[s,q,K,N]),$=(0,t.useCallback)((function(){if(R.current){_({type:"openDialog"}),V();var e={multiple:l,types:x};window.showOpenFilePicker(e).then((function(e){return s(e)})).then((function(e){q(e,null),_({type:"closeDialog"})})).catch((function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(I(e),_({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?K(e):(R.current=!1,P.current?(P.current.value=null,P.current.click()):K(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))}))}else P.current&&(_({type:"openDialog"}),V(),P.current.value=null,P.current.click())}),[_,V,I,y,q,K,x,l]),Q=(0,t.useCallback)((function(e){D.current&&D.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),$()))}),[D,$]),G=(0,t.useCallback)((function(){_({type:"focus"})}),[]),Y=(0,t.useCallback)((function(){_({type:"blur"})}),[]),X=(0,t.useCallback)((function(){S||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?$():setTimeout($,0))}),[S,$]),Z=function(e){return a?null:e},ee=function(e){return k?null:Z(e)},te=function(e){return A?null:Z(e)},ne=function(e){N&&e.stopPropagation()},re=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,s=e.onKeyDown,i=e.onFocus,o=e.onBlur,l=e.onClick,u=e.onDragEnter,c=e.onDragOver,h=e.onDragLeave,f=e.onDrop,m=Lt(e,Bt);return Ut(Ut(_t({onKeyDown:ee(kt(s,Q)),onFocus:ee(kt(i,G)),onBlur:ee(kt(o,Y)),onClick:Z(kt(l,X)),onDragEnter:te(kt(u,F)),onDragOver:te(kt(c,J)),onDragLeave:te(kt(h,W)),onDrop:te(kt(f,z)),role:"string"===typeof r&&""!==r?r:"presentation"},n,D),a||k?{}:{tabIndex:0}),m)}}),[D,Q,G,Y,X,F,J,W,z,k,A,a]),ae=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),se=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,a=e.onClick,s=Lt(e,xt);return Ut(Ut({},_t({accept:B,multiple:l,type:"file",style:{display:"none"},onChange:Z(kt(r,z)),onClick:Z(kt(a,ae)),tabIndex:-1},n,P)),s)}}),[P,r,l,z,a]);return Ut(Ut({},U),{},{isFocused:L&&!a,getRootProps:re,getInputProps:se,rootRef:D,inputRef:P,open:Z($)})}function jt(e,t){switch(t.type){case"focus":return Ut(Ut({},e),{},{isFocused:!0});case"blur":return Ut(Ut({},e),{},{isFocused:!1});case"openDialog":return Ut(Ut({},Ht),{},{isFileDialogActive:!0});case"closeDialog":return Ut(Ut({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ut(Ut({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Ut(Ut({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Ut({},Ht);default:return e}}function Kt(){}var Ft=n(275);function Jt(e,t,n){var r;return e instanceof Object===!1?n:null!==(r=e[t])&&void 0!==r?r:n}function Wt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength-t,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="";for(const s of new Uint8Array(e,t,n)){const e=s.toString(16).toUpperCase();1===e.length&&(a+="0"),a+=e,r&&(a+=" ")}return a.trim()}function qt(e,t){let n=0;if(1===e.length)return e[0];for(let r=e.length-1;r>=0;r--)n+=e[e.length-1-r]*Math.pow(2,t*r);return n}function zt(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;let r=e,a=0,s=Math.pow(2,t);for(let i=1;i<8;i++){if(e<s){let e;if(n<0)e=new ArrayBuffer(i),a=i;else{if(n<i)return new ArrayBuffer(0);e=new ArrayBuffer(n),a=n}const s=new Uint8Array(e);for(let n=i-1;n>=0;n--){const e=Math.pow(2,n*t);s[a-n-1]=Math.floor(r/e),r-=s[a-n-1]*e}return e}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function $t(){let e=0,t=0;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(const o of r)e+=o.byteLength;const s=new ArrayBuffer(e),i=new Uint8Array(s);for(const o of r)i.set(new Uint8Array(o),t),t+=o.byteLength;return s}function Qt(){let e=0,t=0;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(const o of r)e+=o.length;const s=new ArrayBuffer(e),i=new Uint8Array(s);for(const o of r)i.set(o,t),t+=o.length;return i}function Gt(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=255===e[0]&&128&e[1],n=0===e[0]&&0===(128&e[1]);(t||n)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(t);for(let i=0;i<this.valueHex.byteLength;i++)n[i]=0;n[0]=128&e[0];const r=qt(n,8),a=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(a);for(let i=0;i<this.valueHex.byteLength;i++)s[i]=e[i];s[0]&=127;return qt(s,8)-r}function Yt(e,t){if(e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),r=new Uint8Array(t);for(let a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}function Xt(e,t){const n=e.toString(10);if(t<n.length)return"";const r=t-n.length,a=new Array(r);for(let s=0;s<r;s++)a[s]="0";return a.join("").concat(n)}const Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",en="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function tn(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=0,r=0,a=0,s="";const i=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?en:Zt;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){let t=0;for(let n=0;n<e.length;n++)if(0!==e.charCodeAt(n)){t=n;break}e=e.slice(t)}for(;n<e.length;){const o=e.charCodeAt(n++);n>=e.length&&(r=1);const l=e.charCodeAt(n++);n>=e.length&&(a=1);const u=e.charCodeAt(n++),c=o>>2,h=(3&o)<<4|l>>4;let f=(15&l)<<2|u>>6,m=63&u;1===r?f=m=64:1===a&&(m=64),s+=t?64===f?"".concat(i.charAt(c)).concat(i.charAt(h)):64===m?"".concat(i.charAt(c)).concat(i.charAt(h)).concat(i.charAt(f)):"".concat(i.charAt(c)).concat(i.charAt(h)).concat(i.charAt(f)).concat(i.charAt(m)):"".concat(i.charAt(c)).concat(i.charAt(h)).concat(i.charAt(f)).concat(i.charAt(m))}return s}function nn(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?en:Zt;function r(e){for(let t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function a(e){return 64===e?0:e}let s=0,i="";for(;s<e.length;){const t=r(e.charAt(s++)),n=s>=e.length?0:r(e.charAt(s++)),o=s>=e.length?0:r(e.charAt(s++)),l=s>=e.length?0:r(e.charAt(s++)),u=a(t)<<2|a(n)>>4,c=(15&a(n))<<4|a(o)>>2,h=(3&a(o))<<6|a(l);i+=String.fromCharCode(u),64!==o&&(i+=String.fromCharCode(c)),64!==l&&(i+=String.fromCharCode(h))}if(t){let e=-1;for(let t=i.length-1;t>=0;t--)if(0!==i.charCodeAt(t)){e=t;break}i=-1!==e?i.slice(0,e+1):""}return i}function rn(e){let t="";const n=new Uint8Array(e);for(const r of n)t+=String.fromCharCode(r);return t}function an(e){const t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);for(let a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}const sn=Math.log(2);function on(e){const t=Math.log(e)/sn,n=Math.floor(t),r=Math.round(t);return n===r?n:r}function ln(e,t){for(const n of t)delete e[n]}function un(){if("undefined"===typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function cn(e){let t=0,n=0;for(let a=0;a<e.length;a++){t+=e[a].byteLength}const r=new Uint8Array(t);for(let a=0;a<e.length;a++){const t=e[a];r.set(new Uint8Array(t),n),n+=t.byteLength}return r.buffer}function hn(e,t,n,r){return t instanceof Uint8Array?t.byteLength?n<0?(e.error="Wrong parameter: inputOffset less than zero",!1):r<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-n-r<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class fn{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return cn(this.items)}}const mn=[new Uint8Array([1])],dn="0123456789",gn="name",pn="valueHexView",vn="isHexOnly",yn="idBlock",wn="tagClass",bn="tagNumber",Sn="isConstructed",kn="fromBER",An="toBER",Nn="local",Cn="",En=new ArrayBuffer(0),Bn=new Uint8Array(0),xn="EndOfContent",Vn="OCTET STRING",In="BIT STRING";function Dn(e){var t;return t=class extends e{constructor(){var e;super(...arguments);const t=(arguments.length<=0?void 0:arguments[0])||{};this.isHexOnly=null!==(e=t.isHexOnly)&&void 0!==e&&e,this.valueHexView=t.valueHex?Ft._H.toUint8Array(t.valueHex):Bn}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,n){const r=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!hn(this,r,t,n))return-1;const a=t+n;return this.valueHexView=r.subarray(t,a),this.valueHexView.length?(this.blockLength=n,a):(this.warnings.push("Zero buffer length"),t)}toBER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",En)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Ft.U$.ToHex(this.valueHexView)}}},t.NAME="hexBlock",t}class Pn{constructor(){let{blockLength:e=0,error:t=Cn,warnings:n=[],valueBeforeDecode:r=Bn}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=Ft._H.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Ft.U$.ToHex(this.valueBeforeDecodeView)}}}Pn.NAME="baseBlock";class On extends Pn{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}On.NAME="valueBlock";class Un extends(Dn(Pn)){constructor(){let{idBlock:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n,r,a;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?Ft._H.toUint8Array(e.valueHex):Bn,this.tagClass=null!==(n=e.tagClass)&&void 0!==n?n:-1,this.tagNumber=null!==(r=e.tagNumber)&&void 0!==r?r:-1,this.isConstructed=null!==(a=e.isConstructed)&&void 0!==a&&a):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",En}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,n[0]=t}return n.buffer}if(!this.isHexOnly){const n=zt(this.tagNumber,7),r=new Uint8Array(n),a=n.byteLength,s=new Uint8Array(a+1);if(s[0]=31|t,!e){for(let e=0;e<a-1;e++)s[e+1]=128|r[e];s[a]=r[a-1]}return s.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=31|t,!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)n[t+1]=128|e[t];n[this.valueHexView.byteLength]=e[e.length-1]}return n.buffer}fromBER(e,t,n){const r=Ft._H.toUint8Array(e);if(!hn(this,r,t,n))return-1;const a=r.subarray(t,t+n);if(0===a.length)return this.error="Zero buffer length",-1;switch(192&a[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&a[0]),this.isHexOnly=!1;const s=31&a[0];if(31!==s)this.tagNumber=s,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),n=255;for(;128&a[e];){if(t[e-1]=127&a[e],e++,e>=a.length)return this.error="End of input reached before message was fully decoded",-1;if(e===n){n+=255;const e=new Uint8Array(n);for(let n=0;n<t.length;n++)e[n]=t[n];t=this.valueHexView=new Uint8Array(n)}}this.blockLength=e+1,t[e-1]=127&a[e];const r=new Uint8Array(e);for(let a=0;a<e;a++)r[a]=t[a];t=this.valueHexView=new Uint8Array(e),t.set(r),this.blockLength<=9?this.tagNumber=qt(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}Un.NAME="identificationBlock";class _n extends Pn{constructor(){let{lenBlock:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n,r;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(n=e.longFormUsed)&&void 0!==n&&n,this.length=null!==(r=e.length)&&void 0!==r?r:0}fromBER(e,t,n){const r=Ft._H.toUint8Array(e);if(!hn(this,r,t,n))return-1;const a=r.subarray(t,t+n);if(0===a.length)return this.error="Zero buffer length",-1;if(255===a[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===a[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&a[0]),!1===this.longFormUsed)return this.length=a[0],this.blockLength=1,t+this.blockLength;const s=127&a[0];if(s>8)return this.error="Too big integer",-1;if(s+1>a.length)return this.error="End of input reached before message was fully decoded",-1;const i=t+1,o=r.subarray(i,i+s);return 0===o[s-1]&&this.warnings.push("Needlessly long encoded length"),this.length=qt(o,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=s+1,t+this.blockLength}toBER(){let e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===n&&(t=new Uint8Array(e),t[0]=128),e;if(this.longFormUsed){const r=zt(this.length,8);if(r.byteLength>127)return this.error="Too big length",En;if(e=new ArrayBuffer(r.byteLength+1),n)return e;const a=new Uint8Array(r);t=new Uint8Array(e),t[0]=128|r.byteLength;for(let e=0;e<r.byteLength;e++)t[e+1]=a[e];return e}return e=new ArrayBuffer(1),!1===n&&(t=new Uint8Array(e),t[0]=this.length),e}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}_n.NAME="lengthBlock";const Ln={};class Tn extends Pn{constructor(){let{name:e=Cn,optional:t=!1,primitiveSchema:n,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;super(r),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new Un(r),this.lenBlock=new _n(r),this.valueBlock=a?new a(r):new On(r)}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,t){const n=t||new fn;t||Rn(this);const r=this.idBlock.toBER(e);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const r=this.lenBlock.toBER(e);n.write(r),n.write(t)}return t?En:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(){return"ascii"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ascii")?this.onAsciiEncoding():Ft.U$.ToHex(this.toBER())}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(Ft.U$.ToHex(this.valueBlock.valueBeforeDecodeView))}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;return Yt(this.toBER(),e.toBER())}}function Rn(e){if(e instanceof Ln.Constructed)for(const t of e.valueBlock.value)Rn(t)&&(e.lenBlock.isIndefiniteForm=!0);return!!e.lenBlock.isIndefiniteForm}Tn.NAME="BaseBlock";class Hn extends Tn{constructor(){let{value:e=Cn,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t,arguments.length>1?arguments[1]:void 0),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : '").concat(this.valueBlock.value,"'")}}Hn.NAME="BaseStringBlock";class Mn extends(Dn(On)){constructor(){let{isHexOnly:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.isHexOnly=e}}var jn,Kn,Fn,Jn,Wn,qn,zn,$n,Qn,Gn,Yn,Xn,Zn,er,tr,nr,rr,ar,sr,ir,or,lr,ur,cr,hr,fr,mr,dr,gr,pr,vr,yr,wr;Mn.NAME="PrimitiveValueBlock";class br extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Mn),this.idBlock.isConstructed=!1}}function Sr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;const r=t;let a=new Tn({},On);const s=new Pn;if(!hn(s,e,t,n))return a.error=s.error,{offset:-1,result:a};if(!e.subarray(t,t+n).length)return a.error="Zero buffer length",{offset:-1,result:a};let i=a.idBlock.fromBER(e,t,n);if(a.idBlock.warnings.length&&a.warnings.concat(a.idBlock.warnings),-1===i)return a.error=a.idBlock.error,{offset:-1,result:a};if(t=i,n-=a.idBlock.blockLength,i=a.lenBlock.fromBER(e,t,n),a.lenBlock.warnings.length&&a.warnings.concat(a.lenBlock.warnings),-1===i)return a.error=a.lenBlock.error,{offset:-1,result:a};if(t=i,n-=a.lenBlock.blockLength,!a.idBlock.isConstructed&&a.lenBlock.isIndefiniteForm)return a.error="Indefinite length form used for primitive encoding form",{offset:-1,result:a};let o=Tn;if(1===a.idBlock.tagClass){if(a.idBlock.tagNumber>=37&&!1===a.idBlock.isHexOnly)return a.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:a};switch(a.idBlock.tagNumber){case 0:if(a.idBlock.isConstructed&&a.lenBlock.length>0)return a.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:a};o=Ln.EndOfContent;break;case 1:o=Ln.Boolean;break;case 2:o=Ln.Integer;break;case 3:o=Ln.BitString;break;case 4:o=Ln.OctetString;break;case 5:o=Ln.Null;break;case 6:o=Ln.ObjectIdentifier;break;case 10:o=Ln.Enumerated;break;case 12:o=Ln.Utf8String;break;case 13:o=Ln.RelativeObjectIdentifier;break;case 14:o=Ln.TIME;break;case 15:return a.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:a};case 16:o=Ln.Sequence;break;case 17:o=Ln.Set;break;case 18:o=Ln.NumericString;break;case 19:o=Ln.PrintableString;break;case 20:o=Ln.TeletexString;break;case 21:o=Ln.VideotexString;break;case 22:o=Ln.IA5String;break;case 23:o=Ln.UTCTime;break;case 24:o=Ln.GeneralizedTime;break;case 25:o=Ln.GraphicString;break;case 26:o=Ln.VisibleString;break;case 27:o=Ln.GeneralString;break;case 28:o=Ln.UniversalString;break;case 29:o=Ln.CharacterString;break;case 30:o=Ln.BmpString;break;case 31:o=Ln.DATE;break;case 32:o=Ln.TimeOfDay;break;case 33:o=Ln.DateTime;break;case 34:o=Ln.Duration;break;default:{const e=a.idBlock.isConstructed?new Ln.Constructed:new Ln.Primitive;e.idBlock=a.idBlock,e.lenBlock=a.lenBlock,e.warnings=a.warnings,a=e}}}else o=a.idBlock.isConstructed?Ln.Constructed:Ln.Primitive;return a=function(e,t){if(e instanceof t)return e;const n=new t;return n.idBlock=e.idBlock,n.lenBlock=e.lenBlock,n.warnings=e.warnings,n.valueBeforeDecodeView=e.valueBeforeDecodeView,n}(a,o),i=a.fromBER(e,t,a.lenBlock.isIndefiniteForm?n:a.lenBlock.length),a.valueBeforeDecodeView=e.subarray(r,r+a.blockLength),{offset:i,result:a}}function kr(e){if(!e.byteLength){const e=new Tn({},On);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Sr(Ft._H.toUint8Array(e).slice(),0,e.byteLength)}jn=br,Ln.Primitive=jn,br.NAME="PRIMITIVE";class Ar extends On{constructor(){let{value:e=[],isIndefiniteForm:t=!1,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){const r=Ft._H.toUint8Array(e);if(!hn(this,r,t,n))return-1;if(this.valueBeforeDecodeView=r.subarray(t,t+n),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let a=t;for(;s=this.isIndefiniteForm,i=n,(s?1:i)>0;){const e=Sr(r,a,n);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(a=e.offset,this.blockLength+=e.result.blockLength,n-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===xn)break}var s,i;return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===xn?this.value.pop():this.warnings.push("No EndOfContent block encoded")),a}toBER(e,t){const n=t||new fn;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,n);return t?En:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}Ar.NAME="ConstructedValueBlock";class Nr extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Ar),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split("\n").map((e=>"  ".concat(e))).join("\n"));const t=3===this.idBlock.tagClass?"[".concat(this.idBlock.tagNumber,"]"):this.constructor.NAME;return e.length?"".concat(t," :\n").concat(e.join("\n")):"".concat(t," :")}}Kn=Nr,Ln.Constructed=Kn,Nr.NAME="CONSTRUCTED";class Cr extends On{fromBER(e,t,n){return t}toBER(e){return En}}Cr.override="EndOfContentValueBlock";class Er extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Cr),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}Fn=Er,Ln.EndOfContent=Fn,Er.NAME=xn;class Br extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},On),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){const n=new ArrayBuffer(2);if(!e){const e=new Uint8Array(n);e[0]=5,e[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return"".concat(this.constructor.NAME)}}Jn=Br,Ln.Null=Jn,Br.NAME="NULL";class xr extends(Dn(On)){constructor(){let{value:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),t.valueHex?this.valueHexView=Ft._H.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){const r=Ft._H.toUint8Array(e);return hn(this,r,t,n)?(this.valueHexView=r.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,Gt.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}xr.NAME="BooleanValueBlock";class Vr extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},xr),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.getValue)}}Wn=Vr,Ln.Boolean=Wn,Vr.NAME="BOOLEAN";class Ir extends(Dn(Ar)){constructor(){let{isConstructed:e=!1,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.isConstructed=e}fromBER(e,t,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=Ar.prototype.fromBER.call(this,e,t,n),-1===r)return r;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===xn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==Vn)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,t,n),this.blockLength=n;return r}toBER(e,t){return this.isConstructed?Ar.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}Ir.NAME="OctetStringValueBlock";class Dr extends Tn{constructor(){let{idBlock:e={},lenBlock:t={},...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r,a;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(a=n.value)||void 0===a?void 0:a.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},Ir),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const r=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(r.byteLength){const e=Sr(r,0,r.byteLength);-1!==e.offset&&e.offset===n&&(this.valueBlock.value=[e.result])}}catch(Cw){}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Nr.prototype.onAsciiEncoding.call(this):"".concat(this.constructor.NAME," : ").concat(Ft.U$.ToHex(this.valueBlock.valueHexView))}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof Dr&&e.push(t.valueBlock.valueHexView);return Ft._H.concat(e)}}qn=Dr,Ln.OctetString=qn,Dr.NAME=Vn;class Pr extends(Dn(Ar)){constructor(){let{unusedBits:e=0,isConstructed:t=!1,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let r=-1;if(this.isConstructed){if(r=Ar.prototype.fromBER.call(this,e,t,n),-1===r)return r;for(const e of this.value){const t=e.constructor.NAME;if(t===xn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==In)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const n=e.valueBlock;if(this.unusedBits>0&&n.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=n.unusedBits}return r}const a=Ft._H.toUint8Array(e);if(!hn(this,a,t,n))return-1;const s=a.subarray(t,t+n);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const e=s.subarray(1);try{if(e.byteLength){const t=Sr(e,0,e.byteLength);-1!==t.offset&&t.offset===n-1&&(this.value=[t.result])}}catch(Cw){}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,t+n}toBER(e,t){if(this.isConstructed)return Ar.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return En;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Pr.NAME="BitStringValueBlock";class Or extends Tn{constructor(){let{idBlock:e={},lenBlock:t={},...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r,a;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(a=n.value)||void 0===a?void 0:a.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},Pr),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Nr.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const r of t)e.push(r.toString(2).padStart(8,"0"));const n=e.join("");return"".concat(this.constructor.NAME," : ").concat(n.substring(0,n.length-this.valueBlock.unusedBits))}}}function Ur(e,t){const n=new Uint8Array([0]),r=new Uint8Array(e),a=new Uint8Array(t);let s=r.slice(0);const i=s.length-1,o=a.slice(0),l=o.length-1;let u=0;let c=0;for(let h=l<i?i:l;h>=0;h--,c++){if(!0===c<o.length)u=s[i-c]+o[l-c]+n[0];else u=s[i-c]+n[0];if(n[0]=u/10,!0===c>=s.length)s=Qt(new Uint8Array([u%10]),s);else s[i-c]=u%10}return n[0]>0&&(s=Qt(n,s)),s}function _r(e){if(e>=mn.length)for(let t=mn.length;t<=e;t++){const e=new Uint8Array([0]);let n=mn[t-1].slice(0);for(let t=n.length-1;t>=0;t--){const r=new Uint8Array([(n[t]<<1)+e[0]]);e[0]=r[0]/10,n[t]=r[0]%10}e[0]>0&&(n=Qt(e,n)),mn.push(n)}return mn[e]}function Lr(e,t){let n=0;const r=new Uint8Array(e),a=new Uint8Array(t),s=r.slice(0),i=s.length-1,o=a.slice(0),l=o.length-1;let u,c=0;for(let h=l;h>=0;h--,c++)if(u=s[i-c]-o[l-c]-n,!0===u<0)n=1,s[i-c]=u+10;else n=0,s[i-c]=u;if(n>0)for(let h=i-l+1;h>=0;h--,c++){if(u=s[i-c]-n,!(u<0)){n=0,s[i-c]=u;break}n=1,s[i-c]=u+10}return s.slice()}zn=Or,Ln.BitString=zn,Or.NAME=In;class Tr extends(Dn(On)){constructor(){let{value:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=Gt.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(e){const t=e<0?-1*e:e;let n=128;for(let r=1;r<8;r++){if(t<=n){if(e<0){const e=zt(n-t,8,r);return new Uint8Array(e)[0]|=128,e}let a=zt(t,8,r),s=new Uint8Array(a);if(128&s[0]){const e=a.slice(0),t=new Uint8Array(e);a=new ArrayBuffer(a.byteLength+1),s=new Uint8Array(a);for(let n=0;n<e.byteLength;n++)s[n+1]=t[n];s[0]=0}return a}n*=Math.pow(2,8)}return new ArrayBuffer(0)}(e))}get valueDec(){return this._valueDec}fromDER(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a=this.fromBER(e,t,n);if(-1===a)return a;const s=this.valueHexView;return 0===s[0]&&0!==(128&s[1])?this.valueHexView=s.subarray(1):0!==r&&s.length<r&&(r-s.length>1&&(r=s.length+1),this.valueHexView=s.subarray(r-s.length)),a}toDER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.valueHexView;switch(!0){case 0!==(128&t[0]):{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&0===(128&t[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,n){const r=super.fromBER(e,t,n);return-1===r||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=8*this.valueHexView.length-1;let t,n=new Uint8Array(8*this.valueHexView.length/3),r=0;const a=this.valueHexView;let s="",i=!1;for(let o=a.byteLength-1;o>=0;o--){t=a[o];for(let a=0;a<8;a++){if(1===(1&t))if(r===e)n=Lr(_r(r),n),s="-";else n=Ur(n,_r(r));r++,t>>=1}}for(let o=0;o<n.length;o++)n[o]&&(i=!0),i&&(s+=dn.charAt(n[o]));return!1===i&&(s+=dn.charAt(0)),s}}$n=Tr,Tr.NAME="IntegerValueBlock",Object.defineProperty($n.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class Rr extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Tr),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return un(),BigInt(this.valueBlock.toString())}static fromBigInt(e){un();const t=BigInt(e),n=new fn,r=t.toString(16).replace(/^-/,""),a=new Uint8Array(Ft.U$.FromHex(r));if(t<0){const e=new Uint8Array(a.length+(128&a[0]?1:0));e[0]|=128;const r=BigInt("0x".concat(Ft.U$.ToHex(e)))+t,s=Ft._H.toUint8Array(Ft.U$.FromHex(r.toString(16)));s[0]|=128,n.write(s)}else 128&a[0]&&n.write(new Uint8Array([0])),n.write(a);return new Rr({valueHex:n.final()})}convertToDER(){const e=new Rr({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Rr({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString())}}Qn=Rr,Ln.Integer=Qn,Rr.NAME="INTEGER";class Hr extends Rr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}Gn=Hr,Ln.Enumerated=Gn,Hr.NAME="ENUMERATED";class Mr extends(Dn(On)){constructor(){let{valueDec:e=-1,isFirstSid:t=!1,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(n),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,n){if(!n)return t;const r=Ft._H.toUint8Array(e);if(!hn(this,r,t,n))return-1;const a=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let i=0;i<n&&(this.valueHexView[i]=127&a[i],this.blockLength++,0!==(128&a[i]));i++);const s=new Uint8Array(this.blockLength);for(let i=0;i<this.blockLength;i++)s[i]=this.valueHexView[i];return this.valueHexView=s,0!==(128&a[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=qt(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){un();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const n=new Uint8Array(t.length/7);for(let r=0;r<n.length;r++)n[r]=parseInt(t.slice(7*r,7*r+7),2)+(r+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,n=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)n[e]=128|t[e];return n[this.blockLength-1]=t[this.blockLength-1],n.buffer}const t=zt(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",En;const n=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),r=t.byteLength-1;for(let t=0;t<r;t++)n[t]=128|e[t];n[r]=e[r]}return n}toString(){let e="";if(this.isHexOnly)e=Ft.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Mr.NAME="sidBlock";class jr extends On{constructor(){let{value:e=Cn,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const t=new Mr;if(r=t.fromBER(e,r,n),-1===r)return this.blockLength=0,this.error=t.error,r;0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,n-=t.blockLength,this.value.push(t)}return r}toBER(e){const t=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(e);if(0===r.byteLength)return this.error=this.value[n].error,En;t.push(r)}return cn(t)}fromString(e){this.value=[];let t=0,n=0,r="",a=!1;do{if(n=e.indexOf(".",t),r=-1===n?e.substring(t):e.substring(t,n),t=n+1,a){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:return void(this.value=[])}const n=parseInt(r,10);if(isNaN(n))return;e.valueDec=n+t,a=!1}else{const e=new Mr;if(r>Number.MAX_SAFE_INTEGER){un();const t=BigInt(r);e.valueBigInt=t}else if(e.valueDec=parseInt(r,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,a=!0),this.value.push(e)}}while(-1!==n)}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(e="".concat(e,".")),t?(r="{".concat(r,"}"),this.value[n].isFirstSid?e="2.{".concat(r," - 80}"):e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}jr.NAME="ObjectIdentifierValueBlock";class Kr extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},jr),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Yn=Kr,Ln.ObjectIdentifier=Yn,Kr.NAME="OBJECT IDENTIFIER";class Fr extends(Dn(Pn)){constructor(){let{valueDec:e=0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.valueDec=e}fromBER(e,t,n){if(0===n)return t;const r=Ft._H.toUint8Array(e);if(!hn(this,r,t,n))return-1;const a=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let i=0;i<n&&(this.valueHexView[i]=127&a[i],this.blockLength++,0!==(128&a[i]));i++);const s=new Uint8Array(this.blockLength);for(let i=0;i<this.blockLength;i++)s[i]=this.valueHexView[i];return this.valueHexView=s,0!==(128&a[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=qt(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,n=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)n[e]=128|t[e];return n[this.blockLength-1]=t[this.blockLength-1],n.buffer}const t=zt(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",En;const n=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),r=t.byteLength-1;for(let t=0;t<r;t++)n[t]=128|e[t];n[r]=e[r]}return n.buffer}toString(){let e="";return e=this.isHexOnly?Ft.U$.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Fr.NAME="relativeSidBlock";class Jr extends On{constructor(){let{value:e=Cn,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const t=new Fr;if(r=t.fromBER(e,r,n),-1===r)return this.blockLength=0,this.error=t.error,r;this.blockLength+=t.blockLength,n-=t.blockLength,this.value.push(t)}return r}toBER(e,t){const n=[];for(let r=0;r<this.value.length;r++){const t=this.value[r].toBER(e);if(0===t.byteLength)return this.error=this.value[r].error,En;n.push(t)}return cn(n)}fromString(e){this.value=[];let t=0,n=0,r="";do{n=e.indexOf(".",t),r=-1===n?e.substring(t):e.substring(t,n),t=n+1;const a=new Fr;if(a.valueDec=parseInt(r,10),isNaN(a.valueDec))return!0;this.value.push(a)}while(-1!==n);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(e="".concat(e,".")),t?(r="{".concat(r,"}"),e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}Jr.NAME="RelativeObjectIdentifierValueBlock";class Wr extends Tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Jr),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Xn=Wr,Ln.RelativeObjectIdentifier=Xn,Wr.NAME="RelativeObjectIdentifier";class qr extends Nr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}Zn=qr,Ln.Sequence=Zn,qr.NAME="SEQUENCE";class zr extends Nr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}er=zr,Ln.Set=er,zr.NAME="SET";class $r extends(Dn(On)){constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.isHexOnly=!0,this.value=Cn}toJSON(){return{...super.toJSON(),value:this.value}}}$r.NAME="StringValueBlock";class Qr extends $r{}Qr.NAME="SimpleStringValueBlock";class Gr extends Hn{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e,Qr)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Ft._H.toUint8Array(e))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);this.valueBlock.value=e}}Gr.NAME="SIMPLE STRING";class Yr extends Gr{fromBuffer(e){this.valueBlock.valueHexView=Ft._H.toUint8Array(e);try{this.valueBlock.value=Ft.U$.ToUtf8String(e)}catch(t){this.warnings.push('Error during "decodeURIComponent": '.concat(t,", using raw string")),this.valueBlock.value=Ft.U$.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Ft.U$.FromUtf8String(e)),this.valueBlock.value=e}}Yr.NAME="Utf8StringValueBlock";class Xr extends Yr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}tr=Xr,Ln.Utf8String=tr,Xr.NAME="UTF8String";class Zr extends Gr{fromBuffer(e){this.valueBlock.value=Ft.U$.ToUtf16String(e),this.valueBlock.valueHexView=Ft._H.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Ft.U$.FromUtf16String(e))}}Zr.NAME="BmpStringValueBlock";class ea extends Zr{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}nr=ea,Ln.BmpString=nr,ea.NAME="BMPString";class ta extends Gr{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(t);for(let r=0;r<n.length;r+=4)n[r]=n[r+3],n[r+1]=n[r+2],n[r+2]=0,n[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let r=0;r<t;r++){const t=zt(e.charCodeAt(r),8),a=new Uint8Array(t);if(a.length>4)continue;const s=4-a.length;for(let e=a.length-1;e>=0;e--)n[4*r+e+s]=a[e]}this.valueBlock.value=e}}ta.NAME="UniversalStringValueBlock";class na extends ta{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}rr=na,Ln.UniversalString=rr,na.NAME="UniversalString";class ra extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}ar=ra,Ln.NumericString=ar,ra.NAME="NumericString";class aa extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}sr=aa,Ln.PrintableString=sr,aa.NAME="PrintableString";class sa extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}ir=sa,Ln.TeletexString=ir,sa.NAME="TeletexString";class ia extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}or=ia,Ln.VideotexString=or,ia.NAME="VideotexString";class oa extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}lr=oa,Ln.IA5String=lr,oa.NAME="IA5String";class la extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}ur=la,Ln.GraphicString=ur,la.NAME="GraphicString";class ua extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}cr=ua,Ln.VisibleString=cr,ua.NAME="VisibleString";class ca extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}hr=ca,Ln.GeneralString=hr,ca.NAME="GeneralString";class ha extends Gr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}fr=ha,Ln.CharacterString=fr,ha.NAME="CharacterString";class fa extends ua{constructor(){let{value:e,valueDate:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Ft._H.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null===t)return void(this.error="Wrong input string for conversion");const n=parseInt(t[1],10);this.year=n>=50?1900+n:2e3+n,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===e){const e=new Array(7);return e[0]=Xt(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=Xt(this.month,2),e[2]=Xt(this.day,2),e[3]=Xt(this.hour,2),e[4]=Xt(this.minute,2),e[5]=Xt(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.toDate().toISOString())}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}mr=fa,Ln.UTCTime=mr,fa.NAME="UTCTime";class ma extends fa{constructor(){var e;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),null!==(e=this.millisecond)&&void 0!==e||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,n=!1,r="",a="",s=0,i=0,o=0;if("Z"===e[e.length-1])r=e.substring(0,e.length-1),n=!0;else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(n){if(-1!==r.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==r.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let e=1,t=r.indexOf("+"),n="";if(-1===t&&(t=r.indexOf("-"),e=-1),-1!==t){if(n=r.substring(t+1),r=r.substring(0,t),2!==n.length&&4!==n.length)throw new Error("Wrong input string for conversion");let a=parseInt(n.substring(0,2),10);if(isNaN(a.valueOf()))throw new Error("Wrong input string for conversion");if(i=e*a,4===n.length){if(a=parseInt(n.substring(2,4),10),isNaN(a.valueOf()))throw new Error("Wrong input string for conversion");o=e*a}}}let l=r.indexOf(".");if(-1===l&&(l=r.indexOf(",")),-1!==l){const e=new Number("0".concat(r.substring(l)));if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");s=e.valueOf(),a=r.substring(0,l)}else a=r;switch(!0){case 8===a.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==l)throw new Error("Wrong input string for conversion");break;case 10===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==l){let e=60*s;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==l){let e=60*s;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==l){const e=1e3*s;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const u=t.exec(a);if(null===u)throw new Error("Wrong input string for conversion");for(let c=1;c<u.length;c++)switch(c){case 1:this.year=parseInt(u[c],10);break;case 2:this.month=parseInt(u[c],10);break;case 3:this.day=parseInt(u[c],10);break;case 4:this.hour=parseInt(u[c],10)+i;break;case 5:this.minute=parseInt(u[c],10)+o;break;case 6:this.second=parseInt(u[c],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===n){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===e){const e=[];return e.push(Xt(this.year,4)),e.push(Xt(this.month,2)),e.push(Xt(this.day,2)),e.push(Xt(this.hour,2)),e.push(Xt(this.minute,2)),e.push(Xt(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(Xt(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}dr=ma,Ln.GeneralizedTime=dr,ma.NAME="GeneralizedTime";class da extends Xr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}gr=da,Ln.DATE=gr,da.NAME="DATE";class ga extends Xr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}pr=ga,Ln.TimeOfDay=pr,ga.NAME="TimeOfDay";class pa extends Xr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}vr=pa,Ln.DateTime=vr,pa.NAME="DateTime";class va extends Xr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}yr=va,Ln.Duration=yr,va.NAME="Duration";class ya extends Xr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}wr=ya,Ln.TIME=wr,ya.NAME="TIME";class wa{constructor(){let{name:e=Cn,optional:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=e,this.optional=t}}class ba extends wa{constructor(){let{value:e=[],...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=e}}class Sa extends wa{constructor(){let{value:e=new wa,local:t=!1,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(n),this.value=e,this.local=t}}class ka{constructor(){let{data:e=Bn}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dataView=Ft._H.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=Ft._H.toUint8Array(e)}fromBER(e,t,n){const r=t+n;return this.dataView=Ft._H.toUint8Array(e).subarray(t,r),r}toBER(e){return this.dataView.slice().buffer}}function Aa(e,t,n){if(n instanceof ba){for(let r=0;r<n.value.length;r++){if(Aa(e,t,n.value[r]).verified)return{verified:!0,result:e}}{const e={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(gn)&&(e.name=n.name),e}}if(n instanceof wa)return n.hasOwnProperty(gn)&&(e[n.name]=t),{verified:!0,result:e};if(e instanceof Object===!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object===!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(n instanceof Object===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(yn in n===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(kn in n.idBlock===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(An in n.idBlock===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const r=n.idBlock.toBER(!1);if(0===r.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===n.idBlock.fromBER(r,0,r.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===n.idBlock.hasOwnProperty(wn))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===n.idBlock.hasOwnProperty(bn))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===n.idBlock.hasOwnProperty(Sn))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!(vn in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(n.idBlock.isHexOnly){if(pn in n.idBlock===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const r=n.idBlock.valueHexView,a=t.idBlock.valueHexView;if(r.length!==a.length)return{verified:!1,result:e};for(let t=0;t<r.length;t++)if(r[t]!==a[1])return{verified:!1,result:e}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Cn),n.name&&(e[n.name]=t)),n instanceof Ln.Constructed){let r=0,a={verified:!1,result:{error:"Unknown error"}},s=n.valueBlock.value.length;if(s>0&&n.valueBlock.value[0]instanceof Sa&&(s=t.valueBlock.value.length),0===s)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==n.valueBlock.value.length){let t=!0;for(let e=0;e<n.valueBlock.value.length;e++)t=t&&(n.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Cn),n.name&&delete e[n.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let i=0;i<s;i++)if(i-r>=t.valueBlock.value.length){if(!1===n.valueBlock.value[i].optional){const t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Cn),n.name&&(delete e[n.name],t.name=n.name)),t}}else if(n.valueBlock.value[0]instanceof Sa){if(a=Aa(e,t.valueBlock.value[i],n.valueBlock.value[0].value),!1===a.verified){if(!n.valueBlock.value[0].optional)return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Cn),n.name&&delete e[n.name]),a;r++}if(gn in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let r={};r=Nn in n.valueBlock.value[0]&&n.valueBlock.value[0].local?t:e,"undefined"===typeof r[n.valueBlock.value[0].name]&&(r[n.valueBlock.value[0].name]=[]),r[n.valueBlock.value[0].name].push(t.valueBlock.value[i])}}else if(a=Aa(e,t.valueBlock.value[i-r],n.valueBlock.value[i]),!1===a.verified){if(!n.valueBlock.value[i].optional)return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Cn),n.name&&delete e[n.name]),a;r++}if(!1===a.verified){const t={verified:!1,result:e};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Cn),n.name&&(delete e[n.name],t.name=n.name)),t}return{verified:!0,result:e}}if(n.primitiveSchema&&pn in t.valueBlock){const r=Sr(t.valueBlock.valueHexView);if(-1===r.offset){const t={verified:!1,result:r.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Cn),n.name&&(delete e[n.name],t.name=n.name)),t}return Aa(e,r.result,n.primitiveSchema)}return{verified:!0,result:e}}class Na{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&e.length>0){if(this.length=e.length,e.stub)for(let t=0;t<this._view.length;t++)this._view[t]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let n=0;n<t;n++)this.view[n]=e.charCodeAt(n)}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++)n+=String.fromCharCode(this.view[r]);return n}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);const n=new Map;n.set("0",0),n.set("1",1),n.set("2",2),n.set("3",3),n.set("4",4),n.set("5",5),n.set("6",6),n.set("7",7),n.set("8",8),n.set("9",9),n.set("A",10),n.set("a",10),n.set("B",11),n.set("b",11),n.set("C",12),n.set("c",12),n.set("D",13),n.set("d",13),n.set("E",14),n.set("e",14),n.set("F",15),n.set("f",15);let r=0,a=0;for(let s=0;s<t;s++)s%2?(a|=n.get(e.charAt(s)),this.view[r]=a,r++):a=n.get(e.charAt(s))<<4}toHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++){const e=this.view[r].toString(16).toUpperCase();n=n+(1==e.length?"0":"")+e}return n}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length-e;if(!e&&!this.length)return new Na;if(e<0||e>this.length-1)throw new Error("Wrong start position: ".concat(e));return new Na({buffer:this._buffer.slice(e,e+t)})}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(!e&&!this.length)return new Na;if(e<0||e>this.length-1)throw new Error("Wrong start position: ".concat(e));return new Na({buffer:this._buffer.slice(e,t)})}realloc(e){const t=new ArrayBuffer(e),n=new Uint8Array(t);e>this._view.length?n.set(this._view):n.set(new Uint8Array(this._buffer,0,e)),this._buffer=t,this._view=new Uint8Array(this._buffer)}append(e){const t=this.length,n=e.length,r=e._view.subarray();this.realloc(t+n),this._view.set(r,t)}insert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-t;return!(t>this.length-1)&&(n>this.length-t&&(n=this.length-t),n>e.length&&(n=e.length),n==e.length?this._view.set(e._view,t):this._view.set(e._view.subarray(0,n),t),!0)}isEqual(e){if(this.length!=e.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t,n,r){const{start:a,length:s,backward:i}=this.prepareFindParameters(t,n,r),o=e.length;if(o>s)return-1;const l=[];for(let u=0;u<o;u++)l.push(e.view[u]);for(let u=0;u<=s-o;u++){let e=!0;const t=i?a-o-u:a+u;for(let n=0;n<o;n++)if(this.view[n+t]!=l[n]){e=!1;break}if(e)return i?a-o-u:a+o+u}return-1}findFirstIn(e,t,n,r){const{start:a,length:s,backward:i}=this.prepareFindParameters(t,n,r),o={id:-1,position:i?0:a+s,length:0};for(let l=0;l<e.length;l++){const t=this.findPattern(e[l],a,s,i);if(-1!=t){let n=!1;const r=e[l].length;i?t-r>=o.position-o.length&&(n=!0):t-r<=o.position-o.length&&(n=!0),n&&(o.position=t,o.id=l,o.length=r)}}return o}findAllIn(e,t,n){let{start:r,length:a}=this.prepareFindParameters(t,n);const s=[];let i={id:-1,position:r};for(;;){const t=i.position;if(i=this.findFirstIn(e,i.position,a),-1==i.id)break;a-=i.position-t,s.push({id:i.id,position:i.position})}return s}findAllPatternIn(e,t,n){const{start:r,length:a}=this.prepareFindParameters(t,n),s=[],i=e.length;if(i>a)return-1;const o=Array.from(e.view);for(let l=0;l<=a-i;l++){let e=!0;const t=r+l;for(let n=0;n<i;n++)if(this.view[n+t]!=o[n]){e=!1;break}e&&(s.push(r+i+l),l+=i-1)}return s}findFirstNotIn(e,t,n,r){let{start:a,length:s,backward:i}=this.prepareFindParameters(t,n,r);const o={left:{id:-1,position:a},right:{id:-1,position:0},value:new Na};let l=s;for(;l>0;){if(o.right=this.findFirstIn(e,i?a-s+l:a+s-l,l,i),-1==o.right.id){s=l,i?a-=s:a=o.left.position,o.value=new Na({buffer:this._buffer.slice(a,a+s)});break}if(o.right.position!=(i?o.left.position-e[o.right.id].length:o.left.position+e[o.right.id].length)){i?(a=o.right.position+e[o.right.id].length,s=o.left.position-o.right.position-e[o.right.id].length):(a=o.left.position,s=o.right.position-o.left.position-e[o.right.id].length),o.value=new Na({buffer:this._buffer.slice(a,a+s)});break}o.left=o.right,l-=e[o.right.id].length}if(i){const e=o.right;o.right=o.left,o.left=e}return o}findAllNotIn(e,t,n){let{start:r,length:a}=this.prepareFindParameters(t,n);const s=[];let i={left:{id:-1,position:r},right:{id:-1,position:r},value:new Na};do{const t=i.right.position;i=this.findFirstNotIn(e,i.right.position,a),a-=i.right.position-t,s.push({left:{id:i.left.id,position:i.left.position},right:{id:i.right.id,position:i.right.position},value:i.value})}while(-1!=i.right.id);return s}findFirstSequence(e,t,n,r){let{start:a,length:s,backward:i}=this.prepareFindParameters(t,n,r);const o=this.skipNotPatterns(e,a,s,i);if(-1==o)return{position:-1,value:new Na};const l=this.skipPatterns(e,o,s-(i?a-o:o-a),i);i?(a=l,s=o-l):(a=o,s=l-o);return{position:l,value:new Na({buffer:this._buffer.slice(a,a+s)})}}findAllSequences(e,t,n){let{start:r,length:a}=this.prepareFindParameters(t,n);const s=[];let i={position:r,value:new Na};do{const t=i.position;i=this.findFirstSequence(e,i.position,a),-1!=i.position&&(a-=i.position-t,s.push({position:i.position,value:i.value}))}while(-1!=i.position);return s}findPairedPatterns(e,t,n,r){const a=[];if(e.isEqual(t))return a;const{start:s,length:i}=this.prepareFindParameters(n,r);let o=0;const l=this.findAllPatternIn(e,s,i);if(!Array.isArray(l)||0==l.length)return a;const u=this.findAllPatternIn(t,s,i);if(!Array.isArray(u)||0==u.length)return a;for(;o<l.length&&0!=u.length;)if(l[0]!=u[0]){if(l[o]>u[0])break;for(;l[o]<u[0]&&(o++,!(o>=l.length)););a.push({left:l[o-1],right:u[0]}),l.splice(o-1,1),u.splice(0,1),o=0}else a.push({left:l[0],right:u[0]}),l.splice(0,1),u.splice(0,1);return a.sort(((e,t)=>e.left-t.left)),a}findPairedArrays(e,t,n,r){const{start:a,length:s}=this.prepareFindParameters(n,r),i=[];let o=0;const l=this.findAllIn(e,a,s);if(0==l.length)return i;const u=this.findAllIn(t,a,s);if(0==u.length)return i;for(;o<l.length&&0!=u.length;)if(l[0].position!=u[0].position){if(l[o].position>u[0].position)break;for(;l[o].position<u[0].position&&(o++,!(o>=l.length)););i.push({left:l[o-1],right:u[0]}),l.splice(o-1,1),u.splice(0,1),o=0}else i.push({left:l[0],right:u[0]}),l.splice(0,1),u.splice(0,1);return i.sort(((e,t)=>e.left.position-t.left.position)),i}replacePattern(e,t,n,r){let a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=[];const o={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:l,length:u}=this.prepareFindParameters(n,r);if(null==s){if(i=this.findAllIn([e],l,u),0==i.length)return o}else i=s;o.searchPatternPositions.push(...Array.from(i,(e=>e.position)));const c=e.length-t.length,h=new ArrayBuffer(this.view.length-i.length*c),f=new Uint8Array(h);for(f.set(new Uint8Array(this.buffer,0,l)),a=0;a<i.length;a++){const n=0==a?l:i[a-1].position;f.set(new Uint8Array(this.buffer,n,i[a].position-e.length-n),n-a*c),f.set(t.view,i[a].position-e.length-a*c),o.replacePatternPositions.push(i[a].position-e.length-a*c)}return a--,f.set(new Uint8Array(this.buffer,i[a].position,this.length-i[a].position),i[a].position-e.length+t.length-a*c),this.buffer=h,this.view=new Uint8Array(this.buffer),o.status=1,o}skipPatterns(e,t,n,r){const{start:a,length:s,backward:i}=this.prepareFindParameters(t,n,r);let o=a;for(let l=0;l<e.length;l++){const t=e[l].length,n=i?o-t:o;let r=!0;for(let a=0;a<t;a++)if(this.view[a+n]!=e[l].view[a]){r=!1;break}if(r)if(l=-1,i){if(o-=t,o<=0)return o}else if(o+=t,o>=a+s)return o}return o}skipNotPatterns(e,t,n,r){const{start:a,length:s,backward:i}=this.prepareFindParameters(t,n,r);let o=-1;for(let l=0;l<s;l++){for(let t=0;t<e.length;t++){const n=e[t].length,r=i?a-l-n:a+l;let s=!0;for(let a=0;a<n;a++)if(this.view[a+r]!=e[t].view[a]){s=!1;break}if(s){o=i?a-l:a+l;break}}if(-1!=o)break}return o}prepareFindParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null===e&&(e=n?this.length:0),e>this.length&&(e=this.length),n?(null===t&&(t=e),t>e&&(t=e)):(null===t&&(t=this.length-e),t>this.length-e&&(t=this.length-e)),{start:e,length:t,backward:n}}}class Ca{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._stream=new Na,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in e?new Na({view:e.view}):"buffer"in e?new Na({buffer:e.buffer}):"string"in e?new Na({string:e.string}):"hexstring"in e?new Na({hexstring:e.hexstring}):"stream"in e?e.stream.slice():new Na,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);const n=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==n)return n;if(this.backward){if(n<this.start-e.length-t)return-1}else if(n>this.start+e.length+t)return-1;return this.start=n,n}findFirstIn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);const n=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==n.id)return n;if(this.backward){if(n.position<this.start-e[n.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(n.position>this.start+e[n.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=n.position,n}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this._length)&&(t=this._length);const n=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==n.left.id&&-1==n.right.id)return n;if(this.backward){if(-1!=n.right.id&&n.right.position<this._start-e[n.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new Na}}else if(-1!=n.left.id&&n.left.position>this._start+e[n.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new Na};return this.backward?-1==n.left.id?this.start=0:this.start=n.left.position:-1==n.right.id?this.start=this._start+this._length:this.start=n.right.position,n}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==t||t>this._length)&&(t=this._length),(null==n||n>t)&&(n=t);const r=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==r.value.length)return r;if(this.backward){if(r.position<this._start-r.value.length-n)return{position:-1,value:new Na}}else if(r.position>this._start+r.value.length+n)return{position:-1,value:new Na};return this.start=r.position,r}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==n||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,a=this.stream.findPairedPatterns(e,t,r,this.length);if(a.length)if(this.backward){if(a[0].right<this.start-t.length-n)return[]}else if(a[0].left>this.start+e.length+n)return[];return a}findPairedArrays(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==n||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,a=this.stream.findPairedArrays(e,t,r,this.length);if(a.length)if(this.backward){if(a[0].right.position<this.start-t[a[0].right.id].length-n)return[]}else if(a[0].left.position>this.start+e[a[0].left.id].length+n)return[];return a}replacePattern(e,t){const n=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,n,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),n=new Uint8Array(t.buffer);this.stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[2],this._stream.view[this._start+1]=n[1],this._stream.view[this._start+2]=n[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._length<=0)return new Uint8Array(0);if(this._length<e&&(e=this._length),this.backward){const n=this._stream.view.subarray(this._length-e,this._length);t=new Uint8Array(e);for(let r=0;r<e;r++)t[e-1-r]=n[r]}else t=this._stream.view.subarray(this._start,this._start+e);return n&&(this.start+=this.backward?-1*e:e),t}getUint16(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getUint16(e),n=32768;return t&n?-(n-(t^n)):t}getUint24(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getBlock(4,e);return t.length<4?0:16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getUint32(e),n=2147483648;return t&n?-(n-(t^n)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+Ca.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}Ca.APPEND_BLOCK=1e3;const Ea=new ArrayBuffer(0),Ba="";class xa extends TypeError{constructor(){super(...arguments),this.name=xa.NAME}static isType(e,t){if("string"===typeof t){if("Array"===t&&Array.isArray(e))return!0;if("ArrayBuffer"===t&&e instanceof ArrayBuffer)return!0;if("ArrayBufferView"===t&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];for(const i of r)if(this.isType(e,i))return;const s=r.map((e=>e instanceof Function&&"name"in e?e.name:"".concat(e)));throw new xa("Parameter '".concat(t,"' is not of type ").concat(s.length>1?"(".concat(s.join(" or "),")"):s[0]))}}xa.NAME="ArgumentError";class Va extends TypeError{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;super(),this.name=Va.NAME,this.field=e,t&&(this.target=t),this.message=n||"Absent mandatory parameter '".concat(e,"' ").concat(t?" in '".concat(t,"'"):Ba)}static assert(){let e,t,n=null;for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];"string"===typeof a[0]?(n=a[0],e=a[1],t=a.slice(2)):(e=a[0],t=a.slice(1)),xa.assert(e,"parameters","object");for(const i of t){const t=e[i];if(void 0===t||null===t)throw new Va(i,n)}}static assertEmpty(e,t,n){if(void 0===e||null===e)throw new Va(t,n)}}Va.NAME="ParameterError";class Ia extends Error{static assertSchema(e,t){if(!e.verified)throw new Error("Object's schema was not verified against input data for ".concat(t))}static assert(e,t){if(-1===e.offset)throw new Ia("Error during parsing of ASN.1 data. Data is not correct for '".concat(t,"'."))}constructor(e){super(e),this.name="AsnError"}}class Da{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=kr(e);Ia.assert(t,this.name);try{return new this({schema:t.result})}catch(Cw){throw new Ia("Cannot create '".concat(this.CLASS_NAME,"' from ASN.1 object"))}}static defaultValues(e){throw new Error("Invalid member name for ".concat(this.CLASS_NAME," class: ").concat(e))}static schema(){throw new Error("Method '".concat(this.CLASS_NAME,".schema' should be overridden"))}get className(){return this.constructor.CLASS_NAME}toString(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex";try{e=this.toSchema()}catch{e=this.toSchema(!0)}return Ft.U$.ToString(e.toBER(),t)}}function Pa(e){let t=!1,n=Ba;const r=e.trim();for(let a=0;a<r.length;a++)32===r.charCodeAt(a)?!1===t&&(t=!0):(t&&(n+=" ",t=!1),n+=r[a]);return n.toLowerCase()}Da.CLASS_NAME="PkiObject";const Oa="type",Ua="value";class _a extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=Jt(e,Oa,_a.defaultValues(Oa)),this.value=Jt(e,Ua,_a.defaultValues(Ua)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oa:return Ba;case Ua:return{};default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.type||Ba}),new wa({name:e.value||Ba})]})}fromSchema(e){ln(e,[Oa,"typeValue"]);const t=Aa(e,e,_a.schema({names:{type:Oa,value:"typeValue"}}));Ia.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new qr({value:[new Kr({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){const t=[Xr.blockName(),ea.blockName(),na.blockName(),ra.blockName(),aa.blockName(),sa.blockName(),ia.blockName(),oa.blockName(),la.blockName(),ua.blockName(),ca.blockName(),ha.blockName()];if(e instanceof ArrayBuffer)return Ft._H.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===_a.blockName()){if(this.type!==e.type)return!1;const n=[!1,!1],r=this.value.constructor.blockName();for(const a of t)r===a&&(n[0]=!0),e.value.constructor.blockName()===a&&(n[1]=!0);if(n[0]!==n[1])return!1;if(n[0]&&n[1]){const t=Pa(this.value.valueBlock.value),n=Pa(e.value.valueBlock.value);if(0!==t.localeCompare(n))return!1}else if(!Ft._H.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}_a.CLASS_NAME="AttributeTypeAndValue";const La="typesAndValues",Ta="valueBeforeDecode";class Ra extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.typesAndValues=Jt(e,La,Ra.defaultValues(La)),this.valueBeforeDecode=Jt(e,Ta,Ra.defaultValues(Ta)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case La:return[];case Ta:return Ea;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case La:return 0===t.length;case Ta:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.repeatedSequence||Ba,value:new zr({value:[new Sa({name:e.repeatedSet||Ba,value:_a.schema(e.typeAndValue||{})})]})})]})}fromSchema(e){ln(e,["RDN",La]);const t=Aa(e,e,Ra.schema({names:{blockName:"RDN",repeatedSet:La}}));Ia.assertSchema(t,this.className),La in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,(e=>new _a({schema:e})))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(0===this.valueBeforeDecode.byteLength)return new qr({value:[new zr({value:Array.from(this.typesAndValues,(e=>e.toSchema()))})]});const e=kr(this.valueBeforeDecode);if(Ia.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof qr))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,(e=>e.toJSON()))}}isEqual(e){if(e instanceof Ra){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,n]of this.typesAndValues.entries())if(!1===n.isEqual(e.typesAndValues[t]))return!1;return!0}return e instanceof ArrayBuffer&&Yt(this.valueBeforeDecode,e)}}Ra.CLASS_NAME="RelativeDistinguishedNames";const Ha="type",Ma="value";function ja(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({optional:e,value:[new Nr({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:t.country_name||Ba,value:[new ba({value:[new ra,new aa]})]}),new Nr({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:t.administration_domain_name||Ba,value:[new ba({value:[new ra,new aa]})]}),new br({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:t.network_address||Ba,isHexOnly:!0}),new br({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:t.terminal_identifier||Ba,isHexOnly:!0}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:t.private_domain_name||Ba,value:[new ba({value:[new ra,new aa]})]}),new br({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:t.organization_name||Ba,isHexOnly:!0}),new br({optional:!0,name:t.numeric_user_identifier||Ba,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new Nr({optional:!0,name:t.personal_name||Ba,idBlock:{tagClass:3,tagNumber:5},value:[new br({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new br({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new br({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new br({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new Nr({optional:!0,name:t.organizational_unit_names||Ba,idBlock:{tagClass:3,tagNumber:6},value:[new Sa({value:new aa})]})]})}function Ka(){return new qr({optional:arguments.length>0&&void 0!==arguments[0]&&arguments[0],value:[new aa,new aa]})}function Fa(){return new zr({optional:arguments.length>0&&void 0!==arguments[0]&&arguments[0],value:[new br({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new wa]})]})}class Ja extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=Jt(e,Ha,Ja.defaultValues(Ha)),this.value=Jt(e,Ma,Ja.defaultValues(Ma)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ha:return 9;case Ma:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ha:return t===Ja.defaultValues(e);case Ma:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ba({value:[new Nr({idBlock:{tagClass:3,tagNumber:0},name:e.blockName||Ba,value:[new Kr,new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new wa]})]}),new br({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:1}}),new br({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:2}}),new Nr({idBlock:{tagClass:3,tagNumber:3},name:e.blockName||Ba,value:[ja(e.builtInStandardAttributes||{},!1),Ka(!0),Fa(!0)]}),new Nr({idBlock:{tagClass:3,tagNumber:4},name:e.blockName||Ba,value:[Ra.schema(e.directoryName||{})]}),new Nr({idBlock:{tagClass:3,tagNumber:5},name:e.blockName||Ba,value:[new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ba({value:[new sa,new aa,new na,new Xr,new ea]})]}),new Nr({idBlock:{tagClass:3,tagNumber:1},value:[new ba({value:[new sa,new aa,new na,new Xr,new ea]})]})]}),new br({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:6}}),new br({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:7}}),new br({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){ln(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=Aa(e,e,Ja.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(Ia.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:case 3:this.value=t.result.blockName;break;case 1:case 2:case 6:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=22;const n=kr(e.toBER(!1));Ia.assert(n,"GeneralName value"),this.value=n.result.valueBlock.value}break;case 4:this.value=new Ra({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new Dr({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=6;const n=kr(e.toBER(!1));Ia.assert(n,"GeneralName registeredID"),this.value=n.result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new Nr({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new oa({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new Nr({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new Kr({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return Ja.schema()}}toJSON(){const e={type:this.type,value:Ba};if("string"===typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch(t){}return e}}Ja.CLASS_NAME="GeneralName";const Wa="accessMethod",qa="accessLocation",za=[Wa,qa];class $a extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.accessMethod=Jt(e,Wa,$a.defaultValues(Wa)),this.accessLocation=Jt(e,qa,$a.defaultValues(qa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wa:return Ba;case qa:return new Ja;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.accessMethod||Ba}),Ja.schema(e.accessLocation||{})]})}fromSchema(e){ln(e,za);const t=Aa(e,e,$a.schema({names:{accessMethod:Wa,accessLocation:{names:{blockName:qa}}}}));Ia.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new Ja({schema:t.result.accessLocation})}toSchema(){return new qr({value:[new Kr({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}$a.CLASS_NAME="AccessDescription";const Qa="seconds",Ga="millis",Ya="micros";class Xa extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Qa in e&&(this.seconds=Jt(e,Qa,Xa.defaultValues(Qa))),Ga in e&&(this.millis=Jt(e,Ga,Xa.defaultValues(Ga))),Ya in e&&(this.micros=Jt(e,Ya,Xa.defaultValues(Ya))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qa:case Ga:case Ya:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qa:case Ga:case Ya:return t===Xa.defaultValues(e);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,optional:!0,value:[new Rr({optional:!0,name:e.seconds||Ba}),new br({name:e.millis||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new br({name:e.micros||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){ln(e,[Qa,Ga,Ya]);const t=Aa(e,e,Xa.schema({names:{seconds:Qa,millis:Ga,micros:Ya}}));if(Ia.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const e=new Rr({valueHex:t.result.millis.valueBlock.valueHex});this.millis=e.valueBlock.valueDec}if("micros"in t.result){const e=new Rr({valueHex:t.result.micros.valueBlock.valueHex});this.micros=e.valueBlock.valueDec}}toSchema(){const e=[];if(void 0!==this.seconds&&e.push(new Rr({value:this.seconds})),void 0!==this.millis){const t=new Rr({value:this.millis});e.push(new br({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(void 0!==this.micros){const t=new Rr({value:this.micros});e.push(new br({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new qr({value:e})}toJSON(){const e={};return void 0!==this.seconds&&(e.seconds=this.seconds),void 0!==this.millis&&(e.millis=this.millis),void 0!==this.micros&&(e.micros=this.micros),e}}Xa.CLASS_NAME="Accuracy";const Za="algorithmId",es="algorithmParams",ts="algorithm",ns="params",rs=[ts,ns];class as extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.algorithmId=Jt(e,Za,as.defaultValues(Za)),es in e&&(this.algorithmParams=Jt(e,es,as.defaultValues(es))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Za:return Ba;case es:return new wa;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Za:return t===Ba;case es:return t instanceof wa;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,optional:e.optional||!1,value:[new Kr({name:e.algorithmIdentifier||Ba}),new wa({name:e.algorithmParams||Ba,optional:!0})]})}fromSchema(e){ln(e,rs);const t=Aa(e,e,as.schema({names:{algorithmIdentifier:ts,algorithmParams:ns}}));Ia.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),ns in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new Kr({value:this.algorithmId})),!this.algorithmParams||this.algorithmParams instanceof wa||e.push(this.algorithmParams),new qr({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return!this.algorithmParams||this.algorithmParams instanceof wa||(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof as&&(this.algorithmId===e.algorithmId&&(this.algorithmParams?!!e.algorithmParams&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!e.algorithmParams))}}as.CLASS_NAME="AlgorithmIdentifier";const ss="altNames",is=[ss];class os extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.altNames=Jt(e,ss,os.defaultValues(ss)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ss?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.altNames||Ba,value:Ja.schema()})]})}fromSchema(e){ln(e,is);const t=Aa(e,e,os.schema({names:{altNames:ss}}));Ia.assertSchema(t,this.className),ss in t.result&&(this.altNames=Array.from(t.result.altNames,(e=>new Ja({schema:e}))))}toSchema(){return new qr({value:Array.from(this.altNames,(e=>e.toSchema()))})}toJSON(){return{altNames:Array.from(this.altNames,(e=>e.toJSON()))}}}os.CLASS_NAME="AltName";const ls="type",us="values",cs=[ls,us];class hs extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=Jt(e,ls,hs.defaultValues(ls)),this.values=Jt(e,us,hs.defaultValues(us)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ls:return Ba;case us:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ls:return t===Ba;case us:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.type||Ba}),new zr({name:e.setName||Ba,value:[new Sa({name:e.values||Ba,value:new wa})]})]})}fromSchema(e){ln(e,cs);const t=Aa(e,e,hs.schema({names:{type:ls,values:us}}));Ia.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new qr({value:[new Kr({value:this.type}),new zr({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,(e=>e.toJSON()))}}}hs.CLASS_NAME="Attribute";const fs="notBeforeTime",ms="notAfterTime",ds=[fs,ms];class gs extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.notBeforeTime=Jt(e,fs,gs.defaultValues(fs)),this.notAfterTime=Jt(e,ms,gs.defaultValues(ms)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fs:case ms:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new ma({name:e.notBeforeTime||Ba}),new ma({name:e.notAfterTime||Ba})]})}fromSchema(e){ln(e,ds);const t=Aa(e,e,gs.schema({names:{notBeforeTime:fs,notAfterTime:ms}}));Ia.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new qr({value:[new ma({valueDate:this.notBeforeTime}),new ma({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}gs.CLASS_NAME="AttCertValidityPeriod";const ps="names",vs="generalNames";class ys extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.names=Jt(e,ps,ys.defaultValues(ps)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return"names"===e?[]:super.defaultValues(e)}static schema(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ps,{});return new qr({optional:e,name:t.blockName||Ba,value:[new Sa({name:t.generalNames||Ba,value:Ja.schema()})]})}fromSchema(e){ln(e,[ps,vs]);const t=Aa(e,e,ys.schema({names:{blockName:ps,generalNames:vs}}));Ia.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,(e=>new Ja({schema:e})))}toSchema(){return new qr({value:Array.from(this.names,(e=>e.toSchema()))})}toJSON(){return{names:Array.from(this.names,(e=>e.toJSON()))}}}ys.CLASS_NAME="GeneralNames";const ws="2.5.29.17",bs="2.5.29.18",Ss="2.5.29.19",ks="2.5.29.28",As="2.5.29.29",Ns="2.5.29.30",Cs="2.5.29.31",Es="2.5.29.46",Bs="2.5.29.32",xs="2.5.29.32.0",Vs="2.5.29.33",Is="2.5.29.35",Ds="2.5.29.36",Ps="1.3.6.1.5.5.7.1.1",Os="1.3.6.1.4.1.11129.2.4.2",Us="1.2.840.113549.1.7.1",_s="1.2.840.113549.1.7.2",Ls="1.2.840.113549.1.7.3",Ts="1.2.840.113549.1.7.6",Rs="1.2.840.113549.1.9.22.1",Hs="1.2.840.113549.1.9.22.3",Ms="1.2.840.113549.1.9.23.1",js="".concat("1.3.6.1.5.5.7",".48"),Ks="".concat(js,".1.1"),Fs=("".concat(js,".2"),"".concat(js,".1"),"keyIdentifier"),Js="authorityCertIssuer",Ws="authorityCertSerialNumber",qs=[Fs,Js,Ws];class zs extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Fs in e&&(this.keyIdentifier=Jt(e,Fs,zs.defaultValues(Fs))),Js in e&&(this.authorityCertIssuer=Jt(e,Js,zs.defaultValues(Js))),Ws in e&&(this.authorityCertSerialNumber=Jt(e,Ws,zs.defaultValues(Ws))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fs:return new Dr;case Js:return[];case Ws:return new Rr;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new br({name:e.keyIdentifier||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Sa({name:e.authorityCertIssuer||Ba,value:Ja.schema()})]}),new br({name:e.authorityCertSerialNumber||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){ln(e,qs);const t=Aa(e,e,zs.schema({names:{keyIdentifier:Fs,authorityCertIssuer:Js,authorityCertSerialNumber:Ws}}));Ia.assertSchema(t,this.className),Fs in t.result&&(this.keyIdentifier=new Dr({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),Js in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,(e=>new Ja({schema:e})))),Ws in t.result&&(this.authorityCertSerialNumber=new Rr({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new br({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,(e=>e.toSchema()))})),this.authorityCertSerialNumber&&e.push(new br({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new qr({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,(e=>e.toJSON()))),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}zs.CLASS_NAME="AuthorityKeyIdentifier";const $s="pathLenConstraint",Qs="cA";class Gs extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.cA=Jt(e,Qs,!1),$s in e&&(this.pathLenConstraint=Jt(e,$s,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e!==Qs&&super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Vr({optional:!0,name:e.cA||Ba}),new Rr({optional:!0,name:e.pathLenConstraint||Ba})]})}fromSchema(e){ln(e,[Qs,$s]);const t=Aa(e,e,Gs.schema({names:{cA:Qs,pathLenConstraint:$s}}));Ia.assertSchema(t,this.className),Qs in t.result&&(this.cA=t.result.cA.valueBlock.value),$s in t.result&&(t.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=t.result.pathLenConstraint:this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==Gs.defaultValues(Qs)&&e.push(new Vr({value:this.cA})),$s in this&&(this.pathLenConstraint instanceof Rr?e.push(this.pathLenConstraint):e.push(new Rr({value:this.pathLenConstraint}))),new qr({value:e})}toJSON(){const e={};return this.cA!==Gs.defaultValues(Qs)&&(e.cA=this.cA),$s in this&&(this.pathLenConstraint instanceof Rr?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}Gs.CLASS_NAME="BasicConstraints";const Ys="certificateIndex",Xs="keyIndex";class Zs extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certificateIndex=Jt(e,Ys,Zs.defaultValues(Ys)),this.keyIndex=Jt(e,Xs,Zs.defaultValues(Xs)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ys:case Xs:return 0;default:return super.defaultValues(e)}}static schema(){return new Rr}fromSchema(e){if(e.constructor.blockName()!==Rr.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const n=new Uint8Array(t);switch(!0){case t.byteLength<4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(n,4-t.byteLength),t=e.slice(0)}break;case t.byteLength>4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(n.slice(0,4)),t=e.slice(0)}}const r=t.slice(0,2),a=new Uint8Array(r);let s=a[0];a[0]=a[1],a[1]=s;const i=new Uint16Array(r);this.keyIndex=i[0];const o=t.slice(2),l=new Uint8Array(o);s=l[0],l[0]=l[1],l[1]=s;const u=new Uint16Array(o);this.certificateIndex=u[0]}toSchema(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;const t=new Uint8Array(e);let n=t[0];t[0]=t[1],t[1]=n;const r=new ArrayBuffer(2);new Uint16Array(r)[0]=this.keyIndex;const a=new Uint8Array(r);return n=a[0],a[0]=a[1],a[1]=n,new Rr({valueHex:$t(r,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}Zs.CLASS_NAME="CAVersion";const ei="policyQualifierId",ti="qualifier",ni=[ei,ti];class ri extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.policyQualifierId=Jt(e,ei,ri.defaultValues(ei)),this.qualifier=Jt(e,ti,ri.defaultValues(ti)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ei:return Ba;case ti:return new wa;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.policyQualifierId||Ba}),new wa({name:e.qualifier||Ba})]})}fromSchema(e){ln(e,ni);const t=Aa(e,e,ri.schema({names:{policyQualifierId:ei,qualifier:ti}}));Ia.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new qr({value:[new Kr({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}ri.CLASS_NAME="PolicyQualifierInfo";const ai="policyIdentifier",si="policyQualifiers",ii=[ai,si];class oi extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.policyIdentifier=Jt(e,ai,oi.defaultValues(ai)),si in e&&(this.policyQualifiers=Jt(e,si,oi.defaultValues(si))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ai:return Ba;case si:return[];default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.policyIdentifier||Ba}),new qr({optional:!0,value:[new Sa({name:e.policyQualifiers||Ba,value:ri.schema()})]})]})}fromSchema(e){ln(e,ii);const t=Aa(e,e,oi.schema({names:{policyIdentifier:ai,policyQualifiers:si}}));Ia.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),si in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,(e=>new ri({schema:e}))))}toSchema(){const e=[];return e.push(new Kr({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new qr({value:Array.from(this.policyQualifiers,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,(e=>e.toJSON()))),e}}oi.CLASS_NAME="PolicyInformation";const li="certificatePolicies",ui=[li];class ci extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certificatePolicies=Jt(e,li,ci.defaultValues(li)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===li?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.certificatePolicies||Ba,value:oi.schema()})]})}fromSchema(e){ln(e,ui);const t=Aa(e,e,ci.schema({names:{certificatePolicies:li}}));Ia.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,(e=>new oi({schema:e})))}toSchema(){return new qr({value:Array.from(this.certificatePolicies,(e=>e.toSchema()))})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,(e=>e.toJSON()))}}}ci.CLASS_NAME="CertificatePolicies";const hi="templateID",fi="templateMajorVersion",mi="templateMinorVersion",di=[hi,fi,mi];class gi extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.templateID=Jt(e,hi,gi.defaultValues(hi)),fi in e&&(this.templateMajorVersion=Jt(e,fi,gi.defaultValues(fi))),mi in e&&(this.templateMinorVersion=Jt(e,mi,gi.defaultValues(mi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hi:return Ba;case fi:case mi:return 0;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.templateID||Ba}),new Rr({name:e.templateMajorVersion||Ba,optional:!0}),new Rr({name:e.templateMinorVersion||Ba,optional:!0})]})}fromSchema(e){ln(e,di);const t=Aa(e,e,gi.schema({names:{templateID:hi,templateMajorVersion:fi,templateMinorVersion:mi}}));Ia.assertSchema(t,this.className),this.templateID=t.result.templateID.valueBlock.toString(),fi in t.result&&(this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec),mi in t.result&&(this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new Kr({value:this.templateID})),fi in this&&e.push(new Rr({value:this.templateMajorVersion})),mi in this&&e.push(new Rr({value:this.templateMinorVersion})),new qr({value:e})}toJSON(){const e={templateID:this.templateID};return fi in this&&(e.templateMajorVersion=this.templateMajorVersion),mi in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}const pi="distributionPoint",vi="distributionPointNames",yi="reasons",wi="cRLIssuer",bi="cRLIssuerNames",Si=[pi,vi,yi,wi,bi];class ki extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),pi in e&&(this.distributionPoint=Jt(e,pi,ki.defaultValues(pi))),yi in e&&(this.reasons=Jt(e,yi,ki.defaultValues(yi))),wi in e&&(this.cRLIssuer=Jt(e,wi,ki.defaultValues(wi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pi:return[];case yi:return new Or;case wi:return[];default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ba({value:[new Nr({name:e.distributionPoint||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Sa({name:e.distributionPointNames||Ba,value:Ja.schema()})]}),new Nr({name:e.distributionPoint||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Ra.schema().valueBlock.value})]})]}),new br({name:e.reasons||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Nr({name:e.cRLIssuer||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new Sa({name:e.cRLIssuerNames||Ba,value:Ja.schema()})]})]})}fromSchema(e){ln(e,Si);const t=Aa(e,e,ki.schema({names:{distributionPoint:pi,distributionPointNames:vi,reasons:yi,cRLIssuer:wi,cRLIssuerNames:bi}}));Ia.assertSchema(t,this.className),pi in t.result&&(0===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new Ja({schema:e})))),1===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new Ra({schema:new qr({value:t.result.distributionPoint.valueBlock.value})}))),yi in t.result&&(this.reasons=new Or({valueHex:t.result.reasons.valueBlock.valueHex})),wi in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,(e=>new Ja({schema:e}))))}toSchema(){const e=[];if(this.distributionPoint){let t;t=this.distributionPoint instanceof Array?new Nr({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))}):new Nr({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new br({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON())):e.distributionPoint=this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,(e=>e.toJSON()))),e}}ki.CLASS_NAME="DistributionPoint";const Ai="distributionPoints",Ni=[Ai];class Ci extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.distributionPoints=Jt(e,Ai,Ci.defaultValues(Ai)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ai?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.distributionPoints||Ba,value:ki.schema()})]})}fromSchema(e){ln(e,Ni);const t=Aa(e,e,Ci.schema({names:{distributionPoints:Ai}}));Ia.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,(e=>new ki({schema:e})))}toSchema(){return new qr({value:Array.from(this.distributionPoints,(e=>e.toSchema()))})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,(e=>e.toJSON()))}}}Ci.CLASS_NAME="CRLDistributionPoints";const Ei="keyPurposes",Bi=[Ei];class xi extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyPurposes=Jt(e,Ei,xi.defaultValues(Ei)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ei?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.keyPurposes||Ba,value:new Kr})]})}fromSchema(e){ln(e,Bi);const t=Aa(e,e,xi.schema({names:{keyPurposes:Ei}}));Ia.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,(e=>e.valueBlock.toString()))}toSchema(){return new qr({value:Array.from(this.keyPurposes,(e=>new Kr({value:e})))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}xi.CLASS_NAME="ExtKeyUsage";const Vi="accessDescriptions";class Ii extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.accessDescriptions=Jt(e,Vi,Ii.defaultValues(Vi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Vi?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.accessDescriptions||Ba,value:$a.schema()})]})}fromSchema(e){ln(e,[Vi]);const t=Aa(e,e,Ii.schema({names:{accessDescriptions:Vi}}));Ia.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,(e=>new $a({schema:e})))}toSchema(){return new qr({value:Array.from(this.accessDescriptions,(e=>e.toSchema()))})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,(e=>e.toJSON()))}}}Ii.CLASS_NAME="InfoAccess";const Di="distributionPoint",Pi="distributionPointNames",Oi="onlyContainsUserCerts",Ui="onlyContainsCACerts",_i="onlySomeReasons",Li="indirectCRL",Ti="onlyContainsAttributeCerts",Ri=[Di,Pi,Oi,Ui,_i,Li,Ti];class Hi extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Di in e&&(this.distributionPoint=Jt(e,Di,Hi.defaultValues(Di))),this.onlyContainsUserCerts=Jt(e,Oi,Hi.defaultValues(Oi)),this.onlyContainsCACerts=Jt(e,Ui,Hi.defaultValues(Ui)),_i in e&&(this.onlySomeReasons=Jt(e,_i,Hi.defaultValues(_i))),this.indirectCRL=Jt(e,Li,Hi.defaultValues(Li)),this.onlyContainsAttributeCerts=Jt(e,Ti,Hi.defaultValues(Ti)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Di:return[];case Oi:case Ui:return!1;case _i:return 0;case Li:case Ti:return!1;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ba({value:[new Nr({name:e.distributionPoint||Ba,idBlock:{tagClass:3,tagNumber:0},value:[new Sa({name:e.distributionPointNames||Ba,value:Ja.schema()})]}),new Nr({name:e.distributionPoint||Ba,idBlock:{tagClass:3,tagNumber:1},value:Ra.schema().valueBlock.value})]})]}),new br({name:e.onlyContainsUserCerts||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new br({name:e.onlyContainsCACerts||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new br({name:e.onlySomeReasons||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new br({name:e.indirectCRL||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new br({name:e.onlyContainsAttributeCerts||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){ln(e,Ri);const t=Aa(e,e,Hi.schema({names:{distributionPoint:Di,distributionPointNames:Pi,onlyContainsUserCerts:Oi,onlyContainsCACerts:Ui,onlySomeReasons:_i,indirectCRL:Li,onlyContainsAttributeCerts:Ti}}));if(Ia.assertSchema(t,this.className),Di in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new Ja({schema:e})));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new Ra({schema:new qr({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(Oi in t.result){const e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==e[0]}if(Ui in t.result){const e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==e[0]}if(_i in t.result){const e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=e[0]}if(Li in t.result){const e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==e[0]}if(Ti in t.result){const e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==e[0]}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new Nr({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==Hi.defaultValues(Oi)&&e.push(new br({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==Hi.defaultValues(Ui)&&e.push(new br({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),void 0!==this.onlySomeReasons){const t=new ArrayBuffer(1);new Uint8Array(t)[0]=this.onlySomeReasons,e.push(new br({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==Hi.defaultValues(Li)&&e.push(new br({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==Hi.defaultValues(Ti)&&e.push(new br({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new qr({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON())):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==Hi.defaultValues(Oi)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==Hi.defaultValues(Ui)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),_i in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==Hi.defaultValues(Li)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==Hi.defaultValues(Ti)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}Hi.CLASS_NAME="IssuingDistributionPoint";const Mi="base",ji="minimum",Ki="maximum",Fi=[Mi,ji,Ki];class Ji extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.base=Jt(e,Mi,Ji.defaultValues(Mi)),this.minimum=Jt(e,ji,Ji.defaultValues(ji)),Ki in e&&(this.maximum=Jt(e,Ki,Ji.defaultValues(Ki))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mi:return new Ja;case ji:case Ki:return 0;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[Ja.schema(e.base||{}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Rr({name:e.minimum||Ba})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Rr({name:e.maximum||Ba})]})]})}fromSchema(e){ln(e,Fi);const t=Aa(e,e,Ji.schema({names:{base:{names:{blockName:Mi}},minimum:ji,maximum:Ki}}));Ia.assertSchema(t,this.className),this.base=new Ja({schema:t.result.base}),ji in t.result&&(t.result.minimum.valueBlock.isHexOnly?this.minimum=t.result.minimum:this.minimum=t.result.minimum.valueBlock.valueDec),Ki in t.result&&(t.result.maximum.valueBlock.isHexOnly?this.maximum=t.result.maximum:this.maximum=t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof Rr?this.minimum:new Rr({value:this.minimum}),e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Ki in this){let t=0;t=this.maximum instanceof Rr?this.maximum:new Rr({value:this.maximum}),e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new qr({value:e})}toJSON(){const e={base:this.base.toJSON()};return 0!==this.minimum&&("number"===typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),void 0!==this.maximum&&("number"===typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}Ji.CLASS_NAME="GeneralSubtree";const Wi="permittedSubtrees",qi="excludedSubtrees",zi=[Wi,qi];class $i extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Wi in e&&(this.permittedSubtrees=Jt(e,Wi,$i.defaultValues(Wi))),qi in e&&(this.excludedSubtrees=Jt(e,qi,$i.defaultValues(qi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wi:case qi:return[];default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Sa({name:e.permittedSubtrees||Ba,value:Ji.schema()})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Sa({name:e.excludedSubtrees||Ba,value:Ji.schema()})]})]})}fromSchema(e){ln(e,zi);const t=Aa(e,e,$i.schema({names:{permittedSubtrees:Wi,excludedSubtrees:qi}}));Ia.assertSchema(t,this.className),Wi in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,(e=>new Ji({schema:e})))),qi in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,(e=>new Ji({schema:e}))))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,(e=>e.toSchema()))})),this.excludedSubtrees&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,(e=>e.toJSON()))),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,(e=>e.toJSON()))),e}}$i.CLASS_NAME="NameConstraints";const Qi="requireExplicitPolicy",Gi="inhibitPolicyMapping",Yi=[Qi,Gi];class Xi extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Qi in e&&(this.requireExplicitPolicy=Jt(e,Qi,Xi.defaultValues(Qi))),Gi in e&&(this.inhibitPolicyMapping=Jt(e,Gi,Xi.defaultValues(Gi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qi:case Gi:return 0;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new br({name:e.requireExplicitPolicy||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new br({name:e.inhibitPolicyMapping||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){ln(e,Yi);const t=Aa(e,e,Xi.schema({names:{requireExplicitPolicy:Qi,inhibitPolicyMapping:Gi}}));if(Ia.assertSchema(t,this.className),Qi in t.result){const e=t.result.requireExplicitPolicy;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const n=kr(e.toBER(!1));Ia.assert(n,"Integer"),this.requireExplicitPolicy=n.result.valueBlock.valueDec}if(Gi in t.result){const e=t.result.inhibitPolicyMapping;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const n=kr(e.toBER(!1));Ia.assert(n,"Integer"),this.inhibitPolicyMapping=n.result.valueBlock.valueDec}}toSchema(){const e=[];if(Qi in this){const t=new Rr({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(Gi in this){const t=new Rr({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new qr({value:e})}toJSON(){const e={};return Qi in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),Gi in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}Xi.CLASS_NAME="PolicyConstraints";const Zi="issuerDomainPolicy",eo="subjectDomainPolicy",to=[Zi,eo];class no extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.issuerDomainPolicy=Jt(e,Zi,no.defaultValues(Zi)),this.subjectDomainPolicy=Jt(e,eo,no.defaultValues(eo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zi:case eo:return Ba;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.issuerDomainPolicy||Ba}),new Kr({name:e.subjectDomainPolicy||Ba})]})}fromSchema(e){ln(e,to);const t=Aa(e,e,no.schema({names:{issuerDomainPolicy:Zi,subjectDomainPolicy:eo}}));Ia.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new qr({value:[new Kr({value:this.issuerDomainPolicy}),new Kr({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}no.CLASS_NAME="PolicyMapping";const ro="mappings",ao=[ro];class so extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.mappings=Jt(e,ro,so.defaultValues(ro)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ro?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.mappings||Ba,value:no.schema()})]})}fromSchema(e){ln(e,ao);const t=Aa(e,e,so.schema({names:{mappings:ro}}));Ia.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,(e=>new no({schema:e})))}toSchema(){return new qr({value:Array.from(this.mappings,(e=>e.toSchema()))})}toJSON(){return{mappings:Array.from(this.mappings,(e=>e.toJSON()))}}}so.CLASS_NAME="PolicyMappings";const io="notBefore",oo="notAfter",lo=[io,oo];class uo extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),io in e&&(this.notBefore=Jt(e,io,uo.defaultValues(io))),oo in e&&(this.notAfter=Jt(e,oo,uo.defaultValues(oo))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case io:case oo:return new Date;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new br({name:e.notBefore||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new br({name:e.notAfter||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){ln(e,lo);const t=Aa(e,e,uo.schema({names:{notBefore:io,notAfter:oo}}));if(Ia.assertSchema(t,this.className),io in t.result){const e=new ma;e.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=e.toDate()}if(oo in t.result){const e=new ma({valueHex:t.result.notAfter.valueBlock.valueHex});e.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=e.toDate()}}toSchema(){const e=[];return io in this&&e.push(new br({idBlock:{tagClass:3,tagNumber:0},valueHex:new ma({valueDate:this.notBefore}).valueBlock.valueHexView})),oo in this&&e.push(new br({idBlock:{tagClass:3,tagNumber:1},valueHex:new ma({valueDate:this.notAfter}).valueBlock.valueHexView})),new qr({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}uo.CLASS_NAME="PrivateKeyUsagePeriod";const co="id",ho="type",fo="values",mo=[co,ho],go=[fo];class po extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.id=Jt(e,co,po.defaultValues(co)),ho in e&&(this.type=Jt(e,ho,po.defaultValues(ho))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case co:return Ba;case ho:return new Br;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case co:return t===Ba;case ho:return t instanceof Br;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.id||Ba}),new wa({name:e.type||Ba,optional:!0})]})}fromSchema(e){ln(e,mo);const t=Aa(e,e,po.schema({names:{id:co,type:ho}}));Ia.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),ho in t.result&&(this.type=t.result.type)}toSchema(){const e=[new Kr({value:this.id})];return ho in this&&e.push(this.type),new qr({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}po.CLASS_NAME="QCStatement";class vo extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.values=Jt(e,fo,vo.defaultValues(fo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===fo?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===fo?0===t.length:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.values||Ba,value:po.schema(e.value||{})})]})}fromSchema(e){ln(e,go);const t=Aa(e,e,vo.schema({names:{values:fo}}));Ia.assertSchema(t,this.className),this.values=Array.from(t.result.values,(e=>new po({schema:e})))}toSchema(){return new qr({value:Array.from(this.values,(e=>e.toSchema()))})}toJSON(){return{values:Array.from(this.values,(e=>e.toJSON()))}}}var yo;vo.CLASS_NAME="QCStatements";class wo{static register(e,t,n){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:n}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}yo=wo,wo.namedCurves={},yo.register("P-256","1.2.840.10045.3.1.7",32),yo.register("P-384","1.3.132.0.34",48),yo.register("P-521","1.3.132.0.35",66),yo.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),yo.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),yo.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const bo="x",So="y",ko="namedCurve";class Ao extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.x=Jt(e,bo,Ao.defaultValues(bo)),this.y=Jt(e,So,Ao.defaultValues(So)),this.namedCurve=Jt(e,ko,Ao.defaultValues(ko)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bo:case So:return Ea;case ko:return Ba;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case bo:case So:return t instanceof ArrayBuffer&&Yt(t,Ao.defaultValues(e));case ko:return"string"===typeof t&&t===Ao.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new ka}fromSchema(e){const t=Ft._H.toUint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const n=wo.find(this.namedCurve);if(!n)throw new Error("Incorrect curve OID: ".concat(this.namedCurve));const r=n.size;if(t.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=n.name,this.x=t.slice(1,r+1).buffer,this.y=t.slice(1+r,2*r+1).buffer}toSchema(){return new ka({data:$t(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=wo.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:tn(rn(this.x),!0,!0,!1),y:tn(rn(this.y),!0,!0,!1)}}fromJSON(e){Va.assert("json",e,"crv","x","y");let t=0;const n=wo.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=an(nn(e.x,!0));if(r.byteLength<t){this.x=new ArrayBuffer(t);const e=new Uint8Array(this.x),n=new Uint8Array(r);e.set(n,1)}else this.x=r.slice(0,t);const a=an(nn(e.y,!0));if(a.byteLength<t){this.y=new ArrayBuffer(t);const e=new Uint8Array(this.y),n=new Uint8Array(a);e.set(n,1)}else this.y=a.slice(0,t)}}Ao.CLASS_NAME="ECPublicKey";const No="modulus",Co="publicExponent",Eo=[No,Co];class Bo extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.modulus=Jt(e,No,Bo.defaultValues(No)),this.publicExponent=Jt(e,Co,Bo.defaultValues(Co)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case No:case Co:return new Rr;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.modulus||Ba}),new Rr({name:e.publicExponent||Ba})]})}fromSchema(e){ln(e,Eo);const t=Aa(e,e,Bo.schema({names:{modulus:No,publicExponent:Co}}));Ia.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new qr({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:Ft.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Ft.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){Va.assert("json",e,"n","e");const t=an(nn(e.n,!0));this.modulus=new Rr({valueHex:t.slice(0,Math.pow(2,on(t.byteLength)))}),this.publicExponent=new Rr({valueHex:an(nn(e.e,!0)).slice(0,3)})}}Bo.CLASS_NAME="RSAPublicKey";const xo="algorithm",Vo="subjectPublicKey",Io=[xo,Vo];class Do extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.algorithm=Jt(e,xo,Do.defaultValues(xo)),this.subjectPublicKey=Jt(e,Vo,Do.defaultValues(Vo));const t=Jt(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}get parsedKey(){if(void 0===this._parsedKey){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===Kr.blockName())try{this._parsedKey=new Ao({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch(e){}break;case"1.2.840.113549.1.1.1":{const t=kr(this.subjectPublicKey.valueBlock.valueHexView);if(-1!==t.offset)try{this._parsedKey=new Bo({schema:t.result})}catch(e){}}}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case xo:return new as;case Vo:return new Or;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.algorithm||{}),new Or({name:e.subjectPublicKey||Ba})]})}fromSchema(e){ln(e,Io);const t=Aa(e,e,Do.schema({names:{algorithm:{names:{blockName:xo}},subjectPublicKey:Vo}}));Ia.assertSchema(t,this.className),this.algorithm=new as({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new qr({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Ao({json:e}),this.algorithm=new as({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Kr({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new Bo({json:e}),this.algorithm=new as({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Br});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.subjectPublicKey=new Or({valueHex:this.parsedKey.toSchema().toBER(!1)})}}async importKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);try{if(!e)throw new Error("Need to provide publicKey input parameter");const r=kr(await t.exportKey("spki",e));try{this.fromSchema(r.result)}catch(n){throw new Error("Error during initializing object from schema")}}catch(Cw){const t=Cw instanceof Error?Cw.message:"".concat(Cw);throw new Error("Error during exporting public key: ".concat(t))}}}Do.CLASS_NAME="PublicKeyInfo";const Po="version",Oo="privateKey",Uo="namedCurve",_o="publicKey",Lo=[Po,Oo,Uo,_o];class To extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Po,To.defaultValues(Po)),this.privateKey=Jt(e,Oo,To.defaultValues(Oo)),Uo in e&&(this.namedCurve=Jt(e,Uo,To.defaultValues(Uo))),_o in e&&(this.publicKey=Jt(e,_o,To.defaultValues(_o))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Po:return 1;case Oo:return new Dr;case Uo:return Ba;case _o:return new Ao;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Po:return t===To.defaultValues(e);case Oo:return t.isEqual(To.defaultValues(e));case Uo:return t===Ba;case _o:return Ao.compareWithDefault(Uo,t.namedCurve)&&Ao.compareWithDefault("x",t.x)&&Ao.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),new Dr({name:e.privateKey||Ba}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Kr({name:e.namedCurve||Ba})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Or({name:e.publicKey||Ba})]})]})}fromSchema(e){ln(e,Lo);const t=Aa(e,e,To.schema({names:{version:Po,privateKey:Oo,namedCurve:Uo,publicKey:_o}}));if(Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,Uo in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),_o in t.result){const e={schema:t.result.publicKey.valueBlock.valueHex};Uo in this&&(e.namedCurve=this.namedCurve),this.publicKey=new Ao(e)}}toSchema(){const e=[new Rr({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new Kr({value:this.namedCurve})]})),this.publicKey&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:[new Or({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new qr({value:e})}toJSON(){if(!this.namedCurve||To.compareWithDefault(Uo,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=wo.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:Ft.U$.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const e=this.publicKey.toJSON();t.x=e.x,t.y=e.y}return t}fromJSON(e){Va.assert("json",e,"crv","d");let t=0;const n=wo.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=Ft.U$.FromBase64Url(e.d);if(r.byteLength<t){const e=new ArrayBuffer(t),n=new Uint8Array(e),a=new Uint8Array(r);n.set(a,1),this.privateKey=new Dr({valueHex:e})}else this.privateKey=new Dr({valueHex:r.slice(0,t)});e.x&&e.y&&(this.publicKey=new Ao({json:e}))}}To.CLASS_NAME="ECPrivateKey";const Ro="prime",Ho="exponent",Mo="coefficient",jo=[Ro,Ho,Mo];class Ko extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.prime=Jt(e,Ro,Ko.defaultValues(Ro)),this.exponent=Jt(e,Ho,Ko.defaultValues(Ho)),this.coefficient=Jt(e,Mo,Ko.defaultValues(Mo)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ro:case Ho:case Mo:return new Rr;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.prime||Ba}),new Rr({name:e.exponent||Ba}),new Rr({name:e.coefficient||Ba})]})}fromSchema(e){ln(e,jo);const t=Aa(e,e,Ko.schema({names:{prime:Ro,exponent:Ho,coefficient:Mo}}));Ia.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new qr({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:Ft.U$.ToBase64Url(this.prime.valueBlock.valueHexView),d:Ft.U$.ToBase64Url(this.exponent.valueBlock.valueHexView),t:Ft.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){Va.assert("json",e,"r","d","r"),this.prime=new Rr({valueHex:Ft.U$.FromBase64Url(e.r)}),this.exponent=new Rr({valueHex:Ft.U$.FromBase64Url(e.d)}),this.coefficient=new Rr({valueHex:Ft.U$.FromBase64Url(e.t)})}}Ko.CLASS_NAME="OtherPrimeInfo";const Fo="version",Jo="modulus",Wo="publicExponent",qo="privateExponent",zo="prime1",$o="prime2",Qo="exponent1",Go="exponent2",Yo="coefficient",Xo="otherPrimeInfos",Zo=[Fo,Jo,Wo,qo,zo,$o,Qo,Go,Yo,Xo];class el extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Fo,el.defaultValues(Fo)),this.modulus=Jt(e,Jo,el.defaultValues(Jo)),this.publicExponent=Jt(e,Wo,el.defaultValues(Wo)),this.privateExponent=Jt(e,qo,el.defaultValues(qo)),this.prime1=Jt(e,zo,el.defaultValues(zo)),this.prime2=Jt(e,$o,el.defaultValues($o)),this.exponent1=Jt(e,Qo,el.defaultValues(Qo)),this.exponent2=Jt(e,Go,el.defaultValues(Go)),this.coefficient=Jt(e,Yo,el.defaultValues(Yo)),Xo in e&&(this.otherPrimeInfos=Jt(e,Xo,el.defaultValues(Xo))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fo:return 0;case Jo:case Wo:case qo:case zo:case $o:case Qo:case Go:case Yo:return new Rr;case Xo:return[];default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),new Rr({name:e.modulus||Ba}),new Rr({name:e.publicExponent||Ba}),new Rr({name:e.privateExponent||Ba}),new Rr({name:e.prime1||Ba}),new Rr({name:e.prime2||Ba}),new Rr({name:e.exponent1||Ba}),new Rr({name:e.exponent2||Ba}),new Rr({name:e.coefficient||Ba}),new qr({optional:!0,value:[new Sa({name:e.otherPrimeInfosName||Ba,value:Ko.schema(e.otherPrimeInfo||{})})]})]})}fromSchema(e){ln(e,Zo);const t=Aa(e,e,el.schema({names:{version:Fo,modulus:Jo,publicExponent:Wo,privateExponent:qo,prime1:zo,prime2:$o,exponent1:Qo,exponent2:Go,coefficient:Yo,otherPrimeInfo:{names:{blockName:Xo}}}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),Xo in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,(e=>new Ko({schema:e}))))}toSchema(){const e=[];return e.push(new Rr({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new qr({value:Array.from(this.otherPrimeInfos,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={n:Ft.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Ft.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:Ft.U$.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:Ft.U$.ToBase64Url(this.prime1.valueBlock.valueHexView),q:Ft.U$.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:Ft.U$.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:Ft.U$.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:Ft.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,(e=>e.toJSON()))),e}fromJSON(e){Va.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new Rr({valueHex:Ft.U$.FromBase64Url(e.n)}),this.publicExponent=new Rr({valueHex:Ft.U$.FromBase64Url(e.e)}),this.privateExponent=new Rr({valueHex:Ft.U$.FromBase64Url(e.d)}),this.prime1=new Rr({valueHex:Ft.U$.FromBase64Url(e.p)}),this.prime2=new Rr({valueHex:Ft.U$.FromBase64Url(e.q)}),this.exponent1=new Rr({valueHex:Ft.U$.FromBase64Url(e.dp)}),this.exponent2=new Rr({valueHex:Ft.U$.FromBase64Url(e.dq)}),this.coefficient=new Rr({valueHex:Ft.U$.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,(e=>new Ko({json:e}))))}}el.CLASS_NAME="RSAPrivateKey";const tl="version",nl="privateKeyAlgorithm",rl="privateKey",al="attributes",sl="parsedKey",il=[tl,nl,rl,al];class ol extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,tl,ol.defaultValues(tl)),this.privateKeyAlgorithm=Jt(e,nl,ol.defaultValues(nl)),this.privateKey=Jt(e,rl,ol.defaultValues(rl)),al in e&&(this.attributes=Jt(e,al,ol.defaultValues(al))),sl in e&&(this.parsedKey=Jt(e,sl,ol.defaultValues(sl))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tl:return 0;case nl:return new as;case rl:return new Dr;case al:return[];case sl:return{};default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),as.schema(e.privateKeyAlgorithm||{}),new Dr({name:e.privateKey||Ba}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Sa({name:e.attributes||Ba,value:hs.schema()})]})]})}fromSchema(e){ln(e,il);const t=Aa(e,e,ol.schema({names:{version:tl,privateKeyAlgorithm:{names:{blockName:nl}},privateKey:rl,attributes:al}}));switch(Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new as({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,al in t.result&&(this.attributes=Array.from(t.result.attributes,(e=>new hs({schema:e})))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const e=kr(this.privateKey.valueBlock.valueHexView);-1!==e.offset&&(this.parsedKey=new el({schema:e.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof Kr){const e=kr(this.privateKey.valueBlock.valueHexView);-1!==e.offset&&(this.parsedKey=new To({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:e.result}))}}}toSchema(){const e=[new Rr({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){if(!this.parsedKey){const e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(e.attributes=Array.from(this.attributes,(e=>e.toJSON()))),e}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new To({json:e}),this.privateKeyAlgorithm=new as({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Kr({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new el({json:e}),this.privateKeyAlgorithm=new as({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Br});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.privateKey=new Dr({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}ol.CLASS_NAME="PrivateKeyInfo";const ll="contentType",ul="contentEncryptionAlgorithm",cl="encryptedContent",hl=[ll,ul,cl];class fl extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.contentType=Jt(e,ll,fl.defaultValues(ll)),this.contentEncryptionAlgorithm=Jt(e,ul,fl.defaultValues(ul)),cl in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed&&!e.disableSplit)){const e=new Dr({idBlock:{isConstructed:!0},isConstructed:!0});let t=0;const n=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let r=n.byteLength;for(;r>0;){const a=new Uint8Array(n,t,t+1024>n.byteLength?n.byteLength-t:1024),s=new ArrayBuffer(a.length),i=new Uint8Array(s);for(let e=0;e<i.length;e++)i[e]=a[e];e.valueBlock.value.push(new Dr({valueHex:s})),r-=a.length,t+=a.length}this.encryptedContent=e}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ll:return Ba;case ul:return new as;case cl:return new Dr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ll:return t===Ba;case ul:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case cl:return t.isEqual(fl.defaultValues(cl));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.contentType||Ba}),as.schema(e.contentEncryptionAlgorithm||{}),new ba({value:[new Nr({name:e.encryptedContent||Ba,idBlock:{tagClass:3,tagNumber:0},value:[new Sa({value:new Dr})]}),new br({name:e.encryptedContent||Ba,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){ln(e,hl);const t=Aa(e,e,fl.schema({names:{contentType:ll,contentEncryptionAlgorithm:{names:{blockName:ul}},encryptedContent:cl}}));Ia.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new as({schema:t.result.contentEncryptionAlgorithm}),cl in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new Kr({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const n=this.encryptedContent;n.idBlock.tagClass=3,n.idBlock.tagNumber=0,n.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(n)}return new qr({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return Dr.prototype.getValue.call(this.encryptedContent)}}fl.CLASS_NAME="EncryptedContentInfo";const ml="hashAlgorithm",dl="maskGenAlgorithm",gl="saltLength",pl="trailerField",vl=[ml,dl,gl,pl];class yl extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=Jt(e,ml,yl.defaultValues(ml)),this.maskGenAlgorithm=Jt(e,dl,yl.defaultValues(dl)),this.saltLength=Jt(e,gl,yl.defaultValues(gl)),this.trailerField=Jt(e,pl,yl.defaultValues(pl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ml:return new as({algorithmId:"1.3.14.3.2.26",algorithmParams:new Br});case dl:return new as({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new as({algorithmId:"1.3.14.3.2.26",algorithmParams:new Br}).toSchema()});case gl:return 20;case pl:return 1;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Nr({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[as.schema(e.hashAlgorithm||{})]}),new Nr({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[as.schema(e.maskGenAlgorithm||{})]}),new Nr({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new Rr({name:e.saltLength||Ba})]}),new Nr({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new Rr({name:e.trailerField||Ba})]})]})}fromSchema(e){ln(e,vl);const t=Aa(e,e,yl.schema({names:{hashAlgorithm:{names:{blockName:ml}},maskGenAlgorithm:{names:{blockName:dl}},saltLength:gl,trailerField:pl}}));Ia.assertSchema(t,this.className),ml in t.result&&(this.hashAlgorithm=new as({schema:t.result.hashAlgorithm})),dl in t.result&&(this.maskGenAlgorithm=new as({schema:t.result.maskGenAlgorithm})),gl in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),pl in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(yl.defaultValues(ml))||e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(yl.defaultValues(dl))||e.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==yl.defaultValues(gl)&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:2},value:[new Rr({value:this.saltLength})]})),this.trailerField!==yl.defaultValues(pl)&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:3},value:[new Rr({value:this.trailerField})]})),new qr({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(yl.defaultValues(ml))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(yl.defaultValues(dl))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==yl.defaultValues(gl)&&(e.saltLength=this.saltLength),this.trailerField!==yl.defaultValues(pl)&&(e.trailerField=this.trailerField),e}}yl.CLASS_NAME="RSASSAPSSParams";const wl="salt",bl="iterationCount",Sl="keyLength",kl="prf",Al=[wl,bl,Sl,kl];class Nl extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.salt=Jt(e,wl,Nl.defaultValues(wl)),this.iterationCount=Jt(e,bl,Nl.defaultValues(bl)),Sl in e&&(this.keyLength=Jt(e,Sl,Nl.defaultValues(Sl))),kl in e&&(this.prf=Jt(e,kl,Nl.defaultValues(kl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wl:return{};case bl:return-1;case Sl:return 0;case kl:return new as({algorithmId:"1.3.14.3.2.26",algorithmParams:new Br});default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new ba({value:[new Dr({name:e.saltPrimitive||Ba}),as.schema(e.saltConstructed||{})]}),new Rr({name:e.iterationCount||Ba}),new Rr({name:e.keyLength||Ba,optional:!0}),as.schema(e.prf||{names:{optional:!0}})]})}fromSchema(e){ln(e,Al);const t=Aa(e,e,Nl.schema({names:{saltPrimitive:wl,saltConstructed:{names:{blockName:wl}},iterationCount:bl,keyLength:Sl,prf:{names:{blockName:kl,optional:!0}}}}));Ia.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,Sl in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),kl in t.result&&(this.prf=new as({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new Rr({value:this.iterationCount})),Sl in this&&Nl.defaultValues(Sl)!==this.keyLength&&e.push(new Rr({value:this.keyLength})),this.prf&&!1===Nl.defaultValues(kl).isEqual(this.prf)&&e.push(this.prf.toSchema()),new qr({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return Sl in this&&Nl.defaultValues(Sl)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&!1===Nl.defaultValues(kl).isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}Nl.CLASS_NAME="PBKDF2Params";const Cl="keyDerivationFunc",El="encryptionScheme",Bl=[Cl,El];class xl extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyDerivationFunc=Jt(e,Cl,xl.defaultValues(Cl)),this.encryptionScheme=Jt(e,El,xl.defaultValues(El)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cl:case El:return new as;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.keyDerivationFunc||{}),as.schema(e.encryptionScheme||{})]})}fromSchema(e){ln(e,Bl);const t=Aa(e,e,xl.schema({names:{keyDerivationFunc:{names:{blockName:Cl}},encryptionScheme:{names:{blockName:El}}}}));Ia.assertSchema(t,this.className),this.keyDerivationFunc=new as({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new as({schema:t.result.encryptionScheme})}toSchema(){return new qr({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}xl.CLASS_NAME="PBES2Params";class Vl{constructor(e){this.crypto=e.crypto,this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle,this.name=Jt(e,"name",Ba)}async encrypt(){return this.subtle.encrypt(...arguments)}async decrypt(){return this.subtle.decrypt(...arguments)}sign(){return this.subtle.sign(...arguments)}async verify(){return this.subtle.verify(...arguments)}async digest(){return this.subtle.digest(...arguments)}async generateKey(){return this.subtle.generateKey(...arguments)}async deriveKey(){return this.subtle.deriveKey(...arguments)}async deriveBits(){return this.subtle.deriveBits(...arguments)}async wrapKey(){return this.subtle.wrapKey(...arguments)}async unwrapKey(){return this.subtle.unwrapKey(...arguments)}exportKey(){return this.subtle.exportKey(...arguments)}importKey(){return this.subtle.importKey(...arguments)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function Il(e,t,n,r,a,s){let i,o;const l=[];switch(t.toUpperCase()){case"SHA-1":i=20,o=64;break;case"SHA-256":i=32,o=64;break;case"SHA-384":i=48,o=128;break;case"SHA-512":i=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}const u=new Uint8Array(r),c=new ArrayBuffer(2*r.byteLength+2),h=new Uint8Array(c);for(let V=0;V<u.length;V++)h[2*V]=0,h[2*V+1]=u[V];h[h.length-2]=0,h[h.length-1]=0,r=c.slice(0);const f=new ArrayBuffer(o),m=new Uint8Array(f);for(let V=0;V<f.byteLength;V++)m[V]=3;const d=a.byteLength,g=o*Math.ceil(d/o),p=new ArrayBuffer(g),v=new Uint8Array(p),y=new Uint8Array(a);for(let V=0;V<g;V++)v[V]=y[V%d];const w=r.byteLength,b=o*Math.ceil(w/o),S=new ArrayBuffer(b),k=new Uint8Array(S),A=new Uint8Array(r);for(let V=0;V<b;V++)k[V]=A[V%w];const N=p.byteLength+S.byteLength;let C=new ArrayBuffer(N),E=new Uint8Array(C);E.set(v),E.set(k,v.length);const B=Math.ceil((n>>3)/i);let x=Promise.resolve(C);for(let V=0;V<=B;V++){x=x.then((e=>{const t=new ArrayBuffer(f.byteLength+e.byteLength),n=new Uint8Array(t);return n.set(m),n.set(E,m.length),t}));for(let n=0;n<s;n++)x=x.then((n=>e.digest({name:t},new Uint8Array(n))));x=x.then((e=>{const t=new ArrayBuffer(o),n=new Uint8Array(t);for(let o=0;o<t.byteLength;o++)n[o]=e[o%e.byteLength];const r=Math.ceil(d/o)+Math.ceil(w/o),a=[];let s=0,i=o;for(let l=0;l<r;l++){const e=Array.from(new Uint8Array(C.slice(s,s+i)));s+=o,s+o>C.byteLength&&(i=C.byteLength-s);let r=511;for(let a=t.byteLength-1;a>=0;a--)r>>=8,r+=n[a]+e[a],e[a]=255&r;a.push(...e)}return C=new ArrayBuffer(a.length),E=new Uint8Array(C),E.set(a),l.push(...new Uint8Array(e)),C}))}return x=x.then((()=>{const e=new ArrayBuffer(n>>3);return new Uint8Array(e).set(new Uint8Array(l).slice(0,n>>3)),e})),x}function Dl(e){const t="string"===typeof e?{name:e}:e;return"hash"in t?{...t,hash:Dl(t.hash)}:t}class Pl extends Vl{async importKey(e,t,n,r,a){var s,i,o,l,u,c;let h={};const f=Dl(n);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,n,r,a);case"spki":{const e=kr(Ft._H.toArrayBuffer(t));Ia.assert(e,"keyData");const n=new Do;try{n.fromSchema(e.result)}catch{throw new xa("Incorrect keyData")}switch(f.name.toUpperCase()){case"RSA-PSS":if(!f.hash)throw new Va("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(f.hash.name.toUpperCase()){case"SHA-1":h.alg="PS1";break;case"SHA-256":h.alg="PS256";break;case"SHA-384":h.alg="PS384";break;case"SHA-512":h.alg="PS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(f.hash.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":{if(a=["verify"],h.kty="RSA",h.ext=r,h.key_ops=a,"1.2.840.113549.1.1.1"!==n.algorithm.algorithmId)throw new Error("Incorrect public key algorithm: ".concat(n.algorithm.algorithmId));if(!h.alg){if(!f.hash)throw new Va("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(f.hash.name.toUpperCase()){case"SHA-1":h.alg="RS1";break;case"SHA-256":h.alg="RS256";break;case"SHA-384":h.alg="RS384";break;case"SHA-512":h.alg="RS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(f.hash.name.toUpperCase()))}}const e=n.toJSON();Object.assign(h,e)}break;case"ECDSA":a=["verify"];case"ECDH":{if(h={kty:"EC",ext:r,key_ops:a},"1.2.840.10045.2.1"!==n.algorithm.algorithmId)throw new Error("Incorrect public key algorithm: ".concat(n.algorithm.algorithmId));const e=n.toJSON();Object.assign(h,e)}break;case"RSA-OAEP":{if(h.kty="RSA",h.ext=r,h.key_ops=a,"safari"===this.name.toLowerCase())h.alg="RSA-OAEP";else{if(!f.hash)throw new Va("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(f.hash.name.toUpperCase()){case"SHA-1":h.alg="RSA-OAEP";break;case"SHA-256":h.alg="RSA-OAEP-256";break;case"SHA-384":h.alg="RSA-OAEP-384";break;case"SHA-512":h.alg="RSA-OAEP-512";break;default:throw new Error("Incorrect hash algorithm: ".concat(f.hash.name.toUpperCase()))}}const e=n.toJSON();Object.assign(h,e)}break;case"RSAES-PKCS1-V1_5":{h.kty="RSA",h.ext=r,h.key_ops=a,h.alg="PS1";const e=n.toJSON();Object.assign(h,e)}break;default:throw new Error("Incorrect algorithm name: ".concat(f.name.toUpperCase()))}}break;case"pkcs8":{const e=new ol,n=kr(Ft._H.toArrayBuffer(t));Ia.assert(n,"keyData");try{e.fromSchema(n.result)}catch(m){throw new Error("Incorrect keyData")}if(!e.parsedKey)throw new Error("Incorrect keyData");switch(f.name.toUpperCase()){case"RSA-PSS":switch(null===(s=f.hash)||void 0===s?void 0:s.name.toUpperCase()){case"SHA-1":h.alg="PS1";break;case"SHA-256":h.alg="PS256";break;case"SHA-384":h.alg="PS384";break;case"SHA-512":h.alg="PS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(null===(i=f.hash)||void 0===i?void 0:i.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":{if(a=["sign"],h.kty="RSA",h.ext=r,h.key_ops=a,"1.2.840.113549.1.1.1"!==e.privateKeyAlgorithm.algorithmId)throw new Error("Incorrect private key algorithm: ".concat(e.privateKeyAlgorithm.algorithmId));if("alg"in h===!1)switch(null===(o=f.hash)||void 0===o?void 0:o.name.toUpperCase()){case"SHA-1":h.alg="RS1";break;case"SHA-256":h.alg="RS256";break;case"SHA-384":h.alg="RS384";break;case"SHA-512":h.alg="RS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(null===(l=f.hash)||void 0===l?void 0:l.name.toUpperCase()))}const t=e.toJSON();Object.assign(h,t)}break;case"ECDSA":a=["sign"];case"ECDH":{if(h={kty:"EC",ext:r,key_ops:a},"1.2.840.10045.2.1"!==e.privateKeyAlgorithm.algorithmId)throw new Error("Incorrect algorithm: ".concat(e.privateKeyAlgorithm.algorithmId));const t=e.toJSON();Object.assign(h,t)}break;case"RSA-OAEP":{if(h.kty="RSA",h.ext=r,h.key_ops=a,"safari"===this.name.toLowerCase())h.alg="RSA-OAEP";else switch(null===(u=f.hash)||void 0===u?void 0:u.name.toUpperCase()){case"SHA-1":h.alg="RSA-OAEP";break;case"SHA-256":h.alg="RSA-OAEP-256";break;case"SHA-384":h.alg="RSA-OAEP-384";break;case"SHA-512":h.alg="RSA-OAEP-512";break;default:throw new Error("Incorrect hash algorithm: ".concat(null===(c=f.hash)||void 0===c?void 0:c.name.toUpperCase()))}const t=e.toJSON();Object.assign(h,t)}break;case"RSAES-PKCS1-V1_5":{a=["decrypt"],h.kty="RSA",h.ext=r,h.key_ops=a,h.alg="PS1";const t=e.toJSON();Object.assign(h,t)}break;default:throw new Error("Incorrect algorithm name: ".concat(f.name.toUpperCase()))}}break;case"jwk":h=t;break;default:throw new Error("Incorrect format: ".concat(e))}if("safari"===this.name.toLowerCase())try{return this.subtle.importKey("jwk",an(JSON.stringify(h)),n,r,a)}catch{return this.subtle.importKey("jwk",h,n,r,a)}return this.subtle.importKey("jwk",h,n,r,a)}async exportKey(e,t){let n=await this.subtle.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&n instanceof ArrayBuffer&&(n=JSON.parse(rn(n))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const e=new Do;try{e.fromJSON(n)}catch(r){throw new Error("Incorrect key data")}return e.toSchema().toBER(!1)}case"pkcs8":{const e=new ol;try{e.fromJSON(n)}catch(r){throw new Error("Incorrect key data")}return e.toSchema().toBER(!1)}case"jwk":return n;default:throw new Error("Incorrect format: ".concat(e))}}async convert(e,t,n,r,a,s){if(e.toLowerCase()===t.toLowerCase())return n;const i=await this.importKey(e,n,r,a,s);return this.exportKey(t,i)}getAlgorithmByOID(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(t)throw new Error("Unsupported algorithm identifier ".concat(n?"for ".concat(n," "):Ba,": ").concat(e));return{}}getOIDByAlgorithm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=Ba;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":r="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.1.1.5";break;case"SHA-256":r="1.2.840.113549.1.1.11";break;case"SHA-384":r="1.2.840.113549.1.1.12";break;case"SHA-512":r="1.2.840.113549.1.1.13"}break;case"RSA-PSS":r="1.2.840.113549.1.1.10";break;case"RSA-OAEP":r="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.10045.4.1";break;case"SHA-256":r="1.2.840.10045.4.3.2";break;case"SHA-384":r="1.2.840.10045.4.3.3";break;case"SHA-512":r="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":r="1.3.133.16.840.63.0.2";break;case"SHA-256":r="1.3.132.1.11.1";break;case"SHA-384":r="1.3.132.1.11.2";break;case"SHA-512":r="1.3.132.1.11.3"}break;case"AES-CTR":case"AES-CMAC":case"CONCAT":case"HKDF":break;case"AES-CBC":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.2";break;case 192:r="2.16.840.1.101.3.4.1.22";break;case 256:r="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.6";break;case 192:r="2.16.840.1.101.3.4.1.26";break;case 256:r="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.4";break;case 192:r="2.16.840.1.101.3.4.1.24";break;case 256:r="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.5";break;case 192:r="2.16.840.1.101.3.4.1.25";break;case 256:r="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.2.7";break;case"SHA-256":r="1.2.840.113549.2.9";break;case"SHA-384":r="1.2.840.113549.2.10";break;case"SHA-512":r="1.2.840.113549.2.11"}break;case"DH":r="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":r="1.3.14.3.2.26";break;case"SHA-256":r="2.16.840.1.101.3.4.2.1";break;case"SHA-384":r="2.16.840.1.101.3.4.2.2";break;case"SHA-512":r="2.16.840.1.101.3.4.2.3";break;case"PBKDF2":r="1.2.840.113549.1.5.12";break;case"P-256":r="1.2.840.10045.3.1.7";break;case"P-384":r="1.3.132.0.34";break;case"P-521":r="1.3.132.0.35"}if(!r&&t)throw new Error("Unsupported algorithm ".concat(n?"for ".concat(n," "):Ba,": ").concat(e.name));return r}getAlgorithmParameters(e,t){let n={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":n={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":n={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":n={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":n={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":n={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":n={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":n={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":n={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};n={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};n={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return n}getHashAlgorithm(e){let t=Ba;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{const n=new yl({schema:e.algorithmParams});if(n.hashAlgorithm){const e=this.getAlgorithmByOID(n.hashAlgorithm.algorithmId);if(!("name"in e))return Ba;t=e.name}else t="SHA-1"}catch{}}return t}async encryptEncryptedContentInfo(e){Va.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),n=this.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),r=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),a=new ArrayBuffer(16),s=new Uint8Array(a);this.getRandomValues(s);const i=new ArrayBuffer(64),o=new Uint8Array(i);this.getRandomValues(o);const l=new Uint8Array(e.contentToEncrypt),u=new Nl({salt:new Dr({valueHex:i}),iterationCount:e.iterationCount,prf:new as({algorithmId:r,algorithmParams:new Br})}),c=new Uint8Array(e.password),h=await this.importKey("raw",c,"PBKDF2",!1,["deriveKey"]),f=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:o,iterations:e.iterationCount},h,e.contentEncryptionAlgorithm,!1,["encrypt"]),m=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:s},f,l),d=new xl({keyDerivationFunc:new as({algorithmId:n,algorithmParams:u.toSchema()}),encryptionScheme:new as({algorithmId:t,algorithmParams:new Dr({valueHex:a})})});return new fl({contentType:e.contentType,contentEncryptionAlgorithm:new as({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:d.toSchema()}),encryptedContent:new Dr({valueHex:m})})}async decryptEncryptedContentInfo(e){if(Va.assert(e,"password","encryptedContentInfo"),"1.2.840.113549.1.5.13"!==e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)throw new Error('Unknown "contentEncryptionAlgorithm": '.concat(e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId));let t,n;try{t=new xl({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(m){throw new Error('Incorrectly encoded "pbes2Parameters"')}try{n=new Nl({schema:t.keyDerivationFunc.algorithmParams})}catch(m){throw new Error('Incorrectly encoded "pbkdf2Params"')}const r=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),a=t.encryptionScheme.algorithmParams.valueBlock.valueHex,s=new Uint8Array(a),i=n.salt.valueBlock.valueHex,o=new Uint8Array(i),l=n.iterationCount;let u="SHA-1";if(n.prf){u=this.getAlgorithmByOID(n.prf.algorithmId,!0).hash.name}const c=await this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),h=await this.deriveKey({name:"PBKDF2",hash:{name:u},salt:o,iterations:l},c,r,!1,["decrypt"]),f=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:r.name,iv:s},h,f)}async stampDataWithPassword(e){if(e instanceof Object===!1)throw new Error('Parameters must have type "Object"');let t;switch(Va.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp"),e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Il(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),a=await this.importKey("raw",new Uint8Array(r),n,!1,["sign"]);return this.sign(n,a,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){Va.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Il(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),a=await this.importKey("raw",new Uint8Array(r),n,!1,["verify"]);return this.verify(n,a,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");const n=new as,r=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(r.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const a=r.algorithm;switch(a.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.algorithmId=this.getOIDByAlgorithm(a,!0);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":a.saltLength=32;break;case"SHA-384":a.saltLength=48;break;case"SHA-512":a.saltLength=64}const e={};if("SHA-1"!==t.toUpperCase()){const n=this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");e.hashAlgorithm=new as({algorithmId:n,algorithmParams:new Br}),e.maskGenAlgorithm=new as({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:e.hashAlgorithm.toSchema()})}20!==a.saltLength&&(e.saltLength=a.saltLength);const r=new yl(e);n.algorithmId="1.2.840.113549.1.1.10",n.algorithmParams=r.toSchema()}break;default:throw new Error("Unsupported signature algorithm: ".concat(e.algorithm.name))}return{signatureAlgorithm:n,parameters:r}}async signWithPrivateKey(e,t,n){const r=await this.sign(n.algorithm,t,e);return"ECDSA"===n.algorithm.name?function(e){if(e.byteLength%2!==0)return Ea;const t=e.byteLength/2,n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(e,0,t));const r=new Rr({valueHex:n}),a=new ArrayBuffer(t);new Uint8Array(a).set(new Uint8Array(e,t,t));const s=new Rr({valueHex:a});return new qr({value:[r.convertToDER(),s.convertToDER()]}).toBER(!1)}(r):r}fillPublicKeyParameters(e,t){const n={},r=this.getHashAlgorithm(t);if(r===Ba)throw new Error("Unsupported signature algorithm: ".concat(t.algorithmId));let a;a="1.2.840.113549.1.1.10"===t.algorithmId?t.algorithmId:e.algorithm.algorithmId;const s=this.getAlgorithmByOID(a,!0);if(n.algorithm=this.getAlgorithmParameters(s.name,"importKey"),"hash"in n.algorithm.algorithm&&(n.algorithm.algorithm.hash.name=r),"ECDSA"===s.name){const t=e.algorithm;if(!t.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const r=t.algorithmParams;if("idBlock"in t.algorithmParams&&(1!==r.idBlock.tagClass||6!==r.idBlock.tagNumber))throw new Error("Incorrect type for ECDSA public key parameters");const a=this.getAlgorithmByOID(r.valueBlock.toString(),!0);n.algorithm.algorithm.namedCurve=a.name}return n}async getPublicKey(e,t,n){n||(n=this.fillPublicKeyParameters(e,t));const r=e.toSchema().toBER(!1);return this.importKey("spki",r,n.algorithm.algorithm,!0,n.algorithm.usages)}async verifyWithPublicKey(e,t,n,r,a){let s;if(a){const e={};let t;t="1.2.840.113549.1.1.10"===r.algorithmId?r.algorithmId:n.algorithm.algorithmId;const i=this.getAlgorithmByOID(t,!0);if(e.algorithm=this.getAlgorithmParameters(i.name,"importKey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=a),"ECDSA"===i.name){let t=!1;if("algorithmParams"in n.algorithm===!0&&"idBlock"in n.algorithm.algorithmParams&&1===n.algorithm.algorithmParams.idBlock.tagClass&&6===n.algorithm.algorithmParams.idBlock.tagNumber&&(t=!0),!1===t)throw new Error("Incorrect type for ECDSA public key parameters");const r=this.getAlgorithmByOID(n.algorithm.algorithmParams.valueBlock.toString(),!0);e.algorithm.algorithm.namedCurve=r.name}s=await this.getPublicKey(n,null,e)}else{if(!(a=this.getHashAlgorithm(r)))throw new Error("Unsupported signature algorithm: ".concat(r.algorithmId));s=await this.getPublicKey(n,r)}const i=this.getAlgorithmParameters(s.algorithm.name,"verify");"hash"in i.algorithm&&(i.algorithm.hash.name=a);let o=t.valueBlock.valueHexView;if("ECDSA"===s.algorithm.name){const e=wo.find(s.algorithm.namedCurve);if(!e)throw new Error("Unsupported named curve in use");const t=kr(o);Ia.assert(t,"Signature value"),o=function(e,t){if(!(e instanceof qr&&2===e.valueBlock.value.length&&e.valueBlock.value[0]instanceof Rr&&e.valueBlock.value[1]instanceof Rr))return Ea;const n=e.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,r=e.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,a=new Uint8Array(2*t);return a.set(n,t-n.byteLength),a.set(r,2*t-r.byteLength),a.buffer}(t.result,e.size)}if("RSA-PSS"===s.algorithm.name){const e=new yl({schema:r.algorithmParams});i.algorithm.saltLength="saltLength"in e?e.saltLength:20;let t="SHA-1";if("hashAlgorithm"in e){t=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId,!0).name}i.algorithm.hash.name=t}return this.verify(i.algorithm,s,o,e)}}let Ol={name:"none",crypto:null};function Ul(e){return!(!e||"object"!==typeof e||!("crypto"in e))}function _l(e){let t=null;if((arguments.length<=1?0:arguments.length-1)<2)t=!(arguments.length<=1)&&arguments.length-1?arguments.length<=1?void 0:arguments[1]:"undefined"!==typeof self&&self.crypto?new Pl({name:"browser",crypto:self.crypto}):null;else{const e=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2];Ul(n)?t=n:Ul(e)?t=e:"subtle"in e&&"getRandomValues"in e&&(t=new Pl({crypto:e}))}if("undefined"!==typeof process&&"pid"in process&&"undefined"!==typeof n.g&&"undefined"===typeof window){if("undefined"===typeof n.g[process.pid])n.g[process.pid]={};else if("object"!==typeof n.g[process.pid])throw new Error("Name global.".concat(process.pid," already exists and it is not an object"));if("undefined"===typeof n.g[process.pid].pkijs)n.g[process.pid].pkijs={};else if("object"!==typeof n.g[process.pid].pkijs)throw new Error("Name global.".concat(process.pid,".pkijs already exists and it is not an object"));n.g[process.pid].pkijs.engine={name:e,crypto:t}}else Ol={name:e,crypto:t}}function Ll(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=function(){if("undefined"!==typeof process&&"pid"in process&&"undefined"!==typeof n.g&&"undefined"===typeof window){let t;try{t=n.g[process.pid].pkijs.engine}catch(e){throw new Error("Please call 'setEngine' before call to 'getEngine'")}return t}return Ol}();if(!t.crypto&&e)throw new Error("Unable to create WebCrypto object");return t.crypto}async function Tl(e,t,n,r,a){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new xa("Unknown hash function: ".concat(e))}if(xa.assert(t,"zBuffer","ArrayBuffer"),0===t.byteLength)throw new xa("'zBuffer' has zero length, error");if(xa.assert(r,"SharedInfo","ArrayBuffer"),n>255)throw new xa("Please set 'Counter' argument to value less or equal to 255");const s=new ArrayBuffer(4),i=new Uint8Array(s);i[0]=0,i[1]=0,i[2]=0,i[3]=n;let o=Ea;o=$t(o,t),o=$t(o,s),o=$t(o,r);return{counter:n,result:await a.digest({name:e},o)}}async function Rl(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ll(!0),s=0,i=1;switch(e.toUpperCase()){case"SHA-1":s=160;break;case"SHA-256":s=256;break;case"SHA-384":s=384;break;case"SHA-512":s=512;break;default:throw new xa("Unknown hash function: ".concat(e))}if(xa.assert(t,"Zbuffer","ArrayBuffer"),0===t.byteLength)throw new xa("'Zbuffer' has zero length, error");xa.assert(r,"SharedInfo","ArrayBuffer");const o=n/s;Math.floor(o)>0&&(i=Math.floor(o),o-i>0&&i++);const l=[];for(let f=1;f<=i;f++)l.push(await Tl(e,t,f,r,a));let u=Ea,c=1,h=!0;for(;h;){h=!1;for(const e of l)if(e.counter===c){u=$t(u,e.result),h=!0;break}c++}if(n>>=3,u.byteLength>n){const e=new ArrayBuffer(n),t=new Uint8Array(e),r=new Uint8Array(u);for(let a=0;a<n;a++)t[a]=r[a];return e}return u}const Hl="version",Ml="logID",jl="extensions",Kl="timestamp",Fl="hashAlgorithm",Jl="signatureAlgorithm",Wl="signature",ql="none",zl="sha1",$l="sha224",Ql="sha256",Gl="sha384",Yl="sha512",Xl="anonymous",Zl="ecdsa";class eu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Hl,eu.defaultValues(Hl)),this.logID=Jt(e,Ml,eu.defaultValues(Ml)),this.timestamp=Jt(e,Kl,eu.defaultValues(Kl)),this.extensions=Jt(e,jl,eu.defaultValues(jl)),this.hashAlgorithm=Jt(e,Fl,eu.defaultValues(Fl)),this.signatureAlgorithm=Jt(e,Jl,eu.defaultValues(Jl)),this.signature=Jt(e,Wl,eu.defaultValues(Wl)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hl:return 0;case Ml:case jl:return Ea;case Kl:return new Date(0);case Fl:case Jl:return Ba;case Wl:return new wa;default:return super.defaultValues(e)}}fromSchema(e){if(e instanceof ka===!1)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new Ca({stream:new Na({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(qt(new Uint8Array(e.getBlock(8)),8));const n=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(n)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm=ql;break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm=zl;break;case 3:this.hashAlgorithm=$l;break;case 4:this.hashAlgorithm=Ql;break;case 5:this.hashAlgorithm=Gl;break;case 6:this.hashAlgorithm=Yl;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Xl;break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm=Zl;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const r=e.getUint16(),a=kr(new Uint8Array(e.getBlock(r)).buffer.slice(0));if(Ia.assert(a,"SignedCertificateTimestamp"),this.signature=a.result,t!==47+n+r)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new ka({data:e.stream.buffer})}toStream(){const e=new Ca;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),n=new Uint8Array(t),r=zt(this.timestamp.valueOf(),8);let a,s;switch(n.set(new Uint8Array(r),8-r.byteLength),e.appendView(n),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case ql:a=0;break;case"md5":a=1;break;case zl:a=2;break;case $l:a=3;break;case Ql:a=4;break;case Gl:a=5;break;case Yl:a=6;break;default:throw new Error("Incorrect data for hashAlgorithm: ".concat(this.hashAlgorithm))}switch(e.appendChar(a),this.signatureAlgorithm.toLowerCase()){case Xl:s=0;break;case"rsa":s=1;break;case"dsa":s=2;break;case Zl:s=3;break;default:throw new Error("Incorrect data for signatureAlgorithm: ".concat(this.signatureAlgorithm))}e.appendChar(s);const i=this.signature.toBER(!1);return e.appendUint16(i.byteLength),e.appendView(new Uint8Array(i)),e}toJSON(){return{version:this.version,logID:Wt(this.logID),timestamp:this.timestamp,extensions:Wt(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ll(!0);const a=tn(rn(this.logID));let s=null;const i=new Ca;for(const f of e)if(f.log_id===a){s=f.key;break}if(!s)throw new Error("Public key not found for CT with logId: ".concat(a));const o=an(nn(s)),l=Do.fromBER(o);i.appendChar(0),i.appendChar(0);const u=new ArrayBuffer(8),c=new Uint8Array(u),h=zt(this.timestamp.valueOf(),8);return c.set(new Uint8Array(h),8-h.byteLength),i.appendView(c),i.appendUint16(n),0===n&&i.appendUint24(t.byteLength),i.appendView(new Uint8Array(t)),i.appendUint16(this.extensions.byteLength),0!==this.extensions.byteLength&&i.appendView(new Uint8Array(this.extensions)),r.verifyWithPublicKey(i.buffer.slice(0,i.length),new Dr({valueHex:this.signature.toBER(!1)}),l,{algorithmId:Ba},"SHA-256")}}eu.CLASS_NAME="SignedCertificateTimestamp";const tu="timestamps";class nu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.timestamps=Jt(e,tu,nu.defaultValues(tu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===tu?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===tu?0===t.length:super.defaultValues(e)}static schema(){var e;const t=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return null!==(e=t.optional)&&void 0!==e||(t.optional=!1),new Dr({name:t.blockName||"SignedCertificateTimestampList",optional:t.optional})}fromSchema(e){if(e instanceof Dr===!1)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new Ca({stream:new Na({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new eu({stream:t}))}toSchema(){const e=new Ca;let t=0;const n=[];for(const r of this.timestamps){const e=r.toStream();n.push(e),t+=e.stream.buffer.byteLength}e.appendUint16(t);for(const r of n)e.appendView(r.stream.view);return new Dr({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,(e=>e.toJSON()))}}}nu.CLASS_NAME="SignedCertificateTimestampList";const ru="attributes",au=[ru];class su extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.attributes=Jt(e,ru,su.defaultValues(ru)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ru?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.attributes||Ba,value:hs.schema()})]})}fromSchema(e){ln(e,au);const t=Aa(e,e,su.schema({names:{attributes:ru}}));Ia.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,(e=>new hs({schema:e})))}toSchema(){return new qr({value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){return{attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}su.CLASS_NAME="SubjectDirectoryAttributes";class iu{static getItems(){return this.types||(this.types={},iu.register(ws,"SubjectAltName",os),iu.register(bs,"IssuerAltName",os),iu.register(Is,"AuthorityKeyIdentifier",zs),iu.register(Ss,"BasicConstraints",Gs),iu.register("1.3.6.1.4.1.311.21.1","MicrosoftCaVersion",Zs),iu.register(Bs,"CertificatePolicies",ci),iu.register("1.3.6.1.4.1.311.21.10","CertificatePoliciesMicrosoft",ci),iu.register("1.3.6.1.4.1.311.21.7","MicrosoftCertTemplateV2",gi),iu.register(Cs,"CRLDistributionPoints",Ci),iu.register(Es,"FreshestCRL",Ci),iu.register("2.5.29.37","ExtKeyUsage",xi),iu.register(As,"CertificateIssuer",ys),iu.register(Ps,"AuthorityInfoAccess",Ii),iu.register("1.3.6.1.5.5.7.1.11","SubjectInfoAccess",Ii),iu.register(ks,"IssuingDistributionPoint",Hi),iu.register(Ns,"NameConstraints",$i),iu.register(Ds,"PolicyConstraints",Xi),iu.register(Vs,"PolicyMappings",so),iu.register("2.5.29.16","PrivateKeyUsagePeriod",uo),iu.register("1.3.6.1.5.5.7.1.3","QCStatements",vo),iu.register(Os,"SignedCertificateTimestampList",nu),iu.register("2.5.29.9","SubjectDirectoryAttributes",su)),this.types}static fromBER(e,t){const n=kr(t);if(-1===n.offset)return null;const r=this.find(e);if(r)try{return new r.type({schema:n.result})}catch(a){const t=new r.type;return t.parsingError="Incorrectly formatted value of extension ".concat(r.name," (").concat(e,")"),t}return n.result}static find(e){return this.getItems()[e]||null}static register(e,t,n){this.getItems()[e]={name:t,type:n}}}const ou="extnID",lu="critical",uu="extnValue",cu="parsedValue",hu=[ou,lu,uu];class fu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.extnID=Jt(e,ou,fu.defaultValues(ou)),this.critical=Jt(e,lu,fu.defaultValues(lu)),this.extnValue=uu in e?new Dr({valueHex:e.extnValue}):fu.defaultValues(uu),cu in e&&(this.parsedValue=Jt(e,cu,fu.defaultValues(cu))),e.schema&&this.fromSchema(e.schema)}get parsedValue(){if(void 0===this._parsedValue){const e=iu.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case ou:return Ba;case lu:return!1;case uu:return new Dr;case cu:return{};default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.extnID||Ba}),new Vr({name:e.critical||Ba,optional:!0}),new Dr({name:e.extnValue||Ba})]})}fromSchema(e){ln(e,hu);const t=Aa(e,e,fu.schema({names:{extnID:ou,critical:lu,extnValue:uu}}));Ia.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),lu in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new Kr({value:this.extnID})),this.critical!==fu.defaultValues(lu)&&e.push(new Vr({value:this.critical})),e.push(this.extnValue),new qr({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==fu.defaultValues(lu)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}fu.CLASS_NAME="Extension";const mu="extensions",du=[mu];class gu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.extensions=Jt(e,mu,gu.defaultValues(mu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===mu?[]:super.defaultValues(e)}static schema(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({optional:e,name:t.blockName||Ba,value:[new Sa({name:t.extensions||Ba,value:fu.schema(t.extension||{})})]})}fromSchema(e){ln(e,du);const t=Aa(e,e,gu.schema({names:{extensions:mu}}));Ia.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,(e=>new fu({schema:e})))}toSchema(){return new qr({value:Array.from(this.extensions,(e=>e.toSchema()))})}toJSON(){return{extensions:this.extensions.map((e=>e.toJSON()))}}}gu.CLASS_NAME="Extensions";const pu="issuer",vu="serialNumber",yu="issuerUID",wu=[pu,vu,yu];class bu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.issuer=Jt(e,pu,bu.defaultValues(pu)),this.serialNumber=Jt(e,vu,bu.defaultValues(vu)),yu in e&&(this.issuerUID=Jt(e,yu,bu.defaultValues(yu))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pu:return new ys;case vu:return new Rr;case yu:return new Or;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[ys.schema(e.issuer||{}),new Rr({name:e.serialNumber||Ba}),new Or({optional:!0,name:e.issuerUID||Ba})]})}fromSchema(e){ln(e,wu);const t=Aa(e,e,bu.schema({names:{issuer:{names:{blockName:pu}},serialNumber:vu,issuerUID:yu}}));Ia.assertSchema(t,this.className),this.issuer=new ys({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,yu in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new qr({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}bu.CLASS_NAME="IssuerSerial";const Su="version",ku="baseCertificateID",Au="subjectName",Nu="issuer",Cu="signature",Eu="serialNumber",Bu="attrCertValidityPeriod",xu="attributes",Vu="issuerUniqueID",Iu="extensions",Du=[Su,ku,Au,Nu,Cu,Eu,Bu,xu,Vu,Iu];class Pu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Su,Pu.defaultValues(Su)),ku in e&&(this.baseCertificateID=Jt(e,ku,Pu.defaultValues(ku))),Au in e&&(this.subjectName=Jt(e,Au,Pu.defaultValues(Au))),this.issuer=Jt(e,Nu,Pu.defaultValues(Nu)),this.signature=Jt(e,Cu,Pu.defaultValues(Cu)),this.serialNumber=Jt(e,Eu,Pu.defaultValues(Eu)),this.attrCertValidityPeriod=Jt(e,Bu,Pu.defaultValues(Bu)),this.attributes=Jt(e,xu,Pu.defaultValues(xu)),Vu in e&&(this.issuerUniqueID=Jt(e,Vu,Pu.defaultValues(Vu))),Iu in e&&(this.extensions=Jt(e,Iu,Pu.defaultValues(Iu))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Su:return 0;case ku:return new bu;case Au:case Nu:return new ys;case Cu:return new as;case Eu:return new Rr;case Bu:return new gs;case xu:return[];case Vu:return new Or;case Iu:return new gu;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),new ba({value:[new Nr({name:e.baseCertificateID||Ba,idBlock:{tagClass:3,tagNumber:0},value:bu.schema().valueBlock.value}),new Nr({name:e.subjectName||Ba,idBlock:{tagClass:3,tagNumber:1},value:ys.schema().valueBlock.value})]}),ys.schema({names:{blockName:e.issuer||Ba}}),as.schema(e.signature||{}),new Rr({name:e.serialNumber||Ba}),gs.schema(e.attrCertValidityPeriod||{}),new qr({name:e.attributes||Ba,value:[new Sa({value:hs.schema()})]}),new Or({optional:!0,name:e.issuerUniqueID||Ba}),gu.schema(e.extensions||{},!0)]})}fromSchema(e){ln(e,Du);const t=Aa(e,e,Pu.schema({names:{version:Su,baseCertificateID:ku,subjectName:Au,issuer:Nu,signature:{names:{blockName:Cu}},serialNumber:Eu,attrCertValidityPeriod:{names:{blockName:Bu}},attributes:xu,issuerUniqueID:Vu,extensions:{names:{blockName:Iu}}}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,ku in t.result&&(this.baseCertificateID=new bu({schema:new qr({value:t.result.baseCertificateID.valueBlock.value})})),Au in t.result&&(this.subjectName=new ys({schema:new qr({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new as({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new gs({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new hs({schema:e}))),Vu in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),Iu in t.result&&(this.extensions=new gu({schema:t.result.extensions}))}toSchema(){const e=new qr({value:[new Rr({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new qr({value:Array.from(this.attributes,(e=>e.toSchema()))})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,(e=>e.toJSON())),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Pu.CLASS_NAME="AttributeCertificateInfoV1";const Ou="acinfo",Uu="signatureAlgorithm",_u="signatureValue",Lu=[Ou,_u,Uu];class Tu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.acinfo=Jt(e,Ou,Tu.defaultValues(Ou)),this.signatureAlgorithm=Jt(e,Uu,Tu.defaultValues(Uu)),this.signatureValue=Jt(e,_u,Tu.defaultValues(_u)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ou:return new Pu;case Uu:return new as;case _u:return new Or;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[Pu.schema(e.acinfo||{}),as.schema(e.signatureAlgorithm||{}),new Or({name:e.signatureValue||Ba})]})}fromSchema(e){ln(e,Lu);const t=Aa(e,e,Tu.schema({names:{acinfo:{names:{blockName:Ou}},signatureAlgorithm:{names:{blockName:Uu}},signatureValue:_u}}));Ia.assertSchema(t,this.className),this.acinfo=new Pu({schema:t.result.acinfo}),this.signatureAlgorithm=new as({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new qr({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}Tu.CLASS_NAME="AttributeCertificateV1";const Ru="digestedObjectType",Hu="otherObjectTypeID",Mu="digestAlgorithm",ju="objectDigest",Ku=[Ru,Hu,Mu,ju];class Fu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.digestedObjectType=Jt(e,Ru,Fu.defaultValues(Ru)),Hu in e&&(this.otherObjectTypeID=Jt(e,Hu,Fu.defaultValues(Hu))),this.digestAlgorithm=Jt(e,Mu,Fu.defaultValues(Mu)),this.objectDigest=Jt(e,ju,Fu.defaultValues(ju)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ru:return new Hr;case Hu:return new Kr;case Mu:return new as;case ju:return new Or;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Hr({name:e.digestedObjectType||Ba}),new Kr({optional:!0,name:e.otherObjectTypeID||Ba}),as.schema(e.digestAlgorithm||{}),new Or({name:e.objectDigest||Ba})]})}fromSchema(e){ln(e,Ku);const t=Aa(e,e,Fu.schema({names:{digestedObjectType:Ru,otherObjectTypeID:Hu,digestAlgorithm:{names:{blockName:Mu}},objectDigest:ju}}));Ia.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,Hu in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new as({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new qr({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}Fu.CLASS_NAME="ObjectDigestInfo";const Ju="issuerName",Wu="baseCertificateID",qu="objectDigestInfo",zu=[Ju,Wu,qu];class $u extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Ju in e&&(this.issuerName=Jt(e,Ju,$u.defaultValues(Ju))),Wu in e&&(this.baseCertificateID=Jt(e,Wu,$u.defaultValues(Wu))),qu in e&&(this.objectDigestInfo=Jt(e,qu,$u.defaultValues(qu))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ju:return new ys;case Wu:return new bu;case qu:return new Fu;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[ys.schema({names:{blockName:e.issuerName}},!0),new Nr({optional:!0,name:e.baseCertificateID||Ba,idBlock:{tagClass:3,tagNumber:0},value:bu.schema().valueBlock.value}),new Nr({optional:!0,name:e.objectDigestInfo||Ba,idBlock:{tagClass:3,tagNumber:1},value:Fu.schema().valueBlock.value})]})}fromSchema(e){ln(e,zu);const t=Aa(e,e,$u.schema({names:{issuerName:Ju,baseCertificateID:Wu,objectDigestInfo:qu}}));Ia.assertSchema(t,this.className),Ju in t.result&&(this.issuerName=new ys({schema:t.result.issuerName})),Wu in t.result&&(this.baseCertificateID=new bu({schema:new qr({value:t.result.baseCertificateID.valueBlock.value})})),qu in t.result&&(this.objectDigestInfo=new Fu({schema:new qr({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new qr;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}$u.CLASS_NAME="V2Form";const Qu="baseCertificateID",Gu="entityName",Yu="objectDigestInfo",Xu=[Qu,Gu,Yu];class Zu extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Qu in e&&(this.baseCertificateID=Jt(e,Qu,Zu.defaultValues(Qu))),Gu in e&&(this.entityName=Jt(e,Gu,Zu.defaultValues(Gu))),Yu in e&&(this.objectDigestInfo=Jt(e,Yu,Zu.defaultValues(Yu))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qu:return new bu;case Gu:return new ys;case Yu:return new Fu;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Nr({optional:!0,name:e.baseCertificateID||Ba,idBlock:{tagClass:3,tagNumber:0},value:bu.schema().valueBlock.value}),new Nr({optional:!0,name:e.entityName||Ba,idBlock:{tagClass:3,tagNumber:1},value:ys.schema().valueBlock.value}),new Nr({optional:!0,name:e.objectDigestInfo||Ba,idBlock:{tagClass:3,tagNumber:2},value:Fu.schema().valueBlock.value})]})}fromSchema(e){ln(e,Xu);const t=Aa(e,e,Zu.schema({names:{baseCertificateID:Qu,entityName:Gu,objectDigestInfo:Yu}}));Ia.assertSchema(t,this.className),Qu in t.result&&(this.baseCertificateID=new bu({schema:new qr({value:t.result.baseCertificateID.valueBlock.value})})),Gu in t.result&&(this.entityName=new ys({schema:new qr({value:t.result.entityName.valueBlock.value})})),Yu in t.result&&(this.objectDigestInfo=new Fu({schema:new qr({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new qr;return this.baseCertificateID&&e.valueBlock.value.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new Nr({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}Zu.CLASS_NAME="Holder";const ec="version",tc="holder",nc="issuer",rc="signature",ac="serialNumber",sc="attrCertValidityPeriod",ic="attributes",oc="issuerUniqueID",lc="extensions",uc=[ec,tc,nc,rc,ac,sc,ic,oc,lc];class cc extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,ec,cc.defaultValues(ec)),this.holder=Jt(e,tc,cc.defaultValues(tc)),this.issuer=Jt(e,nc,cc.defaultValues(nc)),this.signature=Jt(e,rc,cc.defaultValues(rc)),this.serialNumber=Jt(e,ac,cc.defaultValues(ac)),this.attrCertValidityPeriod=Jt(e,sc,cc.defaultValues(sc)),this.attributes=Jt(e,ic,cc.defaultValues(ic)),oc in e&&(this.issuerUniqueID=Jt(e,oc,cc.defaultValues(oc))),lc in e&&(this.extensions=Jt(e,lc,cc.defaultValues(lc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ec:return 1;case tc:return new Zu;case nc:return{};case rc:return new as;case ac:return new Rr;case sc:return new gs;case ic:return[];case oc:return new Or;case lc:return new gu;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),Zu.schema(e.holder||{}),new ba({value:[ys.schema({names:{blockName:e.issuer||Ba}}),new Nr({name:e.issuer||Ba,idBlock:{tagClass:3,tagNumber:0},value:$u.schema().valueBlock.value})]}),as.schema(e.signature||{}),new Rr({name:e.serialNumber||Ba}),gs.schema(e.attrCertValidityPeriod||{}),new qr({name:e.attributes||Ba,value:[new Sa({value:hs.schema()})]}),new Or({optional:!0,name:e.issuerUniqueID||Ba}),gu.schema(e.extensions||{},!0)]})}fromSchema(e){ln(e,uc);const t=Aa(e,e,cc.schema({names:{version:ec,holder:{names:{blockName:tc}},issuer:nc,signature:{names:{blockName:rc}},serialNumber:ac,attrCertValidityPeriod:{names:{blockName:sc}},attributes:ic,issuerUniqueID:oc,extensions:{names:{blockName:lc}}}}));if(Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new Zu({schema:t.result.holder}),3!==t.result.issuer.idBlock.tagClass)throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2");this.issuer=new $u({schema:new qr({value:t.result.issuer.valueBlock.value})}),this.signature=new as({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new gs({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new hs({schema:e}))),oc in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),lc in t.result&&(this.extensions=new gu({schema:t.result.extensions}))}toSchema(){const e=new qr({value:[new Rr({value:this.version}),this.holder.toSchema(),new Nr({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new qr({value:Array.from(this.attributes,(e=>e.toSchema()))})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,(e=>e.toJSON()))};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}cc.CLASS_NAME="AttributeCertificateInfoV2";const hc="acinfo",fc="signatureAlgorithm",mc="signatureValue",dc=[hc,fc,mc];class gc extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.acinfo=Jt(e,hc,gc.defaultValues(hc)),this.signatureAlgorithm=Jt(e,fc,gc.defaultValues(fc)),this.signatureValue=Jt(e,mc,gc.defaultValues(mc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hc:return new cc;case fc:return new as;case mc:return new Or;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[cc.schema(e.acinfo||{}),as.schema(e.signatureAlgorithm||{}),new Or({name:e.signatureValue||Ba})]})}fromSchema(e){ln(e,dc);const t=Aa(e,e,gc.schema({names:{acinfo:{names:{blockName:hc}},signatureAlgorithm:{names:{blockName:fc}},signatureValue:mc}}));Ia.assertSchema(t,this.className),this.acinfo=new cc({schema:t.result.acinfo}),this.signatureAlgorithm=new as({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new qr({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}gc.CLASS_NAME="AttributeCertificateV2";const pc="contentType",vc="content",yc=[pc,vc];class wc extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.contentType=Jt(e,pc,wc.defaultValues(pc)),this.content=Jt(e,vc,wc.defaultValues(vc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pc:return Ba;case vc:return new wa;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pc:return"string"===typeof t&&t===this.defaultValues(pc);case vc:return t instanceof wa;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return"optional"in e===!1&&(e.optional=!1),new qr({name:e.blockName||"ContentInfo",optional:e.optional,value:[new Kr({name:e.contentType||pc}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new wa({name:e.content||vc})]})]})}fromSchema(e){ln(e,yc);const t=Aa(e,e,wc.schema());Ia.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new qr({value:[new Kr({value:this.contentType}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof wa||(e.content=this.content.toJSON()),e}}wc.CLASS_NAME="ContentInfo",wc.DATA=Us,wc.SIGNED_DATA=_s,wc.ENVELOPED_DATA=Ls,wc.ENCRYPTED_DATA=Ts;const bc="type",Sc="value",kc="utcTimeName",Ac="generalTimeName",Nc=[kc,Ac];var Cc;!function(e){e[e.UTCTime=0]="UTCTime",e[e.GeneralizedTime=1]="GeneralizedTime",e[e.empty=2]="empty"}(Cc||(Cc={}));class Ec extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=Jt(e,bc,Ec.defaultValues(bc)),this.value=Jt(e,Sc,Ec.defaultValues(Sc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bc:return 0;case Sc:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ba({optional:e,value:[new fa({name:t.utcTimeName||Ba}),new ma({name:t.generalTimeName||Ba})]})}fromSchema(e){ln(e,Nc);const t=Aa(e,e,Ec.schema({names:{utcTimeName:kc,generalTimeName:Ac}}));Ia.assertSchema(t,this.className),kc in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),Ac in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return 0===this.type?new fa({valueDate:this.value}):1===this.type?new ma({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}Ec.CLASS_NAME="Time";const Bc="tbs",xc="version",Vc="serialNumber",Ic="signature",Dc="issuer",Pc="notBefore",Oc="notAfter",Uc="subject",_c="subjectPublicKeyInfo",Lc="issuerUniqueID",Tc="subjectUniqueID",Rc="extensions",Hc="signatureAlgorithm",Mc="signatureValue",jc="tbsCertificate",Kc="".concat(jc,".").concat(xc),Fc="".concat(jc,".").concat(Vc),Jc="".concat(jc,".").concat(Ic),Wc="".concat(jc,".").concat(Dc),qc="".concat(jc,".").concat(Pc),zc="".concat(jc,".").concat(Oc),$c="".concat(jc,".").concat(Uc),Qc="".concat(jc,".").concat(_c),Gc="".concat(jc,".").concat(Lc),Yc="".concat(jc,".").concat(Tc),Xc="".concat(jc,".").concat(Rc),Zc=[jc,Kc,Fc,Jc,Wc,qc,zc,$c,Qc,Gc,Yc,Xc,Hc,Mc];function eh(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||jc,value:[new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Rr({name:e.tbsCertificateVersion||Kc})]}),new Rr({name:e.tbsCertificateSerialNumber||Fc}),as.schema(e.signature||{names:{blockName:Jc}}),Ra.schema(e.issuer||{names:{blockName:Wc}}),new qr({name:e.tbsCertificateValidity||"tbsCertificate.validity",value:[Ec.schema(e.notBefore||{names:{utcTimeName:qc,generalTimeName:qc}}),Ec.schema(e.notAfter||{names:{utcTimeName:zc,generalTimeName:zc}})]}),Ra.schema(e.subject||{names:{blockName:$c}}),Do.schema(e.subjectPublicKeyInfo||{names:{blockName:Qc}}),new br({name:e.tbsCertificateIssuerUniqueID||Gc,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new br({name:e.tbsCertificateSubjectUniqueID||Yc,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[gu.schema(e.extensions||{names:{blockName:Xc}})]})]})}class th extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(Jt(e,Bc,th.defaultValues(Bc))),this.version=Jt(e,xc,th.defaultValues(xc)),this.serialNumber=Jt(e,Vc,th.defaultValues(Vc)),this.signature=Jt(e,Ic,th.defaultValues(Ic)),this.issuer=Jt(e,Dc,th.defaultValues(Dc)),this.notBefore=Jt(e,Pc,th.defaultValues(Pc)),this.notAfter=Jt(e,Oc,th.defaultValues(Oc)),this.subject=Jt(e,Uc,th.defaultValues(Uc)),this.subjectPublicKeyInfo=Jt(e,_c,th.defaultValues(_c)),Lc in e&&(this.issuerUniqueID=Jt(e,Lc,th.defaultValues(Lc))),Tc in e&&(this.subjectUniqueID=Jt(e,Tc,th.defaultValues(Tc))),Rc in e&&(this.extensions=Jt(e,Rc,th.defaultValues(Rc))),this.signatureAlgorithm=Jt(e,Hc,th.defaultValues(Hc)),this.signatureValue=Jt(e,Mc,th.defaultValues(Mc)),e.schema&&this.fromSchema(e.schema)}get tbs(){return Ft._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Bc:return Ea;case xc:return 0;case Vc:return new Rr;case Ic:return new as;case Dc:return new Ra;case Pc:case Oc:return new Ec;case Uc:return new Ra;case _c:return new Do;case Lc:case Tc:return Ea;case Rc:return[];case Hc:return new as;case Mc:return new Or;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[eh(e.tbsCertificate),as.schema(e.signatureAlgorithm||{names:{blockName:Hc}}),new Or({name:e.signatureValue||Mc})]})}fromSchema(e){ln(e,Zc);const t=Aa(e,e,th.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:Xc}}}}}}));Ia.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,Kc in t.result&&(this.version=t.result[Kc].valueBlock.valueDec),this.serialNumber=t.result[Fc],this.signature=new as({schema:t.result[Jc]}),this.issuer=new Ra({schema:t.result[Wc]}),this.notBefore=new Ec({schema:t.result[qc]}),this.notAfter=new Ec({schema:t.result[zc]}),this.subject=new Ra({schema:t.result[$c]}),this.subjectPublicKeyInfo=new Do({schema:t.result[Qc]}),Gc in t.result&&(this.issuerUniqueID=t.result[Gc].valueBlock.valueHex),Yc in t.result&&(this.subjectUniqueID=t.result[Yc].valueBlock.valueHex),Xc in t.result&&(this.extensions=Array.from(t.result[Xc],(e=>new fu({schema:e})))),this.signatureAlgorithm=new as({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return xc in this&&this.version!==th.defaultValues(xc)&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Rr({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new qr({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new br({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new br({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new qr({value:Array.from(this.extensions,(e=>e.toSchema()))})]})),new qr({value:e})}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(!this.tbsView.byteLength)return th.schema().value[0];const t=kr(this.tbsView);Ia.assert(t,"TBS Certificate"),e=t.result}else e=this.encodeTBS();return new qr({value:[e,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ft.U$.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return xc in this&&this.version!==th.defaultValues(xc)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=Ft.U$.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=Ft.U$.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}async getPublicKey(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0)).getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SHA-1";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0)).digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),a=r.parameters;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await n.signWithPrivateKey(this.tbsView,e,a);this.signatureValue=new Or({valueHex:s})}async verify(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);if(e?t=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(t=this.subjectPublicKeyInfo),!(t instanceof Do))throw new Error("Please provide issuer certificate as a parameter");return n.verifyWithPublicKey(this.tbsView,this.signatureValue,t,this.signatureAlgorithm)}}function nh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&e.issuer.isEqual(t.issuer)&&e.serialNumber.isEqual(t.serialNumber))return null;let n=!1;if(e.extensions)for(const r of e.extensions)if(r.extnID===Ss&&r.parsedValue instanceof Gs&&r.parsedValue.cA){n=!0;break}return n?e:null}th.CLASS_NAME="Certificate";const rh="certId",ah="certValue",sh="parsedValue",ih=[rh,ah];class oh extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certId=Jt(e,rh,oh.defaultValues(rh)),this.certValue=Jt(e,ah,oh.defaultValues(ah)),sh in e&&(this.parsedValue=Jt(e,sh,oh.defaultValues(sh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rh:return Ba;case ah:return new wa;case sh:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rh:return t===Ba;case ah:return t instanceof wa;case sh:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.id||"id"}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new wa({name:e.value||"value"})]})]})}fromSchema(e){ln(e,ih);const t=Aa(e,e,oh.schema({names:{id:rh,value:ah}}));Ia.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const n=this.certValue.valueBlock.valueHexView;switch(this.certId){case Rs:try{this.parsedValue=th.fromBER(n)}catch(r){gc.fromBER(n)}break;case Hs:this.parsedValue=gc.fromBER(n);break;default:throw new Error("Incorrect CERT_ID value in CertBag: ".concat(this.certId))}}toSchema(){return sh in this&&("acinfo"in this.parsedValue?this.certId=Hs:this.certId=Rs,this.certValue=new Dr({valueHex:this.parsedValue.toSchema().toBER(!1)})),new qr({value:[new Kr({value:this.certId}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}oh.CLASS_NAME="CertBag";const lh="userCertificate",uh="revocationDate",ch="crlEntryExtensions",hh=[lh,uh,ch];class fh extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.userCertificate=Jt(e,lh,fh.defaultValues(lh)),this.revocationDate=Jt(e,uh,fh.defaultValues(uh)),ch in e&&(this.crlEntryExtensions=Jt(e,ch,fh.defaultValues(ch))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lh:return new Rr;case uh:return new Ec;case ch:return new gu;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.userCertificate||lh}),Ec.schema({names:{utcTimeName:e.revocationDate||uh,generalTimeName:e.revocationDate||uh}}),gu.schema({names:{blockName:e.crlEntryExtensions||ch}},!0)]})}fromSchema(e){ln(e,hh);const t=Aa(e,e,fh.schema());Ia.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new Ec({schema:t.result.revocationDate}),ch in t.result&&(this.crlEntryExtensions=new gu({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new qr({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}fh.CLASS_NAME="RevokedCertificate";const mh="tbs",dh="version",gh="signature",ph="issuer",vh="thisUpdate",yh="nextUpdate",wh="revokedCertificates",bh="crlExtensions",Sh="signatureAlgorithm",kh="signatureValue",Ah="tbsCertList",Nh="".concat(Ah,".version"),Ch="".concat(Ah,".signature"),Eh="".concat(Ah,".issuer"),Bh="".concat(Ah,".thisUpdate"),xh="".concat(Ah,".nextUpdate"),Vh="".concat(Ah,".revokedCertificates"),Ih="".concat(Ah,".extensions"),Dh=[Ah,Nh,Ch,Eh,Bh,xh,Vh,Ih,Sh,kh];function Ph(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ah,value:[new Rr({optional:!0,name:e.tbsCertListVersion||Nh,value:2}),as.schema(e.signature||{names:{blockName:Ch}}),Ra.schema(e.issuer||{names:{blockName:Eh}}),Ec.schema(e.tbsCertListThisUpdate||{names:{utcTimeName:Bh,generalTimeName:Bh}}),Ec.schema(e.tbsCertListNextUpdate||{names:{utcTimeName:xh,generalTimeName:xh}},!0),new qr({optional:!0,value:[new Sa({name:e.tbsCertListRevokedCertificates||Vh,value:new qr({value:[new Rr,Ec.schema(),gu.schema({},!0)]})})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[gu.schema(e.crlExtensions||{names:{blockName:Ih}})]})]})}const Oh=[Is,bs,"2.5.29.20","2.5.29.27",ks,Es,Ps,"2.5.29.21","2.5.29.24",As];class Uh extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(Jt(e,mh,Uh.defaultValues(mh))),this.version=Jt(e,dh,Uh.defaultValues(dh)),this.signature=Jt(e,gh,Uh.defaultValues(gh)),this.issuer=Jt(e,ph,Uh.defaultValues(ph)),this.thisUpdate=Jt(e,vh,Uh.defaultValues(vh)),yh in e&&(this.nextUpdate=Jt(e,yh,Uh.defaultValues(yh))),wh in e&&(this.revokedCertificates=Jt(e,wh,Uh.defaultValues(wh))),bh in e&&(this.crlExtensions=Jt(e,bh,Uh.defaultValues(bh))),this.signatureAlgorithm=Jt(e,Sh,Uh.defaultValues(Sh)),this.signatureValue=Jt(e,kh,Uh.defaultValues(kh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return Ft._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case mh:return Ea;case dh:return 0;case gh:return new as;case ph:return new Ra;case vh:case yh:return new Ec;case wh:return[];case bh:return new gu;case Sh:return new as;case kh:return new Or;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Jt(e,"names",{});return new qr({name:t.blockName||"CertificateList",value:[Ph(e),as.schema(t.signatureAlgorithm||{names:{blockName:Sh}}),new Or({name:t.signatureValue||kh})]})}fromSchema(e){ln(e,Dh);const t=Aa(e,e,Uh.schema());Ia.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,Nh in t.result&&(this.version=t.result[Nh].valueBlock.valueDec),this.signature=new as({schema:t.result[Ch]}),this.issuer=new Ra({schema:t.result[Eh]}),this.thisUpdate=new Ec({schema:t.result[Bh]}),xh in t.result&&(this.nextUpdate=new Ec({schema:t.result[xh]})),Vh in t.result&&(this.revokedCertificates=Array.from(t.result[Vh],(e=>new fh({schema:e})))),Ih in t.result&&(this.crlExtensions=new gu({schema:t.result[Ih]})),this.signatureAlgorithm=new as({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==Uh.defaultValues(dh)&&e.push(new Rr({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new qr({value:Array.from(this.revokedCertificates,(e=>e.toSchema()))})),this.crlExtensions&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new qr({value:e})}toSchema(){let e;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])e=this.encodeTBS();else{if(!this.tbsView.byteLength)return Uh.schema();const t=kr(this.tbsView);Ia.assert(t,"TBS Certificate Revocation List"),e=t.result}return new qr({value:[e,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ft.U$.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==Uh.defaultValues(dh)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,(e=>e.toJSON()))),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer))return!1;if(!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),{parameters:a}=r;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await n.signWithPrivateKey(this.tbsView,e,a);this.signatureValue=new Or({valueHex:s})}async verify(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);if(t.issuerCertificate&&(e=t.issuerCertificate.subjectPublicKeyInfo,!this.issuer.isEqual(t.issuerCertificate.subject)))return!1;if(t.publicKeyInfo&&(e=t.publicKeyInfo),!e)throw new Error("Issuer's certificate must be provided as an input parameter");if(this.crlExtensions)for(const r of this.crlExtensions.extensions)if(r.critical&&!Oh.includes(r.extnID))return!1;return n.verifyWithPublicKey(this.tbsView,this.signatureValue,e,this.signatureAlgorithm)}}Uh.CLASS_NAME="CertificateRevocationList";const _h="crlId",Lh="crlValue",Th="parsedValue",Rh=[_h,Lh];class Hh extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.crlId=Jt(e,_h,Hh.defaultValues(_h)),this.crlValue=Jt(e,Lh,Hh.defaultValues(Lh)),Th in e&&(this.parsedValue=Jt(e,Th,Hh.defaultValues(Th))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _h:return Ba;case Lh:return new wa;case Th:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case _h:return t===Ba;case Lh:return t instanceof wa;case Th:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.id||"id"}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new wa({name:e.value||"value"})]})]})}fromSchema(e){ln(e,Rh);const t=Aa(e,e,Hh.schema({names:{id:_h,value:Lh}}));if(Ia.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId!==Ms)throw new Error("Incorrect CRL_ID value in CRLBag: ".concat(this.crlId));this.parsedValue=Uh.fromBER(this.certValue.valueBlock.valueHex)}toSchema(){return this.parsedValue&&(this.crlId=Ms,this.crlValue=new Dr({valueHex:this.parsedValue.toSchema().toBER(!1)})),new qr({value:[new Kr({value:this.crlId}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}Hh.CLASS_NAME="CRLBag";const Mh="version",jh="encryptedContentInfo",Kh="unprotectedAttrs",Fh=[Mh,jh,Kh];class Jh extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Mh,Jh.defaultValues(Mh)),this.encryptedContentInfo=Jt(e,jh,Jh.defaultValues(jh)),Kh in e&&(this.unprotectedAttrs=Jt(e,Kh,Jh.defaultValues(Kh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mh:return 0;case jh:return new fl;case Kh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mh:return 0===t;case jh:return fl.compareWithDefault("contentType",t.contentType)&&fl.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&fl.compareWithDefault("encryptedContent",t.encryptedContent);case Kh:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),fl.schema(e.encryptedContentInfo||{}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Sa({name:e.unprotectedAttrs||Ba,value:hs.schema()})]})]})}fromSchema(e){ln(e,Fh);const t=Aa(e,e,Jh.schema({names:{version:Mh,encryptedContentInfo:{names:{blockName:jh}},unprotectedAttrs:Kh}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new fl({schema:t.result.encryptedContentInfo}),Kh in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new hs({schema:e}))))}toSchema(){const e=[];return e.push(new Rr({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()))),e}async encrypt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);xa.assert(e,"parameters","object");const n={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await t.encryptEncryptedContentInfo(n)}async decrypt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);xa.assert(e,"parameters","object");const n={...e,encryptedContentInfo:this.encryptedContentInfo};return t.decryptEncryptedContentInfo(n)}}Jh.CLASS_NAME="EncryptedData";const Wh="encryptionAlgorithm",qh="encryptedData",zh="parsedValue",$h=[Wh,qh];class Qh extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.encryptionAlgorithm=Jt(e,Wh,Qh.defaultValues(Wh)),this.encryptedData=Jt(e,qh,Qh.defaultValues(qh)),zh in e&&(this.parsedValue=Jt(e,zh,Qh.defaultValues(zh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wh:return new as;case qh:return new Dr;case zh:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Wh:return as.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t===!1;case qh:return t.isEqual(Qh.defaultValues(e));case zh:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.encryptionAlgorithm||{names:{blockName:Wh}}),new ba({value:[new Dr({name:e.encryptedData||qh}),new Dr({idBlock:{isConstructed:!0},name:e.encryptedData||qh})]})]})}fromSchema(e){ln(e,$h);const t=Aa(e,e,Qh.schema({names:{encryptionAlgorithm:{names:{blockName:Wh}},encryptedData:qh}}));Ia.assertSchema(t,this.className),this.encryptionAlgorithm=new as({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new qr({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);const n=new Jh({encryptedContentInfo:new fl({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})}),r=await n.decrypt(e,t);this.parsedValue=ol.fromBER(r)}async makeInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);if(!this.parsedValue)throw new Error('Please initialize "parsedValue" first');const n=new Jh,r={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(!1)};if(await n.encrypt(r,t),!n.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");this.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=n.encryptedContentInfo.encryptedContent}}Qh.CLASS_NAME="PKCS8ShroudedKeyBag";const Gh="secretTypeId",Yh="secretValue",Xh=[Gh,Yh];class Zh extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.secretTypeId=Jt(e,Gh,Zh.defaultValues(Gh)),this.secretValue=Jt(e,Yh,Zh.defaultValues(Yh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Gh:return Ba;case Yh:return new wa;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Gh:return t===Ba;case Yh:return t instanceof wa;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.id||"id"}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new wa({name:e.value||"value"})]})]})}fromSchema(e){ln(e,Xh);const t=Aa(e,e,Zh.schema({names:{id:Gh,value:Yh}}));Ia.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new qr({value:[new Kr({value:this.secretTypeId}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}Zh.CLASS_NAME="SecretBag";class ef{static getItems(){return this.items||(this.items={},ef.register("1.2.840.113549.1.12.10.1.1",ol),ef.register("1.2.840.113549.1.12.10.1.2",Qh),ef.register("1.2.840.113549.1.12.10.1.3",oh),ef.register("1.2.840.113549.1.12.10.1.4",Hh),ef.register("1.2.840.113549.1.12.10.1.5",Zh),ef.register("1.2.840.113549.1.12.10.1.6",lf)),this.items}static register(e,t){this.getItems()[e]=t}static find(e){return this.getItems()[e]||null}}const tf="bagId",nf="bagValue",rf="bagAttributes",af=[tf,nf,rf];class sf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.bagId=Jt(e,tf,sf.defaultValues(tf)),this.bagValue=Jt(e,nf,sf.defaultValues(nf)),rf in e&&(this.bagAttributes=Jt(e,rf,sf.defaultValues(rf))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tf:return Ba;case nf:return new wa;case rf:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case tf:return t===Ba;case nf:return t instanceof wa;case rf:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.bagId||tf}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new wa({name:e.bagValue||nf})]}),new zr({optional:!0,value:[new Sa({name:e.bagAttributes||rf,value:hs.schema()})]})]})}fromSchema(e){ln(e,af);const t=Aa(e,e,sf.schema({names:{bagId:tf,bagValue:nf,bagAttributes:rf}}));Ia.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const n=ef.find(this.bagId);if(!n)throw new Error("Invalid BAG_ID for SafeBag: ".concat(this.bagId));this.bagValue=new n({schema:t.result.bagValue}),rf in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,(e=>new hs({schema:e}))))}toSchema(){const e=[new Kr({value:this.bagId}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new zr({value:Array.from(this.bagAttributes,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,(e=>e.toJSON()))),e}}sf.CLASS_NAME="SafeBag";const of="safeBags";class lf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.safeBags=Jt(e,of,lf.defaultValues(of)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===of?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===of?0===t.length:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.safeBags||Ba,value:sf.schema()})]})}fromSchema(e){ln(e,[of]);const t=Aa(e,e,lf.schema({names:{safeBags:of}}));Ia.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,(e=>new sf({schema:e})))}toSchema(){return new qr({value:Array.from(this.safeBags,(e=>e.toSchema()))})}toJSON(){return{safeBags:Array.from(this.safeBags,(e=>e.toJSON()))}}}lf.CLASS_NAME="SafeContents";const uf="otherCertFormat",cf="otherCert",hf=[uf,cf];class ff extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.otherCertFormat=Jt(e,uf,ff.defaultValues(uf)),this.otherCert=Jt(e,cf,ff.defaultValues(cf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uf:return Ba;case cf:return new wa;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.otherCertFormat||uf}),new wa({name:e.otherCert||cf})]})}fromSchema(e){ln(e,hf);const t=Aa(e,e,ff.schema());Ia.assertSchema(t,this.className),this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString(),this.otherCert=t.result.otherCert}toSchema(){return new qr({value:[new Kr({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof wa||(e.otherCert=this.otherCert.toJSON()),e}}const mf="certificates",df=[mf];class gf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certificates=Jt(e,mf,gf.defaultValues(mf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===mf?[]:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new zr({name:e.blockName||Ba,value:[new Sa({name:e.certificates||mf,value:new ba({value:[th.schema(),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new wa]}),new Nr({idBlock:{tagClass:3,tagNumber:1},value:[new qr]}),new Nr({idBlock:{tagClass:3,tagNumber:2},value:gc.schema().valueBlock.value}),new Nr({idBlock:{tagClass:3,tagNumber:3},value:ff.schema().valueBlock.value})]})})]})}fromSchema(e){ln(e,df);const t=Aa(e,e,gf.schema());Ia.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],(e=>{const t=e.idBlock.tagNumber;if(1===e.idBlock.tagClass)return new th({schema:e});const n=new qr({value:e.valueBlock.value});switch(t){case 1:return 1===n.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new gc({schema:n}):new Tu({schema:n});case 2:return new gc({schema:n});case 3:return new ff({schema:n})}return e}))}toSchema(){return new zr({value:Array.from(this.certificates,(e=>{switch(!0){case e instanceof th:return e.toSchema();case e instanceof Tu:return new Nr({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof gc:return new Nr({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof ff:return new Nr({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()}))})}toJSON(){return{certificates:Array.from(this.certificates,(e=>e.toJSON()))}}}gf.CLASS_NAME="CertificateSet";const pf="otherRevInfoFormat",vf="otherRevInfo",yf=[pf,vf];class wf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.otherRevInfoFormat=Jt(e,pf,wf.defaultValues(pf)),this.otherRevInfo=Jt(e,vf,wf.defaultValues(vf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pf:return Ba;case vf:return new wa;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.otherRevInfoFormat||pf}),new wa({name:e.otherRevInfo||vf})]})}fromSchema(e){ln(e,yf);const t=Aa(e,e,wf.schema());Ia.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new qr({value:[new Kr({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof wa||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}wf.CLASS_NAME="OtherRevocationInfoFormat";const bf="crls",Sf="otherRevocationInfos",kf=[bf];class Af extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.crls=Jt(e,bf,Af.defaultValues(bf)),this.otherRevocationInfos=Jt(e,Sf,Af.defaultValues(Sf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bf:case Sf:return[];default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new zr({name:e.blockName||Ba,value:[new Sa({name:e.crls||Ba,value:new ba({value:[Uh.schema(),new Nr({idBlock:{tagClass:3,tagNumber:1},value:[new Kr,new wa]})]})})]})}fromSchema(e){ln(e,kf);const t=Aa(e,e,Af.schema({names:{crls:bf}}));if(Ia.assertSchema(t,this.className),t.result.crls)for(const n of t.result.crls)1===n.idBlock.tagClass?this.crls.push(new Uh({schema:n})):this.otherRevocationInfos.push(new wf({schema:n}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,(e=>e.toSchema()))),e.push(...Array.from(this.otherRevocationInfos,(e=>{const t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new zr({value:e})}toJSON(){return{crls:Array.from(this.crls,(e=>e.toJSON())),otherRevocationInfos:Array.from(this.otherRevocationInfos,(e=>e.toJSON()))}}}Af.CLASS_NAME="RevocationInfoChoices";const Nf="certs",Cf="crls",Ef=[Nf,Cf];class Bf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.crls=Jt(e,Cf,Bf.defaultValues(Cf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nf:return new gf;case Cf:return new Af;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Nf:return 0===t.certificates.length;case Cf:return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Nr({name:e.certs||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:gf.schema().valueBlock.value}),new Nr({name:e.crls||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Af.schema().valueBlock.value})]})}fromSchema(e){ln(e,Ef);const t=Aa(e,e,Bf.schema({names:{certs:Nf,crls:Cf}}));Ia.assertSchema(t,this.className),Nf in t.result&&(this.certs=new gf({schema:new zr({value:t.result.certs.valueBlock.value})})),Cf in t.result&&(this.crls=new Af({schema:new zr({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new qr({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}Bf.CLASS_NAME="OriginatorInfo";const xf="issuer",Vf="serialNumber",If=[xf,Vf];class Df extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.issuer=Jt(e,xf,Df.defaultValues(xf)),this.serialNumber=Jt(e,Vf,Df.defaultValues(Vf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xf:return new Ra;case Vf:return new Rr;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[Ra.schema(e.issuer||{}),new Rr({name:e.serialNumber||Ba})]})}fromSchema(e){ln(e,If);const t=Aa(e,e,Df.schema({names:{issuer:{names:{blockName:xf}},serialNumber:Vf}}));Ia.assertSchema(t,this.className),this.issuer=new Ra({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new qr({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}Df.CLASS_NAME="IssuerAndSerialNumber";const Pf="variant",Of="value",Uf=["blockName"];class _f extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=Jt(e,Pf,_f.defaultValues(Pf)),Of in e&&(this.value=Jt(e,Of,_f.defaultValues(Of))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pf:return-1;case Of:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Pf:return-1===t;case Of:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ba({value:[Df.schema({names:{blockName:e.blockName||Ba}}),new br({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){ln(e,Uf);const t=Aa(e,e,_f.schema({names:{blockName:"blockName"}}));Ia.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Df({schema:t.result.blockName})):(this.variant=2,this.value=new Dr({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Df))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof Dr))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new br({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new wa}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||!this.value||(e.value=this.value.toJSON()),e}}_f.CLASS_NAME="RecipientIdentifier";const Lf="version",Tf="rid",Rf="keyEncryptionAlgorithm",Hf="encryptedKey",Mf="recipientCertificate",jf=[Lf,Tf,Rf,Hf];class Kf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Lf,Kf.defaultValues(Lf)),this.rid=Jt(e,Tf,Kf.defaultValues(Tf)),this.keyEncryptionAlgorithm=Jt(e,Rf,Kf.defaultValues(Rf)),this.encryptedKey=Jt(e,Hf,Kf.defaultValues(Hf)),this.recipientCertificate=Jt(e,Mf,Kf.defaultValues(Mf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Lf:return-1;case Tf:return{};case Rf:return new as;case Hf:return new Dr;case Mf:return new th;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Lf:return t===Kf.defaultValues(Lf);case Tf:return 0===Object.keys(t).length;case Rf:case Hf:return t.isEqual(Kf.defaultValues(e));case Mf:return!1;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),_f.schema(e.rid||{}),as.schema(e.keyEncryptionAlgorithm||{}),new Dr({name:e.encryptedKey||Ba})]})}fromSchema(e){ln(e,jf);const t=Aa(e,e,Kf.schema({names:{version:Lf,rid:{names:{blockName:Tf}},keyEncryptionAlgorithm:{names:{blockName:Rf}},encryptedKey:Hf}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,3===t.result.rid.idBlock.tagClass?this.rid=new Dr({valueHex:t.result.rid.valueBlock.valueHex}):this.rid=new Df({schema:t.result.rid}),this.keyEncryptionAlgorithm=new as({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Df?(this.version=0,e.push(new Rr({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new Rr({value:this.version})),e.push(new br({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new qr({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Kf.CLASS_NAME="KeyTransRecipientInfo";const Ff="algorithm",Jf="publicKey",Wf=[Ff,Jf];class qf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.algorithm=Jt(e,Ff,qf.defaultValues(Ff)),this.publicKey=Jt(e,Jf,qf.defaultValues(Jf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ff:return new as;case Jf:return new Or;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ff:case Jf:return t.isEqual(qf.defaultValues(e));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.algorithm||{}),new Or({name:e.publicKey||Ba})]})}fromSchema(e){ln(e,Wf);const t=Aa(e,e,qf.schema({names:{algorithm:{names:{blockName:Ff}},publicKey:Jf}}));Ia.assertSchema(t,this.className),this.algorithm=new as({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new qr({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}qf.CLASS_NAME="OriginatorPublicKey";const zf="variant",$f="value",Qf=["blockName"];class Gf extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=Jt(e,zf,Gf.defaultValues(zf)),$f in e&&(this.value=Jt(e,$f,Gf.defaultValues($f))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zf:return-1;case $f:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zf:return-1===t;case $f:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ba({value:[Df.schema({names:{blockName:e.blockName||Ba}}),new br({idBlock:{tagClass:3,tagNumber:0},name:e.blockName||Ba}),new Nr({idBlock:{tagClass:3,tagNumber:1},name:e.blockName||Ba,value:qf.schema().valueBlock.value})]})}fromSchema(e){ln(e,Qf);const t=Aa(e,e,Gf.schema({names:{blockName:"blockName"}}));Ia.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Df({schema:t.result.blockName})):0===t.result.blockName.idBlock.tagNumber?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new qf({schema:new qr({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new wa}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}Gf.CLASS_NAME="OriginatorIdentifierOrKey";const Yf="keyAttrId",Xf="keyAttr",Zf=[Yf,Xf];class em extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyAttrId=Jt(e,Yf,em.defaultValues(Yf)),Xf in e&&(this.keyAttr=Jt(e,Xf,em.defaultValues(Xf))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yf:return Ba;case Xf:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yf:return"string"===typeof t&&t===Ba;case Xf:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({optional:e.optional||!0,name:e.blockName||Ba,value:[new Kr({name:e.keyAttrId||Ba}),new wa({optional:!0,name:e.keyAttr||Ba})]})}fromSchema(e){ln(e,Zf);const t=Aa(e,e,em.schema({names:{keyAttrId:Yf,keyAttr:Xf}}));Ia.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),Xf in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new Kr({value:this.keyAttrId})),Xf in this&&e.push(this.keyAttr),new qr({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return Xf in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}em.CLASS_NAME="OtherKeyAttribute";const tm="subjectKeyIdentifier",nm="date",rm="other",am=[tm,nm,rm];class sm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.subjectKeyIdentifier=Jt(e,tm,sm.defaultValues(tm)),nm in e&&(this.date=Jt(e,nm,sm.defaultValues(nm))),rm in e&&(this.other=Jt(e,rm,sm.defaultValues(rm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tm:return new Dr;case nm:return new ma;case rm:return new em;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case tm:return t.isEqual(sm.defaultValues(tm));case nm:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case rm:return t.keyAttrId===Ba&&"keyAttr"in t===!1;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Dr({name:e.subjectKeyIdentifier||Ba}),new ma({optional:!0,name:e.date||Ba}),em.schema(e.other||{})]})}fromSchema(e){ln(e,am);const t=Aa(e,e,sm.schema({names:{subjectKeyIdentifier:tm,date:nm,other:{names:{blockName:rm}}}}));Ia.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,nm in t.result&&(this.date=t.result.date),rm in t.result&&(this.other=new em({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new qr({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}sm.CLASS_NAME="RecipientKeyIdentifier";const im="variant",om="value",lm=["blockName"];class um extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=Jt(e,im,um.defaultValues(im)),this.value=Jt(e,om,um.defaultValues(om)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case im:return-1;case om:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case im:return-1===t;case om:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ba({value:[Df.schema(e.issuerAndSerialNumber||{names:{blockName:e.blockName||Ba}}),new Nr({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:0},value:sm.schema(e.rKeyId||{names:{blockName:e.blockName||Ba}}).valueBlock.value})]})}fromSchema(e){ln(e,lm);const t=Aa(e,e,um.schema({names:{blockName:"blockName"}}));Ia.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Df({schema:t.result.blockName})):(this.variant=2,this.value=new sm({schema:new qr({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new Nr({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new wa}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}um.CLASS_NAME="KeyAgreeRecipientIdentifier";const cm="rid",hm="encryptedKey",fm=[cm,hm];class mm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.rid=Jt(e,cm,mm.defaultValues(cm)),this.encryptedKey=Jt(e,hm,mm.defaultValues(hm)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cm:return new um;case hm:return new Dr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case cm:return-1===t.variant&&"value"in t===!1;case hm:return t.isEqual(mm.defaultValues(hm));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[um.schema(e.rid||{}),new Dr({name:e.encryptedKey||Ba})]})}fromSchema(e){ln(e,fm);const t=Aa(e,e,mm.schema({names:{rid:{names:{blockName:cm}},encryptedKey:hm}}));Ia.assertSchema(t,this.className),this.rid=new um({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new qr({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}mm.CLASS_NAME="RecipientEncryptedKey";const dm="encryptedKeys",gm="RecipientEncryptedKeys",pm=[gm];class vm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.encryptedKeys=Jt(e,dm,vm.defaultValues(dm)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===dm?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===dm?0===t.length:super.defaultValues(e)}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.RecipientEncryptedKeys||Ba,value:mm.schema()})]})}fromSchema(e){ln(e,pm);const t=Aa(e,e,vm.schema({names:{RecipientEncryptedKeys:gm}}));Ia.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,(e=>new mm({schema:e})))}toSchema(){return new qr({value:Array.from(this.encryptedKeys,(e=>e.toSchema()))})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,(e=>e.toJSON()))}}}vm.CLASS_NAME="RecipientEncryptedKeys";const ym="version",wm="originator",bm="ukm",Sm="keyEncryptionAlgorithm",km="recipientEncryptedKeys",Am="recipientCertificate",Nm="recipientPublicKey",Cm=[ym,wm,bm,Sm,km];class Em extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,ym,Em.defaultValues(ym)),this.originator=Jt(e,wm,Em.defaultValues(wm)),bm in e&&(this.ukm=Jt(e,bm,Em.defaultValues(bm))),this.keyEncryptionAlgorithm=Jt(e,Sm,Em.defaultValues(Sm)),this.recipientEncryptedKeys=Jt(e,km,Em.defaultValues(km)),this.recipientCertificate=Jt(e,Am,Em.defaultValues(Am)),this.recipientPublicKey=Jt(e,Nm,Em.defaultValues(Nm)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ym:return 0;case wm:return new Gf;case bm:return new Dr;case Sm:return new as;case km:return new vm;case Am:return new th;case Nm:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ym:return 0===t;case wm:return-1===t.variant&&"value"in t===!1;case bm:return t.isEqual(Em.defaultValues(bm));case Sm:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case km:return 0===t.encryptedKeys.length;case Am:case Nm:return!1;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),new Nr({idBlock:{tagClass:3,tagNumber:0},value:[Gf.schema(e.originator||{})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Dr({name:e.ukm||Ba})]}),as.schema(e.keyEncryptionAlgorithm||{}),vm.schema(e.recipientEncryptedKeys||{})]})}fromSchema(e){ln(e,Cm);const t=Aa(e,e,Em.schema({names:{version:ym,originator:{names:{blockName:wm}},ukm:bm,keyEncryptionAlgorithm:{names:{blockName:Sm}},recipientEncryptedKeys:{names:{blockName:km}}}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new Gf({schema:t.result.originator}),bm in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new as({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new vm({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new Rr({value:this.version})),e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new qr({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}Em.CLASS_NAME="KeyAgreeRecipientInfo";const Bm="keyIdentifier",xm="date",Vm="other",Im=[Bm,xm,Vm];class Dm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyIdentifier=Jt(e,Bm,Dm.defaultValues(Bm)),xm in e&&(this.date=Jt(e,xm,Dm.defaultValues(xm))),Vm in e&&(this.other=Jt(e,Vm,Dm.defaultValues(Vm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bm:return new Dr;case xm:return new ma;case Vm:return new em;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Bm:return t.isEqual(Dm.defaultValues(Bm));case xm:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case Vm:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&"keyAttr"in t===!1;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Dr({name:e.keyIdentifier||Ba}),new ma({optional:!0,name:e.date||Ba}),em.schema(e.other||{})]})}fromSchema(e){ln(e,Im);const t=Aa(e,e,Dm.schema({names:{keyIdentifier:Bm,date:xm,other:{names:{blockName:Vm}}}}));Ia.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,xm in t.result&&(this.date=t.result.date),Vm in t.result&&(this.other=new em({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new qr({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}Dm.CLASS_NAME="KEKIdentifier";const Pm="version",Om="kekid",Um="keyEncryptionAlgorithm",_m="encryptedKey",Lm="preDefinedKEK",Tm=[Pm,Om,Um,_m];class Rm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Pm,Rm.defaultValues(Pm)),this.kekid=Jt(e,Om,Rm.defaultValues(Om)),this.keyEncryptionAlgorithm=Jt(e,Um,Rm.defaultValues(Um)),this.encryptedKey=Jt(e,_m,Rm.defaultValues(_m)),this.preDefinedKEK=Jt(e,Lm,Rm.defaultValues(Lm)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pm:return 0;case Om:return new Dm;case Um:return new as;case _m:return new Dr;case Lm:return Ea;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===Rm.defaultValues(Pm);case Om:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&"date"in t===!1&&"other"in t===!1;case Um:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case _m:return t.isEqual(Rm.defaultValues(_m));case Lm:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),Dm.schema(e.kekid||{}),as.schema(e.keyEncryptionAlgorithm||{}),new Dr({name:e.encryptedKey||Ba})]})}fromSchema(e){ln(e,Tm);const t=Aa(e,e,Rm.schema({names:{version:Pm,kekid:{names:{blockName:Om}},keyEncryptionAlgorithm:{names:{blockName:Um}},encryptedKey:_m}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new Dm({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new as({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new qr({value:[new Rr({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Rm.CLASS_NAME="KEKRecipientInfo";const Hm="version",Mm="keyDerivationAlgorithm",jm="keyEncryptionAlgorithm",Km="encryptedKey",Fm="password",Jm=[Hm,Mm,jm,Km];class Wm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Hm,Wm.defaultValues(Hm)),Mm in e&&(this.keyDerivationAlgorithm=Jt(e,Mm,Wm.defaultValues(Mm))),this.keyEncryptionAlgorithm=Jt(e,jm,Wm.defaultValues(jm)),this.encryptedKey=Jt(e,Km,Wm.defaultValues(Km)),this.password=Jt(e,Fm,Wm.defaultValues(Fm)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hm:return-1;case Mm:case jm:return new as;case Km:return new Dr;case Fm:return Ea;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Hm:return-1===t;case Mm:case jm:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case Km:return t.isEqual(Wm.defaultValues(Km));case Fm:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),new Nr({name:e.keyDerivationAlgorithm||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:as.schema().valueBlock.value}),as.schema(e.keyEncryptionAlgorithm||{}),new Dr({name:e.encryptedKey||Ba})]})}fromSchema(e){ln(e,Jm);const t=Aa(e,e,Wm.schema({names:{version:Hm,keyDerivationAlgorithm:Mm,keyEncryptionAlgorithm:{names:{blockName:jm}},encryptedKey:Km}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Mm in t.result&&(this.keyDerivationAlgorithm=new as({schema:new qr({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new as({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new Rr({value:this.version})),this.keyDerivationAlgorithm&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new qr({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}Wm.CLASS_NAME="PasswordRecipientInfo";const qm="oriType",zm="oriValue",$m=[qm,zm];class Qm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.oriType=Jt(e,qm,Qm.defaultValues(qm)),this.oriValue=Jt(e,zm,Qm.defaultValues(zm)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qm:return Ba;case zm:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case qm:return t===Ba;case zm:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.oriType||Ba}),new wa({name:e.oriValue||Ba})]})}fromSchema(e){ln(e,$m);const t=Aa(e,e,Qm.schema({names:{oriType:qm,oriValue:zm}}));Ia.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new qr({value:[new Kr({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return Qm.compareWithDefault(zm,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}Qm.CLASS_NAME="OtherRecipientInfo";const Gm="variant",Ym="value",Xm=["blockName"];class Zm extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=Jt(e,Gm,Zm.defaultValues(Gm)),Ym in e&&(this.value=Jt(e,Ym,Zm.defaultValues(Ym))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Gm:return-1;case Ym:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Gm:return t===Zm.defaultValues(e);case Ym:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ba({value:[Kf.schema({names:{blockName:e.blockName||Ba}}),new Nr({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:1},value:Em.schema().valueBlock.value}),new Nr({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:2},value:Rm.schema().valueBlock.value}),new Nr({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:3},value:Wm.schema().valueBlock.value}),new Nr({name:e.blockName||Ba,idBlock:{tagClass:3,tagNumber:4},value:Qm.schema().valueBlock.value})]})}fromSchema(e){ln(e,Xm);const t=Aa(e,e,Zm.schema({names:{blockName:"blockName"}}));if(Ia.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass)this.variant=1,this.value=new Kf({schema:t.result.blockName});else{const e=new qr({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new Em({schema:e});break;case 2:this.variant=3,this.value=new Rm({schema:e});break;case 3:this.variant=4,this.value=new Wm({schema:e});break;case 4:this.variant=5,this.value=new Qm({schema:e});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){Va.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new wa}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}Zm.CLASS_NAME="RecipientInfo";const ed="hashAlgorithm",td="maskGenAlgorithm",nd="pSourceAlgorithm",rd=[ed,td,nd];class ad extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=Jt(e,ed,ad.defaultValues(ed)),this.maskGenAlgorithm=Jt(e,td,ad.defaultValues(td)),this.pSourceAlgorithm=Jt(e,nd,ad.defaultValues(nd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ed:return new as({algorithmId:"1.3.14.3.2.26",algorithmParams:new Br});case td:return new as({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new as({algorithmId:"1.3.14.3.2.26",algorithmParams:new Br}).toSchema()});case nd:return new as({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new Dr({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Nr({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[as.schema(e.hashAlgorithm||{})]}),new Nr({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[as.schema(e.maskGenAlgorithm||{})]}),new Nr({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[as.schema(e.pSourceAlgorithm||{})]})]})}fromSchema(e){ln(e,rd);const t=Aa(e,e,ad.schema({names:{hashAlgorithm:{names:{blockName:ed}},maskGenAlgorithm:{names:{blockName:td}},pSourceAlgorithm:{names:{blockName:nd}}}}));Ia.assertSchema(t,this.className),ed in t.result&&(this.hashAlgorithm=new as({schema:t.result.hashAlgorithm})),td in t.result&&(this.maskGenAlgorithm=new as({schema:t.result.maskGenAlgorithm})),nd in t.result&&(this.pSourceAlgorithm=new as({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(ad.defaultValues(ed))||e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(ad.defaultValues(td))||e.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(ad.defaultValues(nd))||e.push(new Nr({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new qr({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(ad.defaultValues(ed))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(ad.defaultValues(td))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(ad.defaultValues(nd))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}ad.CLASS_NAME="RSAESOAEPParams";const sd="keyInfo",id="entityUInfo",od="suppPubInfo",ld=[sd,id,od];class ud extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyInfo=Jt(e,sd,ud.defaultValues(sd)),id in e&&(this.entityUInfo=Jt(e,id,ud.defaultValues(id))),this.suppPubInfo=Jt(e,od,ud.defaultValues(od)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sd:return new as;case id:case od:return new Dr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case sd:case id:case od:return t.isEqual(ud.defaultValues(e));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.keyInfo||{}),new Nr({name:e.entityUInfo||Ba,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new Dr]}),new Nr({name:e.suppPubInfo||Ba,idBlock:{tagClass:3,tagNumber:2},value:[new Dr]})]})}fromSchema(e){ln(e,ld);const t=Aa(e,e,ud.schema({names:{keyInfo:{names:{blockName:sd}},entityUInfo:id,suppPubInfo:od}}));Ia.assertSchema(t,this.className),this.keyInfo=new as({schema:t.result.keyInfo}),id in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new Nr({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new qr({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}ud.CLASS_NAME="ECCCMSSharedInfo";const cd="version",hd="originatorInfo",fd="recipientInfos",md="encryptedContentInfo",dd="unprotectedAttrs",gd=[cd,hd,fd,md,dd],pd={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},vd={"P-256":256,"P-384":384,"P-521":528};class yd extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,cd,yd.defaultValues(cd)),hd in e&&(this.originatorInfo=Jt(e,hd,yd.defaultValues(hd))),this.recipientInfos=Jt(e,fd,yd.defaultValues(fd)),this.encryptedContentInfo=Jt(e,md,yd.defaultValues(md)),dd in e&&(this.unprotectedAttrs=Jt(e,dd,yd.defaultValues(dd))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cd:return 0;case hd:return new Bf;case fd:return[];case md:return new fl;case dd:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case cd:return t===yd.defaultValues(e);case hd:return 0===t.certs.certificates.length&&0===t.crls.crls.length;case fd:case dd:return 0===t.length;case md:return fl.compareWithDefault("contentType",t.contentType)&&fl.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&fl.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Ba}),new Nr({name:e.originatorInfo||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Bf.schema().valueBlock.value}),new zr({value:[new Sa({name:e.recipientInfos||Ba,value:Zm.schema()})]}),fl.schema(e.encryptedContentInfo||{}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Sa({name:e.unprotectedAttrs||Ba,value:hs.schema()})]})]})}fromSchema(e){ln(e,gd);const t=Aa(e,e,yd.schema({names:{version:cd,originatorInfo:hd,recipientInfos:fd,encryptedContentInfo:{names:{blockName:md}},unprotectedAttrs:dd}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,hd in t.result&&(this.originatorInfo=new Bf({schema:new qr({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,(e=>new Zm({schema:e}))),this.encryptedContentInfo=new fl({schema:t.result.encryptedContentInfo}),dd in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new hs({schema:e}))))}toSchema(){const e=[];return e.push(new Rr({value:this.version})),this.originatorInfo&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new zr({value:Array.from(this.recipientInfos,(e=>e.toSchema()))})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,(e=>e.toJSON())),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()))),e}addRecipientByCertificate(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ll(!0);const a=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},pd,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))n=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error("Unknown type of certificate's public key: ".concat(e.subjectPublicKeyInfo.algorithm.algorithmId));n=2}switch(n){case 1:{let t,n;if(!0===a.useOAEP){t=r.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const e=r.getOIDByAlgorithm({name:a.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),s=new as({algorithmId:e,algorithmParams:new Br});n=new ad({hashAlgorithm:s,maskGenAlgorithm:new as({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:s.toSchema()})}).toSchema()}else{if(t=r.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),t===Ba)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");n=new Br}const s=new Kf({version:0,rid:new Df({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new as({algorithmId:t,algorithmParams:n}),recipientCertificate:e});this.recipientInfos.push(new Zm({variant:1,value:s}))}break;case 2:{const t=new um({variant:1,value:new Df({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(t,a,{recipientCertificate:e},r)}break;default:throw new Error('Unknown "variant" value: '.concat(n))}return!0}addRecipientByPreDefinedData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ll(!0);if(xa.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const e=new ArrayBuffer(16),n=new Uint8Array(e);r.getRandomValues(n),t.keyIdentifier=e}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),void 0===t.iterationCount&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new Br),n){case 1:{const n=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),a=new Rm({version:4,kekid:new Dm({keyIdentifier:new Dr({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new as({algorithmId:n,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new Zm({variant:3,value:a}))}break;case 2:{const n=r.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),a=new ArrayBuffer(64),s=new Uint8Array(a);r.getRandomValues(s);const i=r.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),o=new Nl({salt:new Dr({valueHex:a}),iterationCount:t.iterationCount,prf:new as({algorithmId:i,algorithmParams:new Br})}),l=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),u=new Wm({version:0,keyDerivationAlgorithm:new as({algorithmId:n,algorithmParams:o.toSchema()}),keyEncryptionAlgorithm:new as({algorithmId:l,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new Zm({variant:4,value:u}))}break;default:throw new Error('Unknown value for "variant": '.concat(n))}}addRecipientByKeyIdentifier(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ll(!0);const a=Object.assign({},pd,n||{}),s=new um({variant:2,value:new sm({subjectKeyIdentifier:new Dr({valueHex:t})})});this._addKeyAgreeRecipientInfo(s,a,{recipientPublicKey:e},r)}_addKeyAgreeRecipientInfo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ll(!0);const a=new mm({rid:e}),s=r.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),i=new as({algorithmId:s}),o=r.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),l=new ArrayBuffer(64),u=new Uint8Array(l);r.getRandomValues(u);const c={version:3,ukm:new Dr({valueHex:l}),keyEncryptionAlgorithm:new as({algorithmId:o,algorithmParams:i.toSchema()}),recipientEncryptedKeys:new vm({encryptedKeys:[a]})},h=new Em(Object.assign(c,n));this.recipientInfos.push(new Zm({variant:2,value:h}))}async encrypt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const r=new ArrayBuffer(16),a=new Uint8Array(r);n.getRandomValues(a);const s=new Uint8Array(t),i=n.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),o=await n.generateKey(e,!0,["encrypt"]),l=await n.encrypt({name:e.name,iv:a},o,s),u=await n.exportKey("raw",o);this.version=2,this.encryptedContentInfo=new fl({disableSplit:this.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new as({algorithmId:i,algorithmParams:new Dr({valueHex:r})}),encryptedContent:new Dr({valueHex:l})});const c=async e=>{const t=this.recipientInfos[e].value;let r,a;if(t.recipientPublicKey)r=t.recipientPublicKey.algorithm.namedCurve,a=t.recipientPublicKey;else{if(!t.recipientCertificate)throw new Error("Unsupported RecipientInfo");{const s=t.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(s.constructor.blockName()!==Kr.blockName())throw new Error('Incorrect "recipientCertificate" for index '.concat(e));switch(s.valueBlock.toString()){case"1.2.840.10045.3.1.7":r="P-256";break;case"1.3.132.0.34":r="P-384";break;case"1.3.132.0.35":r="P-521";break;default:throw new Error("Incorrect curve OID for index ".concat(e))}a=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:r},usages:[]}},n)}}const s=vd[r],i=await n.generateKey({name:"ECDH",namedCurve:r},!0,["deriveBits"]),l=await n.exportKey("spki",i.publicKey),u=await n.deriveBits({name:"ECDH",public:a},i.privateKey,s),c=new as({schema:t.keyEncryptionAlgorithm.algorithmParams}),h=n.getAlgorithmByOID(c.algorithmId,!0,"aesKWAlgorithm");let f=h.length;const m=new ArrayBuffer(4),d=new Uint8Array(m);for(let n=3;n>=0;n--)d[n]=f,f>>=8;const g=new ud({keyInfo:new as({algorithmId:c.algorithmId}),entityUInfo:t.ukm,suppPubInfo:new Dr({valueHex:m})}).toSchema().toBER(!1),p=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),v=await Rl(p.kdf,u,h.length,g,n),y=await n.importKey("raw",v,{name:"AES-KW"},!0,["wrapKey"]),w=await n.wrapKey("raw",o,y,{name:"AES-KW"}),b=new Gf;return b.variant=3,b.value=qf.fromBER(l),t.originator=b,t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new Dr({valueHex:w}),{ecdhPrivateKey:i.privateKey}},h=async e=>{const t=this.recipientInfos[e].value,r=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===r.name){const e=t.keyEncryptionAlgorithm.algorithmParams,a=new ad({schema:e});if(r.hash=n.getAlgorithmByOID(a.hashAlgorithm.algorithmId),"name"in r.hash===!1)throw new Error("Incorrect OID for hash algorithm: ".concat(a.hashAlgorithm.algorithmId))}try{const e=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:r,usages:["encrypt","wrapKey"]}},n),a=await n.encrypt(e.algorithm,e,u);t.encryptedKey=new Dr({valueHex:a})}catch{}},f=async e=>{const t=this.recipientInfos[e].value,r=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),a=await n.importKey("raw",new Uint8Array(t.preDefinedKEK),r,!0,["wrapKey"]),s=await n.wrapKey("raw",o,a,r);t.encryptedKey=new Dr({valueHex:s})},m=async e=>{const t=this.recipientInfos[e].value;let r;if(!t.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!t.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new Nl({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(m){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const a=new Uint8Array(t.password),s=await n.importKey("raw",a,"PBKDF2",!1,["deriveKey"]),i=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let l="SHA-1";if(r.prf){l=n.getAlgorithmByOID(r.prf.algorithmId,!0,"prfAlgorithm").hash.name}const u=new Uint8Array(r.salt.valueBlock.valueHex),c=r.iterationCount,h=await n.deriveKey({name:"PBKDF2",hash:{name:l},salt:u,iterations:c},s,i,!0,["wrapKey"]),f=await n.wrapKey("raw",o,h,i);t.encryptedKey=new Dr({valueHex:f})},d=[];for(let g=0;g<this.recipientInfos.length;g++)switch(this.recipientInfos[g].variant){case 1:d.push(await h(g));break;case 2:d.push(await c(g));break;case 3:d.push(await f(g));break;case 4:d.push(await m(g));break;default:throw new Error("Unknown recipient type in array with index ".concat(g))}return d}async decrypt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const r=t||{};if(e+1>this.recipientInfos.length)throw new Error('Maximum value for "index" is: '.concat(this.recipientInfos.length-1));const a=async e=>{const t=this.recipientInfos[e].value;let a,s,i;const o=t.originator;if(r.recipientCertificate){const t=r.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t.constructor.blockName()!==Kr.blockName())throw new Error('Incorrect "recipientCertificate" for index '.concat(e));a=t.valueBlock.toString()}else{if(!o.value.algorithm.algorithmParams)throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');{const t=o.value.algorithm.algorithmParams;if(t.constructor.blockName()!==Kr.blockName())throw new Error("Incorrect originator for index ".concat(e));a=t.valueBlock.toString()}}if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(a){case"1.2.840.10045.3.1.7":s="P-256",i=256;break;case"1.3.132.0.34":s="P-384",i=384;break;case"1.3.132.0.35":s="P-521",i=528;break;default:throw new Error("Incorrect curve OID for index ".concat(e))}let l,u=n;Ft._H.isBufferSource(r.recipientPrivateKey)?l=await n.importKey("pkcs8",r.recipientPrivateKey,{name:"ECDH",namedCurve:s},!0,["deriveBits"]):(l=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(u=r.crypto.subtle)),"algorithmParams"in o.value.algorithm===!1&&(o.value.algorithm.algorithmParams=new Kr({value:a}));const c=o.value.toSchema().toBER(!1),h=await n.importKey("spki",c,{name:"ECDH",namedCurve:s},!0,[]),f=await u.deriveBits({name:"ECDH",public:h},l,i);async function m(e){e=e||!1;const r=new as({schema:t.keyEncryptionAlgorithm.algorithmParams}),a=n.getAlgorithmByOID(r.algorithmId,!0,"kwAlgorithm");let s=a.length;const i=new ArrayBuffer(4),o=new Uint8Array(i);for(let t=3;t>=0;t--)o[t]=s,s>>=8;const l={algorithmId:r.algorithmId};e&&(l.algorithmParams=new Br);const u=new ud({keyInfo:new as(l),entityUInfo:t.ukm,suppPubInfo:new Dr({valueHex:i})}).toSchema().toBER(!1),c=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!c.name)throw new Error("Incorrect OID for key encryption algorithm: ".concat(t.keyEncryptionAlgorithm.algorithmId));return Rl(c.kdf,f,a.length,u,n)}const d=await m(),g=async e=>n.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"]),p=await g(d),v=async e=>{const r=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,a=n.getAlgorithmByOID(r,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,e,{name:"AES-KW"},a,!0,["decrypt"])};try{return await v(p)}catch{const e=await m(!0);return v(await g(e))}},s=async e=>{const t=this.recipientInfos[e].value;if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const a=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===a.name){const e=t.keyEncryptionAlgorithm.algorithmParams,r=new ad({schema:e});if(a.hash=n.getAlgorithmByOID(r.hashAlgorithm.algorithmId),"name"in a.hash===!1)throw new Error("Incorrect OID for hash algorithm: ".concat(r.hashAlgorithm.algorithmId))}let s,i=n;Ft._H.isBufferSource(r.recipientPrivateKey)?s=await n.importKey("pkcs8",r.recipientPrivateKey,a,!0,["decrypt"]):(s=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(i=r.crypto.subtle));const o=await i.decrypt(s.algorithm,s,t.encryptedKey.valueBlock.valueHexView),l=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,u=n.getAlgorithmByOID(l,!0,"contentEncryptionAlgorithm");if("name"in u===!1)throw new Error('Incorrect "contentEncryptionAlgorithm": '.concat(l));return n.importKey("raw",o,u,!0,["decrypt"])},i=async e=>{const t=this.recipientInfos[e].value;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const a=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),s=await n.importKey("raw",r.preDefinedData,a,!0,["unwrapKey"]),i=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,o=n.getAlgorithmByOID(i,!0,"contentEncryptionAlgorithm");if(!o.name)throw new Error('Incorrect "contentEncryptionAlgorithm": '.concat(i));return n.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,s,a,o,!0,["decrypt"])},o=async e=>{const t=this.recipientInfos[e].value;let a;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!t.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!t.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{a=new Nl({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(m){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const s=await n.importKey("raw",r.preDefinedData,"PBKDF2",!1,["deriveKey"]),i=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),o=a.prf?n.getAlgorithmByOID(a.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",l=new Uint8Array(a.salt.valueBlock.valueHex),u=a.iterationCount,c=await n.deriveKey({name:"PBKDF2",hash:{name:o},salt:l,iterations:u},s,i,!0,["unwrapKey"]),h=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,f=n.getAlgorithmByOID(h,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,c,i,f,!0,["decrypt"])};let l;switch(this.recipientInfos[e].variant){case 1:l=await s(e);break;case 2:l=await a(e);break;case 3:l=await i(e);break;case 4:l=await o(e);break;default:throw new Error("Unknown recipient type in array with index ".concat(e))}const u=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,c=n.getAlgorithmByOID(u,!0,"contentEncryptionAlgorithm"),h=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,f=new Uint8Array(h);if(!this.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const m=this.encryptedContentInfo.getEncryptedContent();return n.decrypt({name:c.name,iv:f},l,m)}}yd.CLASS_NAME="EnvelopedData";const wd="safeContents",bd="parsedValue",Sd="contentInfos";class kd extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.safeContents=Jt(e,wd,kd.defaultValues(wd)),bd in e&&(this.parsedValue=Jt(e,bd,kd.defaultValues(bd))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wd:return[];case bd:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wd:return 0===t.length;case bd:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Sa({name:e.contentInfos||Ba,value:wc.schema()})]})}fromSchema(e){ln(e,[Sd]);const t=Aa(e,e,kd.schema({names:{contentInfos:Sd}}));Ia.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,(e=>new wc({schema:e})))}toSchema(){return new qr({value:Array.from(this.safeContents,(e=>e.toSchema()))})}toJSON(){return{safeContents:Array.from(this.safeContents,(e=>e.toJSON()))}}async parseInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);if(Va.assert(e,wd),xa.assert(e.safeContents,wd,"Array"),e.safeContents.length!==this.safeContents.length)throw new xa('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');this.parsedValue={safeContents:[]};for(const[n,r]of this.safeContents.entries()){const a=e.safeContents[n],s="parameters.safeContents[".concat(n,"]");switch(r.contentType){case Us:{xa.assert(r.content,"this.safeContents[j].content",Dr);const e=r.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:lf.fromBER(e)})}break;case Ls:{const e=new yd({schema:r.content});Va.assert(s,a,"recipientCertificate","recipientKey");const n=a,i=n.recipientCertificate,o=n.recipientKey,l=await e.decrypt(0,{recipientCertificate:i,recipientPrivateKey:o},t);this.parsedValue.safeContents.push({privacyMode:2,value:lf.fromBER(l)})}break;case Ts:{const e=new Jh({schema:r.content});Va.assert(s,a,"password");const n=a.password,i=await e.decrypt({password:n},t);this.parsedValue.safeContents.push({privacyMode:1,value:lf.fromBER(i)})}break;default:throw new Error('Unknown "contentType" for AuthenticatedSafe: " '.concat(r.contentType))}}}async makeInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);if(!this.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(xa.assert(this.parsedValue,"this.parsedValue","object"),xa.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),xa.assert(e,"parameters","object"),Va.assert(e,"safeContents"),xa.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==this.parsedValue.safeContents.length)throw new xa('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');this.safeContents=[];for(const[n,r]of this.parsedValue.safeContents.entries())switch(Va.assert("content",r,"privacyMode","value"),xa.assert(r.value,"content.value",lf),r.privacyMode){case 0:{const e=r.value.toSchema().toBER(!1);this.safeContents.push(new wc({contentType:"1.2.840.113549.1.7.1",content:new Dr({valueHex:e})}))}break;case 1:{const a=new Jh,s=e.safeContents[n];s.contentToEncrypt=r.value.toSchema().toBER(!1),await a.encrypt(s,t),this.safeContents.push(new wc({contentType:"1.2.840.113549.1.7.6",content:a.toSchema()}))}break;case 2:{const a=new yd,s=r.value.toSchema().toBER(!1),i=e.safeContents[n];switch(Va.assert("parameters.safeContents[".concat(n,"]"),i,"encryptingCertificate","encryptionAlgorithm"),!0){case"aes-cbc"===i.encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===i.encryptionAlgorithm.name.toLowerCase():break;default:throw new Error('Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": '.concat(i.encryptionAlgorithm))}switch(!0){case 128===i.encryptionAlgorithm.length:case 192===i.encryptionAlgorithm.length:case 256===i.encryptionAlgorithm.length:break;default:throw new Error('Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": '.concat(i.encryptionAlgorithm.length))}const o=i.encryptionAlgorithm;a.addRecipientByCertificate(i.encryptingCertificate,{},void 0,t),await a.encrypt(o,s,t),this.safeContents.push(new wc({contentType:"1.2.840.113549.1.7.3",content:a.toSchema()}))}break;default:throw new Error('Incorrect value for "content.privacyMode": '.concat(r.privacyMode))}return this}}kd.CLASS_NAME="AuthenticatedSafe";const Ad="hashAlgorithm",Nd="issuerNameHash",Cd="issuerKeyHash",Ed="serialNumber",Bd=[Ad,Nd,Cd,Ed];class xd extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=Jt(e,Ad,xd.defaultValues(Ad)),this.issuerNameHash=Jt(e,Nd,xd.defaultValues(Nd)),this.issuerKeyHash=Jt(e,Cd,xd.defaultValues(Cd)),this.serialNumber=Jt(e,Ed,xd.defaultValues(Ed)),e.schema&&this.fromSchema(e.schema)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const r=new xd;return await r.createForCertificate(e,t,n),r}static defaultValues(e){switch(e){case Ad:return new as;case Nd:case Cd:return new Dr;case Ed:return new Rr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ad:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case Nd:case Cd:case Ed:return t.isEqual(xd.defaultValues(Ed));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.hashAlgorithmObject||{names:{blockName:e.hashAlgorithm||Ba}}),new Dr({name:e.issuerNameHash||Ba}),new Dr({name:e.issuerKeyHash||Ba}),new Rr({name:e.serialNumber||Ba})]})}fromSchema(e){ln(e,Bd);const t=Aa(e,e,xd.schema({names:{hashAlgorithm:Ad,issuerNameHash:Nd,issuerKeyHash:Cd,serialNumber:Ed}}));Ia.assertSchema(t,this.className),this.hashAlgorithm=new as({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new qr({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return this.hashAlgorithm.algorithmId===e.hashAlgorithm.algorithmId&&(!!Ft._H.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)&&(!!Ft._H.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)&&!!this.serialNumber.isEqual(e.serialNumber)))}async createForCertificate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);Va.assert(t,Ad,"issuerCertificate");const r=n.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");this.hashAlgorithm=new as({algorithmId:r,algorithmParams:new Br});const a=t.issuerCertificate;this.serialNumber=e.serialNumber;const s=await n.digest({name:t.hashAlgorithm},a.subject.toSchema().toBER(!1));this.issuerNameHash=new Dr({valueHex:s});const i=a.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,o=await n.digest({name:t.hashAlgorithm},i);this.issuerKeyHash=new Dr({valueHex:o})}}xd.CLASS_NAME="CertID";const Vd="certID",Id="certStatus",Dd="thisUpdate",Pd="nextUpdate",Od="singleExtensions",Ud=[Vd,Id,Dd,Pd,Od];class _d extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certID=Jt(e,Vd,_d.defaultValues(Vd)),this.certStatus=Jt(e,Id,_d.defaultValues(Id)),this.thisUpdate=Jt(e,Dd,_d.defaultValues(Dd)),Pd in e&&(this.nextUpdate=Jt(e,Pd,_d.defaultValues(Pd))),Od in e&&(this.singleExtensions=Jt(e,Od,_d.defaultValues(Od))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Vd:return new xd;case Id:return{};case Dd:case Pd:return new Date(0,0,0);case Od:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Vd:return xd.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&xd.compareWithDefault("issuerNameHash",t.issuerNameHash)&&xd.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&xd.compareWithDefault("serialNumber",t.serialNumber);case Id:return 0===Object.keys(t).length;case Dd:case Pd:return t===_d.defaultValues(e);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[xd.schema(e.certID||{}),new ba({value:[new br({name:e.certStatus||Ba,idBlock:{tagClass:3,tagNumber:0}}),new Nr({name:e.certStatus||Ba,idBlock:{tagClass:3,tagNumber:1},value:[new ma,new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Hr]})]}),new br({name:e.certStatus||Ba,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new ma({name:e.thisUpdate||Ba}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ma({name:e.nextUpdate||Ba})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[gu.schema(e.singleExtensions||{})]})]})}fromSchema(e){ln(e,Ud);const t=Aa(e,e,_d.schema({names:{certID:{names:{blockName:Vd}},certStatus:Id,thisUpdate:Dd,nextUpdate:Pd,singleExtensions:{names:{blockName:Od}}}}));Ia.assertSchema(t,this.className),this.certID=new xd({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),Pd in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),Od in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,(e=>new fu({schema:e}))))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new ma({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new ma({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new qr({value:Array.from(this.singleExtensions,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,(e=>e.toJSON()))),e}}_d.CLASS_NAME="SingleResponse";const Ld="tbs",Td="version",Rd="responderID",Hd="producedAt",Md="responses",jd="responseExtensions",Kd="ResponseData",Fd="".concat(Kd,".").concat(Td),Jd="".concat(Kd,".").concat(Rd),Wd="".concat(Kd,".").concat(Hd),qd="".concat(Kd,".").concat(Md),zd="".concat(Kd,".").concat(jd),$d=[Kd,Fd,Jd,Wd,qd,zd];class Qd extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(Jt(e,Ld,Qd.defaultValues(Ld))),Td in e&&(this.version=Jt(e,Td,Qd.defaultValues(Td))),this.responderID=Jt(e,Rd,Qd.defaultValues(Rd)),this.producedAt=Jt(e,Hd,Qd.defaultValues(Hd)),this.responses=Jt(e,Md,Qd.defaultValues(Md)),jd in e&&(this.responseExtensions=Jt(e,jd,Qd.defaultValues(jd))),e.schema&&this.fromSchema(e.schema)}get tbs(){return Ft._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Td:return 0;case Ld:return Ea;case Rd:return{};case Hd:return new Date(0,0,0);case Md:case jd:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ld:return 0===t.byteLength;case Rd:return 0===Object.keys(t).length;case Hd:return t===Qd.defaultValues(e);case Md:case jd:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Kd,value:[new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Rr({name:e.version||Fd})]}),new ba({value:[new Nr({name:e.responderID||Jd,idBlock:{tagClass:3,tagNumber:1},value:[Ra.schema(e.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new Nr({name:e.responderID||Jd,idBlock:{tagClass:3,tagNumber:2},value:[new Dr({name:e.ResponseDataByKey||"ResponseData.byKey"})]})]}),new ma({name:e.producedAt||Wd}),new qr({value:[new Sa({name:qd,value:_d.schema(e.response||{})})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[gu.schema(e.extensions||{names:{blockName:zd}})]})]})}fromSchema(e){ln(e,$d);const t=Aa(e,e,Qd.schema());Ia.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Fd in t.result&&(this.version=t.result[Fd].valueBlock.valueDec),1===t.result[Jd].idBlock.tagNumber?this.responderID=new Ra({schema:t.result[Jd].valueBlock.value[0]}):this.responderID=t.result[Jd].valueBlock.value[0],this.producedAt=t.result[Wd].toDate(),this.responses=Array.from(t.result[qd],(e=>new _d({schema:e}))),zd in t.result&&(this.responseExtensions=Array.from(t.result[zd].valueBlock.value,(e=>new fu({schema:e}))))}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(!this.tbsView.byteLength)return Qd.schema();const t=kr(this.tbsView);Ia.assert(t,"TBS Response Data"),e=t.result}else{const t=[];Td in this&&t.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new Rr({value:this.version})]})),this.responderID instanceof Ra?t.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):t.push(new Nr({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),t.push(new ma({valueDate:this.producedAt})),t.push(new qr({value:Array.from(this.responses,(e=>e.toSchema()))})),this.responseExtensions&&t.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:[new qr({value:Array.from(this.responseExtensions,(e=>e.toSchema()))})]})),e=new qr({value:t})}return e}toJSON(){const e={};return Td in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,(e=>e.toJSON()))),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,(e=>e.toJSON()))),e}}Qd.CLASS_NAME="ResponseData";const Gd="trustedCerts",Yd="certs",Xd="crls",Zd="ocsps",eg="checkDate",tg="findOrigin",ng="findIssuer";var rg;!function(e){e[e.unknown=-1]="unknown",e[e.success=0]="success",e[e.noRevocation=11]="noRevocation",e[e.noPath=60]="noPath",e[e.noValidPath=97]="noValidPath"}(rg||(rg={}));class ag extends Error{constructor(e,t){super(t),this.name=ag.NAME,this.code=e,this.message=t}}ag.NAME="ChainValidationError";class sg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trustedCerts=Jt(e,Gd,this.defaultValues(Gd)),this.certs=Jt(e,Yd,this.defaultValues(Yd)),this.crls=Jt(e,Xd,this.defaultValues(Xd)),this.ocsps=Jt(e,Zd,this.defaultValues(Zd)),this.checkDate=Jt(e,eg,this.defaultValues(eg)),this.findOrigin=Jt(e,tg,this.defaultValues(tg)),this.findIssuer=Jt(e,ng,this.defaultValues(ng))}static defaultFindOrigin(e,t){0===e.tbsView.byteLength&&(e.tbsView=new Uint8Array(e.encodeTBS().toBER()));for(const n of t.certs)if(0===n.tbsView.byteLength&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),Ft._H.isEqual(e.tbsView,n.tbsView))return"Intermediate Certificates";for(const n of t.trustedCerts)if(0===n.tbsView.byteLength&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),Ft._H.isEqual(e.tbsView,n.tbsView))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const r=[];let a=null,s=null,i=null;if(e.subject.isEqual(e.issuer))try{if(await e.verify(void 0,n))return[e]}catch(l){}if(e.extensions)for(const u of e.extensions)if(u.extnID===Is&&u.parsedValue instanceof zs){u.parsedValue.keyIdentifier?a=u.parsedValue.keyIdentifier:(u.parsedValue.authorityCertIssuer&&(s=u.parsedValue.authorityCertIssuer),u.parsedValue.authorityCertSerialNumber&&(i=u.parsedValue.authorityCertSerialNumber));break}function o(t){if(null!==a&&t.extensions){let e=!1;for(const n of t.extensions)if("2.5.29.14"===n.extnID&&n.parsedValue){e=!0,Ft._H.isEqual(n.parsedValue.valueBlock.valueHex,a.valueBlock.valueHexView)&&r.push(t);break}if(e)return}let n=!1;null!==i&&(n=t.serialNumber.isEqual(i)),null!==s?t.subject.isEqual(s)&&n&&r.push(t):e.issuer.isEqual(t.subject)&&r.push(t)}for(const u of t.trustedCerts)o(u);for(const u of t.certs)o(u);for(let u=r.length-1;u>=0;u--)try{!1===await e.verify(r[u],n)&&r.splice(u,1)}catch(l){r.splice(u,1)}return r}defaultValues(e){switch(e){case Gd:case Yd:case Xd:case Zd:return[];case eg:return new Date;case tg:return sg.defaultFindOrigin;case ng:return this.defaultFindIssuer;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: ".concat(e))}}async sort(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);const n=[],r=async(e,t)=>{const n=[];function a(e){let t=!0;for(let n=0;n<e.length;n++){for(let r=0;r<e.length;r++)if(r!==n&&e[n]===e[r]){t=!1;break}if(!t)break}return t}if(function(e,t){for(let n=0;n<t.length;n++)if(Ft._H.isEqual(e.tbsView,t[n].tbsView))return!0;return!1}(e,this.trustedCerts))return[[e]];const s=await this.findIssuer(e,this,t);if(0===s.length)throw new Error("No valid certificate paths found");for(let i=0;i<s.length;i++){if(Ft._H.isEqual(s[i].tbsView,e.tbsView)){n.push([s[i]]);continue}const o=await r(s[i],t);for(let e=0;e<o.length;e++){const t=o[e].slice();t.splice(0,0,s[i]),a(t)?n.push(t):n.push(o[e])}}return n},a=async e=>{const r=[],a=[],s=[];if(r.push(...n.filter((t=>e.issuer.isEqual(t.subject)))),0===r.length)return{status:1,statusMessage:"No certificate's issuers"};if(a.push(...this.crls.filter((t=>t.issuer.isEqual(e.issuer)))),0===a.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let n=0;n<a.length;n++){const e=a[n];if(!(e.nextUpdate&&e.nextUpdate.value<this.checkDate))for(let o=0;o<r.length;o++)try{if(await a[n].verify({issuerCertificate:r[o]},t)){s.push({crl:a[n],certificate:r[o]});break}}catch(i){}}return s.length?{status:0,statusMessage:Ba,result:s}:{status:3,statusMessage:"No valid CRLs found"}},s=async(e,n)=>{const r=t.getAlgorithmByOID(e.signatureAlgorithm.algorithmId);if(!r.name)return 1;if(!r.hash)return 1;for(let a=0;a<this.ocsps.length;a++){const r=this.ocsps[a],s=await r.getCertificateStatus(e,n,t);if(s.isForCertificate)return 0===s.status?0:1}return 2};async function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1,r=!1,a=!1,s=!1;if(e.extensions){for(let t=0;t<e.extensions.length;t++){const i=e.extensions[t];if(i.critical&&!i.parsedValue)return{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: ".concat(i.extnID)};if("2.5.29.15"===i.extnID){a=!0;const e=new Uint8Array(i.parsedValue.valueBlock.valueHex);4===(4&e[0])&&(r=!0),2===(2&e[0])&&(s=!0)}i.extnID===Ss&&"cA"in i.parsedValue&&!0===i.parsedValue.cA&&(n=!0)}if(!0===r&&!1===n)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(!0===a&&!0===n&&!1===r)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===n&&!0===a&&t&&!1===s)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===n?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:Ba}}n.push(...this.trustedCerts),n.push(...this.certs);for(let f=0;f<n.length;f++)for(let e=0;e<n.length;e++)if(f!==e&&Ft._H.isEqual(n[f].tbsView,n[e].tbsView)){n.splice(e,1),f=0;break}const o=n[n.length-1];let l;const u=[o];if(l=await r(o,t),0===l.length)throw new ag(rg.noPath,"Unable to find certificate path");for(let f=l.length-1;f>=0;f--){let e=!1;for(let t=0;t<l[f].length;t++){const n=l[f][t];for(let t=0;t<this.trustedCerts.length;t++)if(Ft._H.isEqual(n.tbsView,this.trustedCerts[t].tbsView)){e=!0;break}if(e)break}e||l.splice(f,1)}if(0===l.length)throw new ag(rg.noValidPath,"No valid certificate paths found");let c=l[0].length,h=0;for(let f=0;f<l.length;f++)l[f].length<c&&(c=l[f].length,h=f);for(let f=0;f<l[h].length;f++)u.push(l[h][f]);if(l=await(async(t,n)=>{for(let e=0;e<t.length;e++)if(t[e].notBefore.value>n||t[e].notAfter.value<n)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(t.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let e=t.length-2;e>=0;e--)if(!1===t[e].issuer.isEqual(t[e].subject)&&!1===t[e].issuer.isEqual(t[e+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==this.crls.length||0!==this.ocsps.length)for(let r=0;r<t.length-1;r++){let n=2,o={status:0,statusMessage:Ba};if(0!==this.ocsps.length)switch(n=await s(t[r],t[r+1]),n){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==this.crls.length){if(o=await a(t[r]),0===o.status&&o.result)for(let e=0;e<o.result.length;e++){if(o.result[e].crl.isCertificateRevoked(t[r]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(await i(o.result[e].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===e)throw new ag(rg.noRevocation,"No revocation values found for one of certificates: ".concat(o.statusMessage))}else if(2===n)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===n&&2===o.status&&e){const e=t[r+1];let n=!1;if(e.extensions)for(const t of e.extensions)switch(t.extnID){case Cs:case Es:case Ps:n=!0}if(n)throw new ag(rg.noRevocation,"No revocation values found for one of certificates: ".concat(o.statusMessage))}}for(const[e,r]of t.entries()){if(!e)continue;if(!(await i(r)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"}}return{result:!0}})(u,this.checkDate),!1===l.result)throw l;return u}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);function n(e,t){const n=Pa(e),r=Pa(t),a=n.split("."),s=r.split("."),i=a.length,o=s.length;if(0===i||0===o||i<o)return!1;for(let l=0;l<i;l++)if(0===a[l].length)return!1;for(let l=0;l<o;l++)if(0===s[l].length){if(0===l){if(1===o)return!1;continue}return!1}for(let l=0;l<o;l++)if(0!==s[o-1-l].length&&0!==a[i-1-l].localeCompare(s[o-1-l]))return!1;return!0}function r(e,t){const r=Pa(e),a=Pa(t),s=r.split("@"),i=a.split("@");if(0===s.length||0===i.length||s.length<i.length)return!1;if(1===i.length){if(n(s[1],i[0])){const e=s[1].split("."),t=i[0].split(".");return 0===t[0].length||e.length===t.length}return!1}return 0===r.localeCompare(a)}function a(e,t){let r=Pa(e);const a=Pa(t),s=r.split("/");if(a.split("/").length>1)return!1;if(s.length>1)for(let n=0;n<s.length;n++)if(s[n].length>0&&":"!==s[n].charAt(s[n].length-1)){r=s[n].split(":")[0];break}if(n(r,a)){const e=r.split("."),t=a.split(".");return 0===t[0].length||e.length===t.length}return!1}function s(e,t){const n=e.valueBlock.valueHexView,r=t.valueBlock.valueHexView;if(4===n.length&&8===r.length){for(let e=0;e<4;e++)if((n[e]^r[e])&r[e+4])return!1;return!0}if(16===n.length&&32===r.length){for(let e=0;e<16;e++)if((n[e]^r[e])&r[e+16])return!1;return!0}return!1}function i(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;let n=!0,r=0;for(let a=0;a<t.typesAndValues.length;a++){let s=!1;for(let i=r;i<e.typesAndValues.length;i++)if(s=e.typesAndValues[i].isEqual(t.typesAndValues[a]),e.typesAndValues[i].type===t.typesAndValues[a].type&&(n=n&&s),!0===s){if(0===r||r===i){r=i+1;break}return!1}if(!1===s)return!1}return 0!==r&&n}try{if(0===this.certs.length)throw new Error("Empty certificate array");const o=e.passedWhenNotRevValues||!1,l=e.initialPolicySet||[xs],u=e.initialExplicitPolicy||!1,c=e.initialPolicyMappingInhibit||!1,h=e.initialInhibitPolicy||!1,f=e.initialPermittedSubtreesSet||[],m=e.initialExcludedSubtreesSet||[],d=e.initialRequiredNameForms||[];let g=u,p=c,v=h;const y=[!1,!1,!1];let w=0,b=0,S=0,k=f,A=m;const N=d;let C=1;this.certs=await this.sort(o,t);const E=[];E.push(xs);const B=[],x=new Array(this.certs.length-1);for(let e=0;e<this.certs.length-1;e++)x[e]=!0;B.push(x);const V=new Array(this.certs.length-1),I=new Array(this.certs.length-1);let D=g?this.certs.length-1:-1;for(let e=this.certs.length-2;e>=0;e--,C++){const t=this.certs[e];if(t.extensions){for(let n=0;n<t.extensions.length;n++){const r=t.extensions[n];if(r.extnID===Bs){I[e]=r.parsedValue;for(let t=0;t<E.length;t++)if(E[t]===xs){delete B[t][e];break}for(let t=0;t<r.parsedValue.certificatePolicies.length;t++){let n=-1;const a=r.parsedValue.certificatePolicies[t].policyIdentifier;for(let e=0;e<E.length;e++)if(a===E[e]){n=e;break}if(-1===n){E.push(a);const t=new Array(this.certs.length-1);t[e]=!0,B.push(t)}else B[n][e]=!0}}if(r.extnID===Vs){if(p)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};V[e]=r.parsedValue}r.extnID===Ds&&!1===g&&(0===r.parsedValue.requireExplicitPolicy?(g=!0,D=e):!1===y[0]?(y[0]=!0,w=r.parsedValue.requireExplicitPolicy):w=w>r.parsedValue.requireExplicitPolicy?r.parsedValue.requireExplicitPolicy:w,0===r.parsedValue.inhibitPolicyMapping?p=!0:!1===y[1]?(y[1]=!0,b=r.parsedValue.inhibitPolicyMapping+1):b=b>r.parsedValue.inhibitPolicyMapping+1?r.parsedValue.inhibitPolicyMapping+1:b),"2.5.29.54"===r.extnID&&!1===v&&(0===r.parsedValue.valueBlock.valueDec?v=!0:!1===y[2]?(y[2]=!0,S=r.parsedValue.valueBlock.valueDec):S=S>r.parsedValue.valueBlock.valueDec?r.parsedValue.valueBlock.valueDec:S)}if(!0===v){let t=-1;for(let e=0;e<E.length;e++)if(E[e]===xs){t=e;break}-1!==t&&delete B[0][e]}!1===g&&!0===y[0]&&(w--,0===w&&(g=!0,D=e,y[0]=!1)),!1===p&&!0===y[1]&&(b--,0===b&&(p=!0,y[1]=!1)),!1===v&&!0===y[2]&&(S--,0===S&&(v=!0,y[2]=!1))}}for(let e=0;e<this.certs.length-1;e++)if(e<this.certs.length-2&&"undefined"!==typeof V[e+1])for(let t=0;t<V[e+1].mappings.length;t++){if(V[e+1].mappings[t].issuerDomainPolicy===xs||V[e+1].mappings[t].subjectDomainPolicy===xs)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let n=-1,r=-1;for(let a=0;a<E.length;a++)E[a]===V[e+1].mappings[t].issuerDomainPolicy&&(n=a),E[a]===V[e+1].mappings[t].subjectDomainPolicy&&(r=a);"undefined"!==typeof B[n][e]&&delete B[n][e];for(let a=0;a<I[e].certificatePolicies.length;a++)if(V[e+1].mappings[t].subjectDomainPolicy===I[e].certificatePolicies[a].policyIdentifier&&-1!==n&&-1!==r)for(let t=0;t<=e;t++)"undefined"!==typeof B[r][t]&&(B[n][t]=!0,delete B[r][t])}for(let e=0;e<E.length;e++)if(E[e]===xs)for(let t=0;t<D;t++)delete B[e][t];const P=[];for(let e=0;e<B.length;e++){let t=!0;for(let n=0;n<this.certs.length-1;n++){let r=!1;if(n<D&&E[e]===xs&&E.length>1){t=!1;break}if("undefined"===typeof B[e][n]){if(n>=D)for(let e=0;e<E.length;e++)if(E[e]===xs){!0===B[e][n]&&(r=!0);break}if(!r){t=!1;break}}}!0===t&&P.push(E[e])}let O=[];if(1===l.length&&l[0]===xs&&!1===g)O=l;else if(1===P.length&&P[0]===xs)O=l;else for(let e=0;e<P.length;e++)for(let t=0;t<l.length;t++)if(l[t]===P[e]||l[t]===xs){O.push(P[e]);break}const U={result:O.length>0,resultCode:0,resultMessage:O.length>0?Ba:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:P,userConstrPolicies:O,explicitPolicyIndicator:g,policyMappings:V,certificatePath:this.certs};if(0===O.length)return U;if(!1===U.result)return U;C=1;for(let e=this.certs.length-2;e>=0;e--,C++){const t=this.certs[e];let o=[],l=[],u=[];if(t.extensions)for(let e=0;e<t.extensions.length;e++){const n=t.extensions[e];n.extnID===Ns&&("permittedSubtrees"in n.parsedValue&&(l=l.concat(n.parsedValue.permittedSubtrees)),"excludedSubtrees"in n.parsedValue&&(u=u.concat(n.parsedValue.excludedSubtrees))),n.extnID===ws&&(o=o.concat(n.parsedValue.altNames))}let c=N.length<=0;for(let e=0;e<N.length;e++)switch(N[e].base.type){case 4:if(N[e].base.value.typesAndValues.length!==t.subject.typesAndValues.length)continue;c=!0;for(let n=0;n<t.subject.typesAndValues.length;n++)if(t.subject.typesAndValues[n].type!==N[e].base.value.typesAndValues[n].type){c=!1;break}if(!0===c)break}if(!1===c)throw U.result=!1,U.resultCode=21,U.resultMessage="No necessary name form found",U;const h=[[],[],[],[],[]];for(let e=0;e<k.length;e++)switch(k[e].base.type){case 1:h[0].push(k[e]);break;case 2:h[1].push(k[e]);break;case 4:h[2].push(k[e]);break;case 6:h[3].push(k[e]);break;case 7:h[4].push(k[e])}for(let e=0;e<5;e++){let l=!1,u=!1;const c=h[e];for(let h=0;h<c.length;h++){switch(e){case 0:if(o.length>0)for(let e=0;e<o.length;e++)1===o[e].type&&(u=!0,l=l||r(o[e].value,c[h].base.value));else for(let e=0;e<t.subject.typesAndValues.length;e++)"1.2.840.113549.1.9.1"!==t.subject.typesAndValues[e].type&&"0.9.2342.19200300.100.1.3"!==t.subject.typesAndValues[e].type||(u=!0,l=l||r(t.subject.typesAndValues[e].value.valueBlock.value,c[h].base.value));break;case 1:if(o.length>0)for(let e=0;e<o.length;e++)2===o[e].type&&(u=!0,l=l||n(o[e].value,c[h].base.value));break;case 2:u=!0,l=i(t.subject,c[h].base.value);break;case 3:if(o.length>0)for(let e=0;e<o.length;e++)6===o[e].type&&(u=!0,l=l||a(o[e].value,c[h].base.value));break;case 4:if(o.length>0)for(let e=0;e<o.length;e++)7===o[e].type&&(u=!0,l=l||s(o[e].value,c[h].base.value))}if(l)break}if(!1===l&&c.length>0&&u)throw U.result=!1,U.resultCode=41,U.resultMessage='Failed to meet "permitted sub-trees" name constraint',U}let f=!1;for(let e=0;e<A.length;e++){switch(A[e].base.type){case 1:if(o.length>=0)for(let t=0;t<o.length;t++)1===o[t].type&&(f=f||r(o[t].value,A[e].base.value));else for(let n=0;n<t.subject.typesAndValues.length;n++)"1.2.840.113549.1.9.1"!==t.subject.typesAndValues[n].type&&"0.9.2342.19200300.100.1.3"!==t.subject.typesAndValues[n].type||(f=f||r(t.subject.typesAndValues[n].value.valueBlock.value,A[e].base.value));break;case 2:if(o.length>0)for(let t=0;t<o.length;t++)2===o[t].type&&(f=f||n(o[t].value,A[e].base.value));break;case 4:f=f||i(t.subject,A[e].base.value);break;case 6:if(o.length>0)for(let t=0;t<o.length;t++)6===o[t].type&&(f=f||a(o[t].value,A[e].base.value));break;case 7:if(o.length>0)for(let t=0;t<o.length;t++)7===o[t].type&&(f=f||s(o[t].value,A[e].base.value))}if(f)break}if(!0===f)throw U.result=!1,U.resultCode=42,U.resultMessage='Failed to meet "excluded sub-trees" name constraint',U;k=k.concat(l),A=A.concat(u)}return U}catch(o){return o instanceof Error?o instanceof ag?{result:!1,resultCode:o.code,resultMessage:o.message,error:o}:{result:!1,resultCode:rg.unknown,resultMessage:o.message,error:o}:o&&"object"===typeof o&&"resultMessage"in o?o:{result:!1,resultCode:-1,resultMessage:"".concat(o)}}}}const ig="tbsResponseData",og="signatureAlgorithm",lg="signature",ug="certs",cg="BasicOCSPResponse",hg="".concat(cg,".").concat(ig),fg="".concat(cg,".").concat(og),mg="".concat(cg,".").concat(lg),dg="".concat(cg,".").concat(ug),gg=[hg,fg,mg,dg];class pg extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsResponseData=Jt(e,ig,pg.defaultValues(ig)),this.signatureAlgorithm=Jt(e,og,pg.defaultValues(og)),this.signature=Jt(e,lg,pg.defaultValues(lg)),ug in e&&(this.certs=Jt(e,ug,pg.defaultValues(ug))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ig:return new Qd;case og:return new as;case lg:return new Or;case ug:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let e=Qd.compareWithDefault("tbs",t.tbs)&&Qd.compareWithDefault("responderID",t.responderID)&&Qd.compareWithDefault("producedAt",t.producedAt)&&Qd.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(e=e&&Qd.compareWithDefault("responseExtensions",t.responseExtensions)),e}case og:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case lg:return t.isEqual(pg.defaultValues(e));case ug:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||cg,value:[Qd.schema(e.tbsResponseData||{names:{blockName:hg}}),as.schema(e.signatureAlgorithm||{names:{blockName:fg}}),new Or({name:e.signature||mg}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new qr({value:[new Sa({name:dg,value:th.schema(e.certs||{})})]})]})]})}fromSchema(e){ln(e,gg);const t=Aa(e,e,pg.schema());Ia.assertSchema(t,this.className),this.tbsResponseData=new Qd({schema:t.result[hg]}),this.signatureAlgorithm=new as({schema:t.result[fg]}),this.signature=t.result[mg],dg in t.result&&(this.certs=Array.from(t.result[dg],(e=>new th({schema:e}))))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new qr({value:Array.from(this.certs,(e=>e.toSchema()))})]})),new qr({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,(e=>e.toJSON()))),e}async getCertificateStatus(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const r={isForCertificate:!1,status:2},a={},s=[];for(const o of this.tbsResponseData.responses){const r=n.getAlgorithmByOID(o.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!a[r.name]){a[r.name]=1;const i=new xd;s.push(i),await i.createForCertificate(e,{hashAlgorithm:r.name,issuerCertificate:t},n)}}for(const o of this.tbsResponseData.responses)for(const e of s)if(o.certID.isEqual(e)){r.isForCertificate=!0;try{switch(o.certStatus.idBlock.isConstructed){case!0:1===o.certStatus.idBlock.tagNumber&&(r.status=1);break;case!1:switch(o.certStatus.idBlock.tagNumber){case 0:r.status=0;break;case 2:r.status=2}}}catch(i){}return r}return r}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),a=r.parameters.algorithm;if(!("name"in a))throw new Error("Empty algorithm");this.signatureAlgorithm=r.signatureAlgorithm,this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(!0).toBER());const s=await n.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:a});this.signature=new Or({valueHex:s})}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0),n=null,r=-1;const a=e.trustedCerts||[];if(!this.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case this.tbsResponseData.responderID instanceof Ra:for(const[e,t]of this.certs.entries())if(t.subject.isEqual(this.tbsResponseData.responderID)){r=e;break}break;case this.tbsResponseData.responderID instanceof Dr:for(const[e,n]of this.certs.entries()){if(Yt(await t.digest({name:"sha-1"},n.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),this.tbsResponseData.responderID.valueBlock.valueHex)){r=e;break}}break;default:throw new Error("Wrong value for responderID")}if(-1===r)throw new Error("Correct certificate was not found in OCSP response");n=this.certs[r];const s=[n];for(const o of this.certs){const e=await nh(o,n);e&&s.push(e)}const i=new sg({certs:s,trustedCerts:a});if(!(await i.verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[r].subjectPublicKeyInfo,this.signatureAlgorithm)}}pg.CLASS_NAME="BasicOCSPResponse";const vg="tbs",yg="version",wg="subject",bg="subjectPublicKeyInfo",Sg="attributes",kg="signatureAlgorithm",Ag="signatureValue",Ng="CertificationRequestInfo",Cg="".concat(Ng,".version"),Eg="".concat(Ng,".subject"),Bg="".concat(Ng,".subjectPublicKeyInfo"),xg="".concat(Ng,".attributes"),Vg=[Ng,Cg,Eg,Bg,xg,kg,Ag];function Ig(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.CertificationRequestInfo||Ng,value:[new Rr({name:e.CertificationRequestInfoVersion||Cg}),Ra.schema(e.subject||{names:{blockName:Eg}}),Do.schema({names:{blockName:Bg}}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Sa({optional:!0,name:e.CertificationRequestInfoAttributes||xg,value:hs.schema(e.attributes||{})})]})]})}class Dg extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(Jt(e,vg,Dg.defaultValues(vg))),this.version=Jt(e,yg,Dg.defaultValues(yg)),this.subject=Jt(e,wg,Dg.defaultValues(wg)),this.subjectPublicKeyInfo=Jt(e,bg,Dg.defaultValues(bg)),Sg in e&&(this.attributes=Jt(e,Sg,Dg.defaultValues(Sg))),this.signatureAlgorithm=Jt(e,kg,Dg.defaultValues(kg)),this.signatureValue=Jt(e,Ag,Dg.defaultValues(Ag)),e.schema&&this.fromSchema(e.schema)}get tbs(){return Ft._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case vg:return Ea;case yg:return 0;case wg:return new Ra;case bg:return new Do;case Sg:return[];case kg:return new as;case Ag:return new Or;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({value:[Ig(e.certificationRequestInfo||{}),new qr({name:e.signatureAlgorithm||kg,value:[new Kr,new wa({optional:!0})]}),new Or({name:e.signatureValue||Ag})]})}fromSchema(e){ln(e,Vg);const t=Aa(e,e,Dg.schema());Ia.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[Cg].valueBlock.valueDec,this.subject=new Ra({schema:t.result[Eg]}),this.subjectPublicKeyInfo=new Do({schema:t.result[Bg]}),xg in t.result&&(this.attributes=Array.from(t.result[xg],(e=>new hs({schema:e})))),this.signatureAlgorithm=new as({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new Rr({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return Sg in this&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],(e=>e.toSchema()))})),new qr({value:e})}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbsView.byteLength)return Dg.schema();const t=kr(this.tbsView);Ia.assert(t,"PKCS#10 Certificate Request"),e=t.result}else e=this.encodeTBS();return new qr({value:[e,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ft.U$.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Sg in this&&(e.attributes=Array.from(this.attributes||[],(e=>e.toJSON()))),e}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),a=r.parameters;this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await n.signWithPrivateKey(this.tbsView,e,a);this.signatureValue=new Or({valueHex:s})}async verify(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ll(!0)).verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0)).getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}Dg.CLASS_NAME="CertificationRequest";const Pg="digestAlgorithm",Og="digest",Ug=[Pg,Og];class _g extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.digestAlgorithm=Jt(e,Pg,_g.defaultValues(Pg)),this.digest=Jt(e,Og,_g.defaultValues(Og)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pg:return new as;case Og:return new Dr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Pg:return as.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t===!1;case Og:return t.isEqual(_g.defaultValues(e));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.digestAlgorithm||{names:{blockName:Pg}}),new Dr({name:e.digest||Og})]})}fromSchema(e){ln(e,Ug);const t=Aa(e,e,_g.schema({names:{digestAlgorithm:{names:{blockName:Pg}},digest:Og}}));Ia.assertSchema(t,this.className),this.digestAlgorithm=new as({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new qr({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}_g.CLASS_NAME="DigestInfo";const Lg="eContentType",Tg="eContent",Rg=[Lg,Tg];class Hg extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.eContentType=Jt(e,Lg,Hg.defaultValues(Lg)),Tg in e&&(this.eContent=Jt(e,Tg,Hg.defaultValues(Tg)),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){const e=new Dr({idBlock:{isConstructed:!0},isConstructed:!0});let t=0;const n=this.eContent.valueBlock.valueHexView.slice().buffer;let r=n.byteLength;for(;r>0;){const a=new Uint8Array(n,t,t+65536>n.byteLength?n.byteLength-t:65536),s=new ArrayBuffer(a.length),i=new Uint8Array(s);for(let e=0;e<i.length;e++)i[e]=a[e];e.valueBlock.value.push(new Dr({valueHex:s})),r-=a.length,t+=a.length}this.eContent=e}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Lg:return Ba;case Tg:return new Dr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Lg:return t===Ba;case Tg:return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(Hg.defaultValues(Tg));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.eContentType||Ba}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new wa({name:e.eContent||Ba})]})]})}fromSchema(e){ln(e,Rg);const t=Aa(e,e,Hg.schema({names:{eContentType:Lg,eContent:Tg}}));Ia.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),Tg in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new Kr({value:this.eContentType})),this.eContent&&!1===Hg.compareWithDefault(Tg,this.eContent)&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new qr({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&!1===Hg.compareWithDefault(Tg,this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}Hg.CLASS_NAME="EncapsulatedContentInfo";const Mg="mac",jg="macSalt",Kg="iterations",Fg=[Mg,jg,Kg];class Jg extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.mac=Jt(e,Mg,Jg.defaultValues(Mg)),this.macSalt=Jt(e,jg,Jg.defaultValues(jg)),Kg in e&&(this.iterations=Jt(e,Kg,Jg.defaultValues(Kg))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mg:return new _g;case jg:return new Dr;case Kg:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mg:return _g.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&_g.compareWithDefault("digest",t.digest);case jg:return t.isEqual(Jg.defaultValues(e));case Kg:return t===Jg.defaultValues(e);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,optional:e.optional||!0,value:[_g.schema(e.mac||{names:{blockName:Mg}}),new Dr({name:e.macSalt||jg}),new Rr({optional:!0,name:e.iterations||Kg})]})}fromSchema(e){ln(e,Fg);const t=Aa(e,e,Jg.schema({names:{mac:{names:{blockName:Mg}},macSalt:jg,iterations:Kg}}));Ia.assertSchema(t,this.className),this.mac=new _g({schema:t.result.mac}),this.macSalt=t.result.macSalt,Kg in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return void 0!==this.iterations&&e.push(new Rr({value:this.iterations})),new qr({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return void 0!==this.iterations&&(e.iterations=this.iterations),e}}Jg.CLASS_NAME="MacData";const Wg="hashAlgorithm",qg="hashedMessage",zg=[Wg,qg];class $g extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=Jt(e,Wg,$g.defaultValues(Wg)),this.hashedMessage=Jt(e,qg,$g.defaultValues(qg)),e.schema&&this.fromSchema(e.schema)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const r=n.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),a=await n.digest(e,t);return new $g({hashAlgorithm:new as({algorithmId:r,algorithmParams:new Br}),hashedMessage:new Dr({valueHex:a})})}static defaultValues(e){switch(e){case Wg:return new as;case qg:return new Dr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Wg:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case qg:return 0===t.isEqual($g.defaultValues(e));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.hashAlgorithm||{}),new Dr({name:e.hashedMessage||Ba})]})}fromSchema(e){ln(e,zg);const t=Aa(e,e,$g.schema({names:{hashAlgorithm:{names:{blockName:Wg}},hashedMessage:qg}}));Ia.assertSchema(t,this.className),this.hashAlgorithm=new as({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new qr({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}$g.CLASS_NAME="MessageImprint";const Qg="reqCert",Gg="singleRequestExtensions",Yg=[Qg,Gg];class Xg extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.reqCert=Jt(e,Qg,Xg.defaultValues(Qg)),Gg in e&&(this.singleRequestExtensions=Jt(e,Gg,Xg.defaultValues(Gg))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qg:return new xd;case Gg:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qg:return t.isEqual(Xg.defaultValues(e));case Gg:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[xd.schema(e.reqCert||{}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[fu.schema(e.extensions||{names:{blockName:e.singleRequestExtensions||Ba}})]})]})}fromSchema(e){ln(e,Yg);const t=Aa(e,e,Xg.schema({names:{reqCert:{names:{blockName:Qg}},extensions:{names:{blockName:Gg}}}}));Ia.assertSchema(t,this.className),this.reqCert=new xd({schema:t.result.reqCert}),Gg in t.result&&(this.singleRequestExtensions=Array.from(t.result.singleRequestExtensions.valueBlock.value,(e=>new fu({schema:e}))))}toSchema(){const e=[];return e.push(this.reqCert.toSchema()),this.singleRequestExtensions&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new qr({value:Array.from(this.singleRequestExtensions,(e=>e.toSchema()))})]})),new qr({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};return this.singleRequestExtensions&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,(e=>e.toJSON()))),e}}Xg.CLASS_NAME="Request";const Zg="tbs",ep="version",tp="requestorName",np="requestList",rp="requestExtensions",ap="TBSRequest",sp="".concat(ap,".").concat(ep),ip="".concat(ap,".").concat(tp),op="".concat(ap,".requests"),lp="".concat(ap,".").concat(rp),up=[ap,sp,ip,op,lp];class cp extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(Jt(e,Zg,cp.defaultValues(Zg))),ep in e&&(this.version=Jt(e,ep,cp.defaultValues(ep))),tp in e&&(this.requestorName=Jt(e,tp,cp.defaultValues(tp))),this.requestList=Jt(e,np,cp.defaultValues(np)),rp in e&&(this.requestExtensions=Jt(e,rp,cp.defaultValues(rp))),e.schema&&this.fromSchema(e.schema)}get tbs(){return Ft._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Zg:return Ea;case ep:return 0;case tp:return new Ja;case np:case rp:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zg:return 0===t.byteLength;case ep:return t===cp.defaultValues(e);case tp:return t.type===Ja.defaultValues("type")&&0===Object.keys(t.value).length;case np:case rp:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||ap,value:[new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Rr({name:e.TBSRequestVersion||sp})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Ja.schema(e.requestorName||{names:{blockName:ip}})]}),new qr({name:e.requestList||"TBSRequest.requestList",value:[new Sa({name:e.requests||op,value:Xg.schema(e.requestNames||{})})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[gu.schema(e.extensions||{names:{blockName:e.requestExtensions||lp}})]})]})}fromSchema(e){ln(e,up);const t=Aa(e,e,cp.schema());Ia.assertSchema(t,this.className),this.tbsView=t.result.TBSRequest.valueBeforeDecodeView,sp in t.result&&(this.version=t.result[sp].valueBlock.valueDec),ip in t.result&&(this.requestorName=new Ja({schema:t.result[ip]})),this.requestList=Array.from(t.result[op],(e=>new Xg({schema:e}))),lp in t.result&&(this.requestExtensions=Array.from(t.result[lp].valueBlock.value,(e=>new fu({schema:e}))))}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbsView.byteLength)return cp.schema();const t=kr(this.tbsView);if(Ia.assert(t,"TBS Request"),!(t.result instanceof qr))throw new Error("ASN.1 result should be SEQUENCE");e=t.result}else{const t=[];void 0!==this.version&&t.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[new Rr({value:this.version})]})),this.requestorName&&t.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),t.push(new qr({value:Array.from(this.requestList,(e=>e.toSchema()))})),this.requestExtensions&&t.push(new Nr({idBlock:{tagClass:3,tagNumber:2},value:[new qr({value:Array.from(this.requestExtensions,(e=>e.toSchema()))})]})),e=new qr({value:t})}return e}toJSON(){const e={};return void 0!=this.version&&(e.version=this.version),this.requestorName&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,(e=>e.toJSON())),this.requestExtensions&&(e.requestExtensions=Array.from(this.requestExtensions,(e=>e.toJSON()))),e}}cp.CLASS_NAME="TBSRequest";const hp="signatureAlgorithm",fp="signature",mp="certs";class dp extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.signatureAlgorithm=Jt(e,hp,dp.defaultValues(hp)),this.signature=Jt(e,fp,dp.defaultValues(fp)),mp in e&&(this.certs=Jt(e,mp,dp.defaultValues(mp))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hp:return new as;case fp:return new Or;case mp:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case hp:return t.algorithmId===Ba&&"algorithmParams"in t===!1;case fp:return t.isEqual(dp.defaultValues(e));case mp:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[as.schema(e.signatureAlgorithm||{}),new Or({name:e.signature||Ba}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new qr({value:[new Sa({name:e.certs||Ba,value:th.schema({})})]})]})]})}fromSchema(e){ln(e,[hp,fp,mp]);const t=Aa(e,e,dp.schema({names:{signatureAlgorithm:{names:{blockName:hp}},signature:fp,certs:mp}}));Ia.assertSchema(t,this.className),this.signatureAlgorithm=new as({schema:t.result.signatureAlgorithm}),this.signature=t.result.signature,mp in t.result&&(this.certs=Array.from(t.result.certs,(e=>new th({schema:e}))))}toSchema(){const e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new qr({value:Array.from(this.certs,(e=>e.toSchema()))})]})),new qr({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,(e=>e.toJSON()))),e}}dp.CLASS_NAME="Signature";const gp="tbsRequest",pp="optionalSignature",vp=[gp,pp];class yp extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsRequest=Jt(e,gp,yp.defaultValues(gp)),pp in e&&(this.optionalSignature=Jt(e,pp,yp.defaultValues(pp))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gp:return new cp;case pp:return new dp;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gp:return cp.compareWithDefault("tbs",t.tbs)&&cp.compareWithDefault("version",t.version)&&cp.compareWithDefault("requestorName",t.requestorName)&&cp.compareWithDefault("requestList",t.requestList)&&cp.compareWithDefault("requestExtensions",t.requestExtensions);case pp:return dp.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&dp.compareWithDefault("signature",t.signature)&&dp.compareWithDefault("certs",t.certs);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||"OCSPRequest",value:[cp.schema(e.tbsRequest||{names:{blockName:gp}}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[dp.schema(e.optionalSignature||{names:{blockName:pp}})]})]})}fromSchema(e){ln(e,vp);const t=Aa(e,e,yp.schema());Ia.assertSchema(t,this.className),this.tbsRequest=new cp({schema:t.result.tbsRequest}),pp in t.result&&(this.optionalSignature=new dp({schema:t.result.optionalSignature}))}toSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];return t.push(this.tbsRequest.toSchema(e)),this.optionalSignature&&t.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]})),new qr({value:t})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};return this.optionalSignature&&(e.optionalSignature=this.optionalSignature.toJSON()),e}async createForCertificate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const r=new xd;await r.createForCertificate(e,t,n),this.tbsRequest.requestList.push(new Xg({reqCert:r}))}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);if(Va.assertEmpty(e,"privateKey","OCSPRequest.sign method"),!this.optionalSignature)throw new Error('Need to create "optionalSignature" field before signing');const r=await n.getSignatureParameters(e,t),a=r.parameters;this.optionalSignature.signatureAlgorithm=r.signatureAlgorithm;const s=this.tbsRequest.toSchema(!0).toBER(!1),i=await n.signWithPrivateKey(s,e,a);this.optionalSignature.signature=new Or({valueHex:i})}verify(){}}yp.CLASS_NAME="OCSPRequest";const wp="responseType",bp="response",Sp=[wp,bp];class kp extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.responseType=Jt(e,wp,kp.defaultValues(wp)),this.response=Jt(e,bp,kp.defaultValues(bp)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wp:return Ba;case bp:return new Dr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wp:return t===Ba;case bp:return t.isEqual(kp.defaultValues(e));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Kr({name:e.responseType||Ba}),new Dr({name:e.response||Ba})]})}fromSchema(e){ln(e,Sp);const t=Aa(e,e,kp.schema({names:{responseType:wp,response:bp}}));Ia.assertSchema(t,this.className),this.responseType=t.result.responseType.valueBlock.toString(),this.response=t.result.response}toSchema(){return new qr({value:[new Kr({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}kp.CLASS_NAME="ResponseBytes";const Ap="responseStatus",Np="responseBytes";class Cp extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.responseStatus=Jt(e,Ap,Cp.defaultValues(Ap)),Np in e&&(this.responseBytes=Jt(e,Np,Cp.defaultValues(Np))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ap:return new Hr;case Np:return new kp;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ap:return t.isEqual(Cp.defaultValues(e));case Np:return kp.compareWithDefault("responseType",t.responseType)&&kp.compareWithDefault("response",t.response);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||"OCSPResponse",value:[new Hr({name:e.responseStatus||Ap}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[kp.schema(e.responseBytes||{names:{blockName:Np}})]})]})}fromSchema(e){ln(e,[Ap,Np]);const t=Aa(e,e,Cp.schema());Ia.assertSchema(t,this.className),this.responseStatus=t.result.responseStatus,Np in t.result&&(this.responseBytes=new kp({schema:t.result.responseBytes}))}toSchema(){const e=[];return e.push(this.responseStatus),this.responseBytes&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new qr({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};return this.responseBytes&&(e.responseBytes=this.responseBytes.toJSON()),e}async getCertificateStatus(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);const a={isForCertificate:!1,status:2};if(!this.responseBytes)return a;if(this.responseBytes.responseType!==Ks)return a;try{const e=kr(this.responseBytes.response.valueBlock.valueHexView);Ia.assert(e,"Basic OCSP response"),n=new pg({schema:e.result})}catch(s){return a}return n.getCertificateStatus(e,t,r)}async sign(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);var r;if(this.responseBytes&&this.responseBytes.responseType===Ks){return pg.fromBER(this.responseBytes.response.valueBlock.valueHexView).sign(e,t,n)}throw new Error("Unknown ResponseBytes type: ".concat((null===(r=this.responseBytes)||void 0===r?void 0:r.responseType)||"Unknown"))}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);var n;if(Np in this===!1)throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===Ks){const n=pg.fromBER(this.responseBytes.response.valueBlock.valueHexView);return null!==e&&(n.certs||(n.certs=[]),n.certs.push(e)),n.verify({},t)}throw new Error("Unknown ResponseBytes type: ".concat((null===(n=this.responseBytes)||void 0===n?void 0:n.responseType)||"Unknown"))}}Cp.CLASS_NAME="OCSPResponse";const Ep="type",Bp="attributes",xp="encodedValue",Vp=[Bp];class Ip extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=Jt(e,Ep,Ip.defaultValues(Ep)),this.attributes=Jt(e,Bp,Ip.defaultValues(Bp)),this.encodedValue=Jt(e,xp,Ip.defaultValues(xp)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ep:return-1;case Bp:return[];case xp:return Ea;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ep:return t===Ip.defaultValues(Ep);case Bp:return 0===t.length;case xp:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new Nr({name:e.blockName||Ba,optional:!0,idBlock:{tagClass:3,tagNumber:e.tagNumber||0},value:[new Sa({name:e.attributes||Ba,value:hs.schema()})]})}fromSchema(e){ln(e,Vp);const t=Aa(e,e,Ip.schema({names:{tagNumber:this.type,attributes:Bp}}));Ia.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=Ft._H.toArrayBuffer(t.result.valueBeforeDecodeView);if(new Uint8Array(this.encodedValue)[0]=49,Bp in t.result!==!1)this.attributes=Array.from(t.result.attributes,(e=>new hs({schema:e})));else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}toSchema(){if(Ip.compareWithDefault(Ep,this.type)||Ip.compareWithDefault(Bp,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){if(Ip.compareWithDefault(Ep,this.type)||Ip.compareWithDefault(Bp,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}Ip.CLASS_NAME="SignedAndUnsignedAttributes";const Dp="version",Pp="sid",Op="digestAlgorithm",Up="signedAttrs",_p="signatureAlgorithm",Lp="signature",Tp="unsignedAttrs",Rp="SignerInfo",Hp="".concat(Rp,".").concat(Dp),Mp="".concat(Rp,".").concat(Pp),jp="".concat(Rp,".").concat(Op),Kp="".concat(Rp,".").concat(Up),Fp="".concat(Rp,".").concat(_p),Jp="".concat(Rp,".").concat(Lp),Wp="".concat(Rp,".").concat(Tp),qp=[Hp,Mp,jp,Kp,Fp,Jp,Wp];class zp extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Dp,zp.defaultValues(Dp)),this.sid=Jt(e,Pp,zp.defaultValues(Pp)),this.digestAlgorithm=Jt(e,Op,zp.defaultValues(Op)),Up in e&&(this.signedAttrs=Jt(e,Up,zp.defaultValues(Up))),this.signatureAlgorithm=Jt(e,_p,zp.defaultValues(_p)),this.signature=Jt(e,Lp,zp.defaultValues(Lp)),Tp in e&&(this.unsignedAttrs=Jt(e,Tp,zp.defaultValues(Tp))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dp:return 0;case Pp:return new wa;case Op:return new as;case Up:return new Ip({type:0});case _p:return new as;case Lp:return new Dr;case Tp:return new Ip({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dp:return zp.defaultValues(Dp)===t;case Pp:return t instanceof wa;case Op:return t instanceof as!==!1&&t.isEqual(zp.defaultValues(Op));case Up:return Ip.compareWithDefault("type",t.type)&&Ip.compareWithDefault("attributes",t.attributes)&&Ip.compareWithDefault("encodedValue",t.encodedValue);case _p:return t instanceof as!==!1&&t.isEqual(zp.defaultValues(_p));case Lp:case Tp:return Ip.compareWithDefault("type",t.type)&&Ip.compareWithDefault("attributes",t.attributes)&&Ip.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:Rp,value:[new Rr({name:e.version||Hp}),new ba({value:[Df.schema(e.sidSchema||{names:{blockName:Mp}}),new ba({value:[new Nr({optional:!0,name:e.sid||Mp,idBlock:{tagClass:3,tagNumber:0},value:[new Dr]}),new br({optional:!0,name:e.sid||Mp,idBlock:{tagClass:3,tagNumber:0}})]})]}),as.schema(e.digestAlgorithm||{names:{blockName:jp}}),Ip.schema(e.signedAttrs||{names:{blockName:Kp,tagNumber:0}}),as.schema(e.signatureAlgorithm||{names:{blockName:Fp}}),new Dr({name:e.signature||Jp}),Ip.schema(e.unsignedAttrs||{names:{blockName:Wp,tagNumber:1}})]})}fromSchema(e){ln(e,qp);const t=Aa(e,e,zp.schema());Ia.assertSchema(t,this.className),this.version=t.result[Hp].valueBlock.valueDec;const n=t.result[Mp];1===n.idBlock.tagClass?this.sid=new Df({schema:n}):this.sid=n,this.digestAlgorithm=new as({schema:t.result[jp]}),Kp in t.result&&(this.signedAttrs=new Ip({type:0,schema:t.result[Kp]})),this.signatureAlgorithm=new as({schema:t.result[Fp]}),this.signature=t.result[Jp],Wp in t.result&&(this.unsignedAttrs=new Ip({type:1,schema:t.result[Wp]}))}toSchema(){if(zp.compareWithDefault(Pp,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new Rr({value:this.version})),this.sid instanceof Df?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&!1===zp.compareWithDefault(Up,this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&!1===zp.compareWithDefault(Tp,this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new qr({value:e})}toJSON(){if(zp.compareWithDefault(Pp,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof wa||(e.sid=this.sid.toJSON()),this.signedAttrs&&!1===zp.compareWithDefault(Up,this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&!1===zp.compareWithDefault(Tp,this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}zp.CLASS_NAME="SignerInfo";const $p="version",Qp="policy",Gp="messageImprint",Yp="serialNumber",Xp="genTime",Zp="ordering",ev="nonce",tv="accuracy",nv="tsa",rv="extensions",av="TSTInfo",sv="".concat(av,".").concat($p),iv="".concat(av,".").concat(Qp),ov="".concat(av,".").concat(Gp),lv="".concat(av,".").concat(Yp),uv="".concat(av,".").concat(Xp),cv="".concat(av,".").concat(tv),hv="".concat(av,".").concat(Zp),fv="".concat(av,".").concat(ev),mv="".concat(av,".").concat(nv),dv="".concat(av,".").concat(rv),gv=[sv,iv,ov,lv,uv,cv,hv,fv,mv,dv];class pv extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,$p,pv.defaultValues($p)),this.policy=Jt(e,Qp,pv.defaultValues(Qp)),this.messageImprint=Jt(e,Gp,pv.defaultValues(Gp)),this.serialNumber=Jt(e,Yp,pv.defaultValues(Yp)),this.genTime=Jt(e,Xp,pv.defaultValues(Xp)),tv in e&&(this.accuracy=Jt(e,tv,pv.defaultValues(tv))),Zp in e&&(this.ordering=Jt(e,Zp,pv.defaultValues(Zp))),ev in e&&(this.nonce=Jt(e,ev,pv.defaultValues(ev))),nv in e&&(this.tsa=Jt(e,nv,pv.defaultValues(nv))),rv in e&&(this.extensions=Jt(e,rv,pv.defaultValues(rv))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $p:return 0;case Qp:return Ba;case Gp:return new $g;case Yp:return new Rr;case Xp:return new Date(0,0,0);case tv:return new Xa;case Zp:return!1;case ev:return new Rr;case nv:return new Ja;case rv:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $p:case Qp:case Xp:case Zp:return t===pv.defaultValues(Zp);case Gp:return $g.compareWithDefault(Wg,t.hashAlgorithm)&&$g.compareWithDefault(qg,t.hashedMessage);case Yp:case ev:return t.isEqual(pv.defaultValues(ev));case tv:return Xa.compareWithDefault(Qa,t.seconds)&&Xa.compareWithDefault(Ga,t.millis)&&Xa.compareWithDefault(Ya,t.micros);case nv:return Ja.compareWithDefault(Ha,t.type)&&Ja.compareWithDefault(Ma,t.value);case rv:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||av,value:[new Rr({name:e.version||sv}),new Kr({name:e.policy||iv}),$g.schema(e.messageImprint||{names:{blockName:ov}}),new Rr({name:e.serialNumber||lv}),new ma({name:e.genTime||uv}),Xa.schema(e.accuracy||{names:{blockName:cv}}),new Vr({name:e.ordering||hv,optional:!0}),new Rr({name:e.nonce||fv,optional:!0}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Ja.schema(e.tsa||{names:{blockName:mv}})]}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Sa({name:e.extensions||dv,value:fu.schema(e.extension||{})})]})]})}fromSchema(e){ln(e,gv);const t=Aa(e,e,pv.schema());Ia.assertSchema(t,this.className),this.version=t.result[sv].valueBlock.valueDec,this.policy=t.result[iv].valueBlock.toString(),this.messageImprint=new $g({schema:t.result[ov]}),this.serialNumber=t.result[lv],this.genTime=t.result[uv].toDate(),cv in t.result&&(this.accuracy=new Xa({schema:t.result[cv]})),hv in t.result&&(this.ordering=t.result[hv].valueBlock.value),fv in t.result&&(this.nonce=t.result[fv]),mv in t.result&&(this.tsa=new Ja({schema:t.result[mv]})),dv in t.result&&(this.extensions=Array.from(t.result[dv],(e=>new fu({schema:e}))))}toSchema(){const e=[];return e.push(new Rr({value:this.version})),e.push(new Kr({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new ma({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),void 0!==this.ordering&&e.push(new Vr({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),void 0!==this.ordering&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}async verify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const n=e.data;if(e.notBefore&&this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const r=t.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),a=await t.digest(r.name,new Uint8Array(n));return Ft._H.isEqual(a,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}pv.CLASS_NAME="TSTInfo";const vv="version",yv="digestAlgorithms",wv="encapContentInfo",bv="certificates",Sv="crls",kv="signerInfos",Av="ocsps",Nv="SignedData",Cv="".concat(Nv,".").concat(vv),Ev="".concat(Nv,".").concat(yv),Bv="".concat(Nv,".").concat(wv),xv="".concat(Nv,".").concat(bv),Vv="".concat(Nv,".").concat(Sv),Iv="".concat(Nv,".").concat(kv),Dv=[Cv,Ev,Bv,xv,Vv,Iv];class Pv extends Error{constructor(e){let{message:t,code:n=0,date:r=new Date,signatureVerified:a=null,signerCertificate:s=null,signerCertificateVerified:i=null,timestampSerial:o=null,certificatePath:l=[]}=e;super(t),this.name="SignedDataVerifyError",this.date=r,this.code=n,this.timestampSerial=o,this.signatureVerified=a,this.signerCertificate=s,this.signerCertificateVerified=i,this.certificatePath=l}}class Ov extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,vv,Ov.defaultValues(vv)),this.digestAlgorithms=Jt(e,yv,Ov.defaultValues(yv)),this.encapContentInfo=Jt(e,wv,Ov.defaultValues(wv)),bv in e&&(this.certificates=Jt(e,bv,Ov.defaultValues(bv))),Sv in e&&(this.crls=Jt(e,Sv,Ov.defaultValues(Sv))),Av in e&&(this.ocsps=Jt(e,Av,Ov.defaultValues(Av))),this.signerInfos=Jt(e,kv,Ov.defaultValues(kv)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vv:return 0;case yv:return[];case wv:return new Hg;case bv:case Sv:case Av:case kv:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vv:return t===Ov.defaultValues(vv);case wv:return Hg.compareWithDefault("eContentType",t.eContentType)&&Hg.compareWithDefault("eContent",t.eContent);case yv:case bv:case Sv:case Av:case kv:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return void 0===e.optional&&(e.optional=!1),new qr({name:e.blockName||Nv,optional:e.optional,value:[new Rr({name:e.version||Cv}),new zr({value:[new Sa({name:e.digestAlgorithms||Ev,value:as.schema()})]}),Hg.schema(e.encapContentInfo||{names:{blockName:Bv}}),new Nr({name:e.certificates||xv,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:gf.schema().valueBlock.value}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Af.schema(e.crls||{names:{crls:Vv}}).valueBlock.value}),new zr({value:[new Sa({name:e.signerInfos||Iv,value:zp.schema()})]})]})}fromSchema(e){ln(e,Dv);const t=Aa(e,e,Ov.schema());if(Ia.assertSchema(t,this.className),this.version=t.result[Cv].valueBlock.valueDec,Ev in t.result&&(this.digestAlgorithms=Array.from(t.result[Ev],(e=>new as({schema:e})))),this.encapContentInfo=new Hg({schema:t.result[Bv]}),xv in t.result){const e=new gf({schema:new zr({value:t.result[xv].valueBlock.value})});this.certificates=e.certificates.slice(0)}Vv in t.result&&(this.crls=Array.from(t.result[Vv],(e=>1===e.idBlock.tagClass?new Uh({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new wf({schema:e}))))),Iv in t.result&&(this.signerInfos=Array.from(t.result[Iv],(e=>new zp({schema:e}))))}toSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];if(this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof ff))||this.crls&&this.crls.length&&this.crls.some((e=>e instanceof wf))?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof gc))?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof Tu))||this.signerInfos.some((e=>3===e.version))||this.encapContentInfo.eContentType!==Ov.ID_DATA?this.version=3:this.version=1,t.push(new Rr({value:this.version})),t.push(new zr({value:Array.from(this.digestAlgorithms,(e=>e.toSchema()))})),t.push(this.encapContentInfo.toSchema()),this.certificates){const e=new gf({certificates:this.certificates}).toSchema();t.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:e.valueBlock.value}))}return this.crls&&t.push(new Nr({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,(t=>{if(t instanceof wf){const e=t.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}return t.toSchema(e)}))})),t.push(new zr({value:Array.from(this.signerInfos,(e=>e.toSchema()))})),new qr({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,(e=>e.toJSON())),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,(e=>e.toJSON()))};return this.certificates&&(e.certificates=Array.from(this.certificates,(e=>e.toJSON()))),this.crls&&(e.crls=Array.from(this.crls,(e=>e.toJSON()))),e}async verify(){let{signer:e=-1,data:t=Ea,trustedCerts:n=[],checkDate:r=new Date,checkChain:a=!1,passedWhenNotRevValues:s=!1,extendedMode:i=!1,findOrigin:o=null,findIssuer:l=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0),c=null,h=null;try{let m=Ea,d=Ba,g=[];const p=this.signerInfos[e];if(!p)throw new Pv({date:r,code:1,message:"Unable to get signer by supplied index"});if(!this.certificates)throw new Pv({date:r,code:2,message:"No certificates attached to this signed data"});if(p.sid instanceof Df){for(const e of this.certificates)if(e instanceof th&&e.issuer.isEqual(p.sid.issuer)&&e.serialNumber.isEqual(p.sid.serialNumber)){c=e;break}}else{const e=p.sid,t=e.idBlock.isConstructed?e.valueBlock.value[0].valueBlock.valueHex:e.valueBlock.valueHex;for(const n of this.certificates){if(!(n instanceof th))continue;if(Yt(await u.digest({name:"sha-1"},n.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),t)){c=n;break}}}if(!c)throw new Pv({date:r,code:3,message:"Unable to find signer certificate"});if("1.2.840.113549.1.9.16.1.4"===this.encapContentInfo.eContentType){if(!this.encapContentInfo.eContent)throw new Pv({date:r,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:c,timestampSerial:h,signerCertificateVerified:!0});let e;try{e=pv.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch(f){throw new Pv({date:r,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:c,timestampSerial:h,signerCertificateVerified:!0})}if(r=e.genTime,h=e.serialNumber.valueBlock.valueHexView.slice(),0===t.byteLength)throw new Pv({date:r,code:4,message:"Missed detached data input array"});if(!await e.verify({data:t},u))throw new Pv({date:r,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:c,timestampSerial:h,signerCertificateVerified:!0})}if(a){const e=this.certificates.filter((e=>e instanceof th&&!!nh(e,c))),t={checkDate:r,certs:e,trustedCerts:n};l&&(t.findIssuer=l),o&&(t.findOrigin=o);const a=new sg(t);if(a.certs.push(c),this.crls)for(const n of this.crls)"thisUpdate"in n?a.crls.push(n):n.otherRevInfoFormat===Ks&&a.ocsps.push(new pg({schema:n.otherRevInfo}));this.ocsps&&a.ocsps.push(...this.ocsps);const i=await a.verify({passedWhenNotRevValues:s},u).catch((e=>{throw new Pv({date:r,code:5,message:"Validation of signer's certificate failed with error: ".concat(e instanceof Object?e.resultMessage:e),signerCertificate:c,signerCertificateVerified:!1})}));if(i.certificatePath&&(g=i.certificatePath),!i.result)throw new Pv({date:r,code:5,message:"Validation of signer's certificate failed: ".concat(i.resultMessage),signerCertificate:c,signerCertificateVerified:!1})}const v=u.getAlgorithmByOID(p.digestAlgorithm.algorithmId);if(!("name"in v))throw new Pv({date:r,code:7,message:"Unsupported signature algorithm: ".concat(p.digestAlgorithm.algorithmId),signerCertificate:c,signerCertificateVerified:!0});d=v.name;const y=this.encapContentInfo.eContent;if(y)t=1===y.idBlock.tagClass&&4===y.idBlock.tagNumber?y.getValue():y.valueBlock.valueBeforeDecodeView;else if(0===t.byteLength)throw new Pv({date:r,code:8,message:"Missed detached data input array",signerCertificate:c,signerCertificateVerified:!0});if(p.signedAttrs){let e=!1,t=!1;for(const n of p.signedAttrs.attributes)if("1.2.840.113549.1.9.3"===n.type&&(e=!0),"1.2.840.113549.1.9.4"===n.type&&(t=!0,m=n.values[0].valueBlock.valueHex),e&&t)break;if(!1===e)throw new Pv({date:r,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:c,signerCertificateVerified:!0});if(!1===t)throw new Pv({date:r,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:c,signerCertificateVerified:!0})}if(p.signedAttrs){if(!Yt(await u.digest(d,new Uint8Array(t)),m))throw new Pv({date:r,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:c,timestampSerial:h,signerCertificateVerified:!0});t=p.signedAttrs.encodedValue}const w=await u.verifyWithPublicKey(t,p.signature,c.subjectPublicKeyInfo,c.signatureAlgorithm,d);return i?{date:r,code:14,message:Ba,signatureVerified:w,signerCertificate:c,timestampSerial:h,signerCertificateVerified:!0,certificatePath:g}:w}catch(Cw){if(Cw instanceof Pv)throw Cw;throw new Pv({date:r,code:15,message:"Error during verification: ".concat(Cw instanceof Error?Cw.message:Cw),signatureVerified:null,signerCertificate:c,timestampSerial:h,signerCertificateVerified:!0})}}async sign(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"SHA-1",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ea,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ll(!0);if(!e)throw new Error("Need to provide a private key for signing");const s=a.getOIDByAlgorithm({name:n},!0,"hashAlgorithm");0===this.digestAlgorithms.filter((e=>e.algorithmId===s)).length&&this.digestAlgorithms.push(new as({algorithmId:s,algorithmParams:new Br}));const i=this.signerInfos[t];if(!i)throw new RangeError("SignerInfo index is out of range");i.digestAlgorithm=new as({algorithmId:s,algorithmParams:new Br});const o=await a.getSignatureParameters(e,n),l=o.parameters;if(i.signatureAlgorithm=o.signatureAlgorithm,i.signedAttrs)if(0!==i.signedAttrs.encodedValue.byteLength)r=i.signedAttrs.encodedValue;else{r=i.signedAttrs.toSchema().toBER();Ft._H.toUint8Array(r)[0]=49}else{const e=this.encapContentInfo.eContent;if(e)r=1===e.idBlock.tagClass&&4===e.idBlock.tagNumber?e.getValue():e.valueBlock.valueBeforeDecodeView;else if(0===r.byteLength)throw new Error("Missed detached data input array")}const u=await a.signWithPrivateKey(r,e,l);i.signature=new Dr({valueHex:u})}}Ov.CLASS_NAME="SignedData",Ov.ID_DATA=Us;const Uv="version",_v="authSafe",Lv="macData",Tv="parsedValue",Rv=[Uv,_v,Lv];class Hv extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,Uv,Hv.defaultValues(Uv)),this.authSafe=Jt(e,_v,Hv.defaultValues(_v)),Lv in e&&(this.macData=Jt(e,Lv,Hv.defaultValues(Lv))),Tv in e&&(this.parsedValue=Jt(e,Tv,Hv.defaultValues(Tv))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uv:return 3;case _v:return new wc;case Lv:return new Jg;case Tv:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Uv:return t===Hv.defaultValues(e);case _v:return wc.compareWithDefault("contentType",t.contentType)&&wc.compareWithDefault("content",t.content);case Lv:return Jg.compareWithDefault("mac",t.mac)&&Jg.compareWithDefault("macSalt",t.macSalt)&&Jg.compareWithDefault("iterations",t.iterations);case Tv:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.version||Uv}),wc.schema(e.authSafe||{names:{blockName:_v}}),Jg.schema(e.macData||{names:{blockName:Lv,optional:!0}})]})}fromSchema(e){ln(e,Rv);const t=Aa(e,e,Hv.schema({names:{version:Uv,authSafe:{names:{blockName:_v}},macData:{names:{blockName:Lv}}}}));Ia.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new wc({schema:t.result.authSafe}),Lv in t.result&&(this.macData=new Jg({schema:t.result.macData}))}toSchema(){const e=[new Rr({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new qr({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}async makeInternalValues(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);if(xa.assert(e,"parameters","object"),!this.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(Va.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue"),Va.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new Va("iterations");Va.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),Va.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),Va.assertEmpty(e.password,"password");const n=new ArrayBuffer(64),r=new Uint8Array(n);t.getRandomValues(r);const a=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new wc({contentType:wc.DATA,content:new Dr({valueHex:a})});const s=await t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:n,iterationCount:e.iterations,contentToStamp:a});this.macData=new Jg({mac:new _g({digestAlgorithm:new as({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new Dr({valueHex:s})}),macSalt:new Dr({valueHex:n}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new Va("signingCertificate");Va.assertEmpty(e.privateKey,"privateKey"),Va.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const n=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),r=new Ov({version:1,encapContentInfo:new Hg({eContentType:"1.2.840.113549.1.7.1",eContent:new Dr({valueHex:n})}),certificates:[e.signingCertificate]}),a=await t.digest({name:e.hashAlgorithm},new Uint8Array(n)),s=[];s.push(new hs({type:"1.2.840.113549.1.9.3",values:[new Kr({value:"1.2.840.113549.1.7.1"})]})),s.push(new hs({type:"1.2.840.113549.1.9.5",values:[new fa({valueDate:new Date})]})),s.push(new hs({type:"1.2.840.113549.1.9.4",values:[new Dr({valueHex:a})]})),r.signerInfos.push(new zp({version:1,sid:new Df({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new Ip({type:0,attributes:s})})),await r.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),this.authSafe=new wc({contentType:"1.2.840.113549.1.7.2",content:r.toSchema(!0)})}break;default:throw new Error('Parameter "integrityMode" has unknown value: '.concat(this.parsedValue.integrityMode))}}async parseInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);switch(xa.assert(e,"parameters","object"),void 0===e.checkIntegrity&&(e.checkIntegrity=!0),this.parsedValue={},this.authSafe.contentType){case wc.DATA:{Va.assertEmpty(e.password,"password"),this.parsedValue.integrityMode=0,xa.assert(this.authSafe.content,"authSafe.content",Dr);const n=this.authSafe.content.getValue();if(this.parsedValue.authenticatedSafe=kd.fromBER(n),e.checkIntegrity){if(!this.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const r=t.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!await t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:r.name,salt:Ft._H.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:n,signatureToVerify:Ft._H.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)}))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case wc.SIGNED_DATA:{this.parsedValue.integrityMode=1;const e=new Ov({schema:this.authSafe.content}),n=e.encapContentInfo.eContent;Va.assert(n,"eContent","cmsSigned.encapContentInfo"),xa.assert(n,"eContent",Dr);const r=n.getValue();this.parsedValue.authenticatedSafe=kd.fromBER(r);if(!await e.verify({signer:0,checkChain:!1},t))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error('Incorrect value for "this.authSafe.contentType": '.concat(this.authSafe.contentType))}}}Hv.CLASS_NAME="PFX";const Mv="status",jv="statusStrings",Kv="failInfo",Fv=[Mv,jv,Kv];var Jv;!function(e){e[e.granted=0]="granted",e[e.grantedWithMods=1]="grantedWithMods",e[e.rejection=2]="rejection",e[e.waiting=3]="waiting",e[e.revocationWarning=4]="revocationWarning",e[e.revocationNotification=5]="revocationNotification"}(Jv||(Jv={}));class Wv extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.status=Jt(e,Mv,Wv.defaultValues(Mv)),jv in e&&(this.statusStrings=Jt(e,jv,Wv.defaultValues(jv))),Kv in e&&(this.failInfo=Jt(e,Kv,Wv.defaultValues(Kv))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mv:return 2;case jv:return[];case Kv:return new Or;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mv:return t===Wv.defaultValues(e);case jv:return 0===t.length;case Kv:return t.isEqual(Wv.defaultValues(e));default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Ba,value:[new Rr({name:e.status||Ba}),new qr({optional:!0,value:[new Sa({name:e.statusStrings||Ba,value:new Xr})]}),new Or({name:e.failInfo||Ba,optional:!0})]})}fromSchema(e){ln(e,Fv);const t=Aa(e,e,Wv.schema({names:{status:Mv,statusStrings:jv,failInfo:Kv}}));Ia.assertSchema(t,this.className);const n=t.result.status;if(!0===n.valueBlock.isHexOnly||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,jv in t.result&&(this.statusStrings=t.result.statusStrings),Kv in t.result&&(this.failInfo=t.result.failInfo)}toSchema(){const e=[];return e.push(new Rr({value:this.status})),this.statusStrings&&e.push(new qr({optional:!0,value:this.statusStrings})),this.failInfo&&e.push(this.failInfo),new qr({value:e})}toJSON(){const e={status:this.status};return this.statusStrings&&(e.statusStrings=Array.from(this.statusStrings,(e=>e.toJSON()))),this.failInfo&&(e.failInfo=this.failInfo.toJSON()),e}}Wv.CLASS_NAME="PKIStatusInfo";const qv="version",zv="messageImprint",$v="reqPolicy",Qv="nonce",Gv="certReq",Yv="extensions",Xv="TimeStampReq",Zv="".concat(Xv,".").concat(qv),ey="".concat(Xv,".").concat(zv),ty="".concat(Xv,".").concat($v),ny="".concat(Xv,".").concat(Qv),ry="".concat(Xv,".").concat(Gv),ay="".concat(Xv,".").concat(Yv),sy=[Zv,ey,ty,ny,ry,ay];class iy extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=Jt(e,qv,iy.defaultValues(qv)),this.messageImprint=Jt(e,zv,iy.defaultValues(zv)),$v in e&&(this.reqPolicy=Jt(e,$v,iy.defaultValues($v))),Qv in e&&(this.nonce=Jt(e,Qv,iy.defaultValues(Qv))),Gv in e&&(this.certReq=Jt(e,Gv,iy.defaultValues(Gv))),Yv in e&&(this.extensions=Jt(e,Yv,iy.defaultValues(Yv))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qv:return 0;case zv:return new $g;case $v:return Ba;case Qv:return new Rr;case Gv:return!1;case Yv:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case qv:case $v:case Gv:return t===iy.defaultValues(e);case zv:return $g.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&$g.compareWithDefault("hashedMessage",t.hashedMessage);case Qv:return t.isEqual(iy.defaultValues(e));case Yv:return 0===t.length;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||Xv,value:[new Rr({name:e.version||Zv}),$g.schema(e.messageImprint||{names:{blockName:ey}}),new Kr({name:e.reqPolicy||ty,optional:!0}),new Rr({name:e.nonce||ny,optional:!0}),new Vr({name:e.certReq||ry,optional:!0}),new Nr({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Sa({name:e.extensions||ay,value:fu.schema()})]})]})}fromSchema(e){ln(e,sy);const t=Aa(e,e,iy.schema());Ia.assertSchema(t,this.className),this.version=t.result[Zv].valueBlock.valueDec,this.messageImprint=new $g({schema:t.result[ey]}),ty in t.result&&(this.reqPolicy=t.result[ty].valueBlock.toString()),ny in t.result&&(this.nonce=t.result[ny]),ry in t.result&&(this.certReq=t.result[ry].valueBlock.value),ay in t.result&&(this.extensions=Array.from(t.result[ay],(e=>new fu({schema:e}))))}toSchema(){const e=[];return e.push(new Rr({value:this.version})),e.push(this.messageImprint.toSchema()),this.reqPolicy&&e.push(new Kr({value:this.reqPolicy})),this.nonce&&e.push(this.nonce),Gv in this&&!1===iy.compareWithDefault(Gv,this.certReq)&&e.push(new Vr({value:this.certReq})),this.extensions&&e.push(new Nr({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,(e=>e.toSchema()))})),new qr({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};return void 0!==this.reqPolicy&&(e.reqPolicy=this.reqPolicy),void 0!==this.nonce&&(e.nonce=this.nonce.toJSON()),void 0!==this.certReq&&!1===iy.compareWithDefault(Gv,this.certReq)&&(e.certReq=this.certReq),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}}iy.CLASS_NAME="TimeStampReq";const oy="status",ly="timeStampToken",uy="TimeStampResp",cy="".concat(uy,".").concat(oy),hy="".concat(uy,".").concat(ly),fy=[cy,hy];class my extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.status=Jt(e,oy,my.defaultValues(oy)),ly in e&&(this.timeStampToken=Jt(e,ly,my.defaultValues(ly))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case oy:return new Wv;case ly:return new wc;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case oy:return Wv.compareWithDefault(oy,t.status)&&"statusStrings"in t===!1&&"failInfo"in t===!1;case ly:return t.contentType===Ba&&t.content instanceof wa;default:return super.defaultValues(e)}}static schema(){const e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new qr({name:e.blockName||uy,value:[Wv.schema(e.status||{names:{blockName:cy}}),wc.schema(e.timeStampToken||{names:{blockName:hy,optional:!0}})]})}fromSchema(e){ln(e,fy);const t=Aa(e,e,my.schema());Ia.assertSchema(t,this.className),this.status=new Wv({schema:t.result[cy]}),hy in t.result&&(this.timeStampToken=new wc({schema:t.result[hy]}))}toSchema(){const e=[];return e.push(this.status.toSchema()),this.timeStampToken&&e.push(this.timeStampToken.toSchema()),new qr({value:e})}toJSON(){const e={status:this.status.toJSON()};return this.timeStampToken&&(e.timeStampToken=this.timeStampToken.toJSON()),e}async sign(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll(!0);this.assertContentType();return new Ov({schema:this.timeStampToken.content}).sign(e,0,t,void 0,n)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{signer:0,trustedCerts:[],data:Ea},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll(!0);this.assertContentType();return new Ov({schema:this.timeStampToken.content}).verify(e,t)}assertContentType(){if(!this.timeStampToken)throw new Error("timeStampToken is absent in TSP response");if(this.timeStampToken.contentType!==_s)throw new Error("Wrong format of timeStampToken: ".concat(this.timeStampToken.contentType))}}my.CLASS_NAME="TimeStampResp",function(){if("undefined"!==typeof self){if("crypto"in self){let e="webcrypto";"webkitSubtle"in self.crypto&&(e="safari"),_l(e,new Pl({name:e,crypto:crypto}))}}else if("undefined"!==typeof crypto&&"webcrypto"in crypto){const e="NodeJS ^15",t=crypto.webcrypto;_l(e,new Pl({name:e,crypto:t}))}}();const dy=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){console.error("Error reading data from local storage:",t)}},gy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function py(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const vy={date:py({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:py({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:py({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},yy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function wy(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function by(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(i)));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;return{value:u,rest:t.slice(i.length)}}}var Sy;const ky={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=gy[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:vy,formatRelative:(e,t,n,r)=>yy[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:wy({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:wy({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:wy({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:wy({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:wy({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Sy={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Sy.matchPattern);if(!n)return null;const r=n[0],a=e.match(Sy.parsePattern);if(!a)return null;let s=Sy.valueCallback?Sy.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:by({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:by({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:by({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:by({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:by({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Ay={};function Ny(){return Ay}Math.pow(10,8);const Cy=6048e5,Ey=864e5;function By(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function xy(e){const t=By(e);return t.setHours(0,0,0,0),t}function Vy(e){const t=By(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Iy(e,t){const n=xy(e),r=xy(t),a=+n-Vy(n),s=+r-Vy(r);return Math.round((a-s)/Ey)}function Dy(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Py(e){const t=By(e),n=Dy(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Oy(e){const t=By(e);return Iy(t,Py(t))+1}function Uy(e,t){var n,r,a,s,i,o;const l=Ny(),u=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,c=By(e),h=c.getDay(),f=(h<u?7:0)+h-u;return c.setDate(c.getDate()-f),c.setHours(0,0,0,0),c}function _y(e){return Uy(e,{weekStartsOn:1})}function Ly(e){const t=By(e),n=t.getFullYear(),r=Dy(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=_y(r),s=Dy(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=_y(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function Ty(e){const t=Ly(e),n=Dy(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),_y(n)}function Ry(e){const t=By(e),n=+_y(t)-+Ty(t);return Math.round(n/Cy)+1}function Hy(e,t){var n,r,a,s,i,o;const l=By(e),u=l.getFullYear(),c=Ny(),h=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:c.firstWeekContainsDate)&&void 0!==r?r:null===(o=c.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,f=Dy(e,0);f.setFullYear(u+1,0,h),f.setHours(0,0,0,0);const m=Uy(f,t),d=Dy(e,0);d.setFullYear(u,0,h),d.setHours(0,0,0,0);const g=Uy(d,t);return l.getTime()>=m.getTime()?u+1:l.getTime()>=g.getTime()?u:u-1}function My(e,t){var n,r,a,s,i,o;const l=Ny(),u=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,c=Hy(e,t),h=Dy(e,0);h.setFullYear(c,0,u),h.setHours(0,0,0,0);return Uy(h,t)}function jy(e,t){const n=By(e),r=+Uy(n,t)-+My(n,t);return Math.round(r/Cy)+1}function Ky(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Fy={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ky("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Ky(n+1,2)},d:(e,t)=>Ky(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Ky(e.getHours()%12||12,t.length),H:(e,t)=>Ky(e.getHours(),t.length),m:(e,t)=>Ky(e.getMinutes(),t.length),s:(e,t)=>Ky(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Ky(Math.trunc(r*Math.pow(10,n-3)),t.length)}},Jy="midnight",Wy="noon",qy="morning",zy="afternoon",$y="evening",Qy="night",Gy={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return Fy.y(e,t)},Y:function(e,t,n,r){const a=Hy(e,r),s=a>0?a:1-a;if("YY"===t){return Ky(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):Ky(s,t.length)},R:function(e,t){return Ky(Ly(e),t.length)},u:function(e,t){return Ky(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ky(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ky(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Fy.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ky(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=jy(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Ky(a,t.length)},I:function(e,t,n){const r=Ry(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Ky(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Fy.d(e,t)},D:function(e,t,n){const r=Oy(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Ky(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ky(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ky(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Ky(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?Wy:0===r?Jy:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?$y:r>=12?zy:r>=4?qy:Qy,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Fy.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Fy.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ky(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ky(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Fy.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Fy.s(e,t)},S:function(e,t){return Fy.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Xy(r);case"XXXX":case"XX":return Zy(r);default:return Zy(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Xy(r);case"xxxx":case"xx":return Zy(r);default:return Zy(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Yy(r,":");default:return"GMT"+Zy(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Yy(r,":");default:return"GMT"+Zy(r,":")}},t:function(e,t,n){return Ky(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return Ky(e.getTime(),t.length)}};function Yy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return 0===s?n+String(a):n+String(a)+t+Ky(s,2)}function Xy(e,t){if(e%60===0){return(e>0?"-":"+")+Ky(Math.abs(e)/60,2)}return Zy(e,t)}function Zy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+Ky(Math.trunc(r/60),2)+t+Ky(r%60,2)}const ew=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},tw=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},nw={p:tw,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return ew(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",ew(r,t)).replace("{{time}}",tw(a,t))}},rw=/^D+$/,aw=/^Y+$/,sw=["D","DD","YY","YYYY"];function iw(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function ow(e){if(!iw(e)&&"number"!==typeof e)return!1;const t=By(e);return!isNaN(Number(t))}const lw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cw=/^'([^]*?)'?$/,hw=/''/g,fw=/[a-zA-Z]/;function mw(e,t,n){var r,a,s,i,o,l,u,c,h,f,m,d,g,p;const v=Ny(),y=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:v.locale)&&void 0!==r?r:ky,w=null!==(s=null!==(i=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(u=n.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:v.firstWeekContainsDate)&&void 0!==i?i:null===(c=v.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:1,b=null!==(h=null!==(f=null!==(m=null!==(d=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==d?d:null===n||void 0===n||null===(g=n.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==m?m:v.weekStartsOn)&&void 0!==f?f:null===(p=v.locale)||void 0===p||null===(p=p.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==h?h:0,S=By(e);if(!ow(S))throw new RangeError("Invalid time value");let k=t.match(uw).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,nw[t])(e,y.formatLong)}return e})).join("").match(lw).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:dw(e)};if(Gy[t])return{isToken:!0,value:e};if(t.match(fw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(k=y.localize.preprocessor(S,k));const A={firstWeekContainsDate:w,weekStartsOn:b,locale:y};return k.map((r=>{if(!r.isToken)return r.value;const a=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return aw.test(e)}(a))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return rw.test(e)}(a))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),sw.includes(e))throw new RangeError(r)}(a,t,String(e));return(0,Gy[a[0]])(S,a,y.localize,A)})).join("")}function dw(e){const t=e.match(cw);return t?t[1].replace(hw,"'"):e}const gw=e=>mw(e,"yyyy-MM-dd"),pw=()=>(0,De.jsx)("div",{className:"Loader","data-cy":"loader",children:(0,De.jsx)("div",{className:"Loader__content"})}),vw=e=>{let{setIsAdd:n}=e;const[r,a]=(0,t.useState)(!1),[s,i]=(0,t.useState)(!1),{getRootProps:o,getInputProps:l}=Mt({onDrop:async e=>{const t=e[0];if(t)try{i(!0);const e=await c(t),r=u(e);if(null===r)throw new Error("Failed to parse the certificate");n(!1),((e,t)=>{try{const n=localStorage.getItem(e),r=[...n?JSON.parse(n):[],t];localStorage.setItem(e,JSON.stringify(r))}catch(n){console.error("Error adding data to local storage:",n)}})("certificates",r)}catch(r){a(!0),console.error("Error reading file:",r)}finally{i(!1)}}}),u=e=>{try{const t=kr(e),n=new th({schema:t.result}),r=n.subject.typesAndValues.map((e=>e.value.valueBlock.value)),a=n.issuer.typesAndValues.map((e=>e.value.valueBlock.value)),s=n.notBefore.value,i=n.notAfter.value,o=r[0],l=a[0];return{id:Math.floor(1e4*Math.random()),CommonName:o,IssuerCN:l,certificateValidFrom:gw(s),certificateValidTo:gw(i)}}catch(t){return console.error("Error parsing certificate:",t),null}},c=e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=e=>{try{var r;const n=null===(r=e.target)||void 0===r?void 0:r.result;t(n)}catch(a){n(a)}},r.onerror=e=>{n(e)},r.readAsArrayBuffer(e)}));return(0,De.jsxs)("div",{className:"add",children:[s&&(0,De.jsx)(pw,{}),!1===s&&(0,De.jsx)(De.Fragment,{children:(0,De.jsxs)("div",{...o({className:"dropzone"}),children:[(0,De.jsx)("h1",{children:"\u041f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0444\u0430\u0439\u043b \u0441\u0435\u0440\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u0443 \u0441\u044e\u0434\u0438"}),(0,De.jsx)("p",{children:"\u0430\u0431\u043e"}),(0,De.jsx)("button",{className:"add__button",children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0434\u0456\u0430\u043b\u043e\u0433"}),(0,De.jsx)("input",{...l()}),r&&(0,De.jsx)("h2",{className:"add__wrong",children:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430 \u0441\u0435\u0440\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u0430 (\u043e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f SEQUENCE)"})]})})]})};var yw=n(139),ww=n.n(yw);let bw=function(e){return e.Back="\u041d\u0430\u0437\u0430\u0434",e.Add="\u0414\u043e\u0434\u0430\u0442\u0438",e}({});const Sw=e=>{let{setIsAdd:t,isAdd:n}=e;const r=dy("certificates");return(0,De.jsxs)("div",{className:"certificates",children:[(0,De.jsx)("button",{type:"button",className:"certificates__button",onClick:()=>t(!n),children:n?bw.Back:bw.Add}),r&&r.length>0?(0,De.jsx)("ul",{className:"certificates__list",children:r.map((e=>(0,De.jsx)(Be,{to:"/certify-portal/".concat(e.id),className:e=>{let{isActive:t}=e;return ww()(ww()("certificates__name",{"certificates__name--active":t}))},children:e.CommonName},e.id)))}):(0,De.jsx)("h2",{className:"certificates__title",children:"\u041d\u0435\u043c\u0430\u0454 \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u0443"})]})},kw=()=>{var e,n,r,a;const{certificateId:s}=function(){let{matches:e}=t.useContext($),n=e[e.length-1];return n?n.params:{}}(),i=dy("certificates");let o;return i&&(o=i.find((e=>e.id.toString()===s))),(0,De.jsxs)("div",{className:"info",children:[(0,De.jsxs)("h1",{className:"info__title",children:[(0,De.jsx)("b",{children:"Common name:"})," ",null===(e=o)||void 0===e?void 0:e.CommonName]}),(0,De.jsxs)("h1",{className:"info__title",children:[(0,De.jsx)("b",{children:"Issuer CN:"})," ",null===(n=o)||void 0===n?void 0:n.IssuerCN]}),(0,De.jsxs)("h1",{className:"info__title",children:[(0,De.jsx)("b",{children:"Valid from:"})," ",null===(r=o)||void 0===r?void 0:r.certificateValidFrom]}),(0,De.jsxs)("h1",{className:"info__title",children:[(0,De.jsx)("b",{children:"Valid to:"})," ",null===(a=o)||void 0===a?void 0:a.certificateValidTo]})]})};function Aw(){const[e,n]=(0,t.useState)(!1);return(0,De.jsx)("main",{children:(0,De.jsxs)(Ae,{children:[(0,De.jsx)(Sw,{isAdd:e,setIsAdd:n}),e&&(0,De.jsx)(vw,{setIsAdd:n}),(0,De.jsxs)(ge,{children:[(0,De.jsx)(me,{path:"/certify-portal",children:(0,De.jsx)(me,{path:":certificateId",element:(0,De.jsx)(kw,{})})}),(0,De.jsx)(me,{path:"*",element:(0,De.jsx)(Pe,{})})]})]})})}const Nw=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:s,getTTFB:i}=t;n(e),r(e),a(e),s(e),i(e)}))};a.createRoot(document.getElementById("root")).render((0,De.jsx)(t.StrictMode,{children:(0,De.jsx)(Aw,{})})),Nw()})()})();
//# sourceMappingURL=main.341757d5.js.map